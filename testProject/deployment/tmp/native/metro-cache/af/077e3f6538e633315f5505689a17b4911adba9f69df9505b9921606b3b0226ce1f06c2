{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":183,"column":0,"index":5846}}],"key":"ohGilxjVqjyE1GooDVDt9OYg9x0="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":183,"column":0,"index":5846}}],"key":"V6GYoXnblvuuGHJNMy7MHyaunsU="}},{"name":"invariant","data":{"asyncType":null,"locs":[{"start":{"line":14,"column":18,"index":304},"end":{"line":14,"column":38,"index":324}}],"key":"Fzi/BpZws2YooIGJ9b6u0HJtuks="}}],"output":[{"data":{"code":"__d((function(g,r,i,a,m,_e,d){'use strict';var e=r(d[0]),t=r(d[1]),u=(function(){return t((function t(u){var s=u.onMoreTasks;e(this,t),this._onMoreTasks=s,this._queueStack=[{tasks:[],popable:!1}]}),[{key:\"enqueue\",value:function(e){this._getCurrentQueue().push(e)}},{key:\"enqueueTasks\",value:function(e){var t=this;e.forEach((function(e){return t.enqueue(e)}))}},{key:\"cancelTasks\",value:function(e){this._queueStack=this._queueStack.map((function(t){return Object.assign({},t,{tasks:t.tasks.filter((function(t){return-1===e.indexOf(t)}))})})).filter((function(e,t){return e.tasks.length>0||0===t}))}},{key:\"hasTasksToProcess\",value:function(){return this._getCurrentQueue().length>0}},{key:\"processNext\",value:function(){var e=this._getCurrentQueue();if(e.length){var t=e.shift();try{'object'==typeof t&&t.gen?this._genPromise(t):'object'==typeof t&&t.run?t.run():(r(d[2])('function'==typeof t,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(t,null,2)),t())}catch(e){throw e.message='TaskQueue: Error with task '+(t.name||'')+': '+e.message,e}}}},{key:\"_getCurrentQueue\",value:function(){var e=this._queueStack.length-1,t=this._queueStack[e];return t.popable&&0===t.tasks.length&&this._queueStack.length>1?(this._queueStack.pop(),this._getCurrentQueue()):t.tasks}},{key:\"_genPromise\",value:function(e){var t=this;this._queueStack.push({tasks:[],popable:!1});var u=this._queueStack.length-1,s=this._queueStack[u];e.gen().then((function(){s.popable=!0,t.hasTasksToProcess()&&t._onMoreTasks()})).catch((function(t){setTimeout((function(){throw t.message=`TaskQueue: Error resolving Promise in task ${e.name}: ${t.message}`,t}),0)}))}}])})();m.exports=u}));","lineCount":1,"map":[[1,30,11,0],[1,43,11,13],[1,47,11,13,"_classCallCheck"],[1,49,11,13,"r"],[1,51,11,13,"d"],[1,53,11,13],[1,57,11,13,"_createClass"],[1,59,11,13,"r"],[1,61,11,13,"d"],[1,63,11,13],[1,67,44,6,"TaskQueue"],[1,70,44,15],[1,81,57,2],[1,88,57,2,"_createClass"],[1,91,52,2],[1,100,52,2,"TaskQueue"],[1,102,52,2,"_ref"],[1,105,52,61],[1,109,52,15,"onMoreTasks"],[1,111,52,26,"_ref"],[1,113,52,15,"onMoreTasks"],[1,125,52,26,"_classCallCheck"],[1,127,52,26,"this"],[1,132,52,26,"TaskQueue"],[1,135,53,4,"this"],[1,140,53,9,"_onMoreTasks"],[1,153,53,24,"onMoreTasks"],[1,155,54,4,"this"],[1,160,54,9,"_queueStack"],[1,172,54,23],[1,173,54,24],[1,174,54,25,"tasks"],[1,180,54,32],[1,183,54,36,"popable"],[1,192,54,45],[1,195,55,2],[1,198,57,2],[1,200,57,2,"key"],[1,204,57,2],[1,214,57,2,"value"],[1,220,62,2],[1,229,62,10,"task"],[1,232,63,4,"this"],[1,237,63,9,"_getCurrentQueue"],[1,256,63,28,"push"],[1,261,63,33,"task"],[1,263,64,2],[1,266,64,3],[1,267,64,3,"key"],[1,271,64,3],[1,286,64,3,"value"],[1,292,66,2],[1,301,66,15,"tasks"],[1,304,66,41],[1,308,66,41,"_this"],[1,310,66,41,"this"],[1,315,67,4,"tasks"],[1,317,67,10,"forEach"],[1,326,67,18],[1,335,67,18,"task"],[1,338,67,22],[1,345,67,26,"_this"],[1,347,67,31,"enqueue"],[1,355,67,39,"task"],[1,357,67,44],[1,360,68,2],[1,363,68,3],[1,364,68,3,"key"],[1,368,68,3],[1,382,68,3,"value"],[1,388,70,2],[1,397,70,14,"tasksToCancel"],[1,400,72,4,"this"],[1,405,72,9,"_queueStack"],[1,417,72,23,"this"],[1,422,72,28,"_queueStack"],[1,434,73,7,"map"],[1,439,73,11],[1,448,73,11,"queue"],[1,451,73,16],[1,458,73,16,"Object"],[1,465,73,16,"assign"],[1,472,73,16],[1,475,74,11,"queue"],[1,477,74,16],[1,478,75,8,"tasks"],[1,484,75,15,"queue"],[1,486,75,21,"tasks"],[1,492,75,27,"filter"],[1,500,75,34],[1,509,75,34,"task"],[1,512,75,38],[1,519,75,69],[1,523,75,42,"tasksToCancel"],[1,525,75,56,"indexOf"],[1,533,75,64,"task"],[1,535,75,76],[1,540,75,77],[1,544,77,7,"filter"],[1,552,77,14],[1,561,77,15,"queue"],[1,563,77,22,"idx"],[1,566,77,25],[1,573,77,30,"queue"],[1,575,77,36,"tasks"],[1,581,77,42,"length"],[1,588,77,51],[1,591,77,64],[1,595,77,56,"idx"],[1,596,77,65],[1,599,78,2],[1,602,80,2],[1,603,80,2,"key"],[1,607,80,2],[1,627,80,2,"value"],[1,633,90,2],[1,644,91,4],[1,651,91,11,"this"],[1,656,91,16,"_getCurrentQueue"],[1,675,91,35,"length"],[1,682,91,44],[1,683,92,2],[1,686,94,2],[1,687,94,2,"key"],[1,691,94,2],[1,705,94,2,"value"],[1,711,97,2],[1,722,98,4],[1,726,98,10,"queue"],[1,728,98,18,"this"],[1,733,98,23,"_getCurrentQueue"],[1,752,99,4],[1,755,99,8,"queue"],[1,757,99,14,"length"],[1,764,99,22],[1,765,100,6],[1,769,100,12,"task"],[1,771,100,19,"queue"],[1,773,100,25,"shift"],[1,781,101,6],[1,785,102,28],[1,802,102,19,"task"],[1,805,102,40,"task"],[1,807,102,45,"gen"],[1,811,104,10,"this"],[1,816,104,15,"_genPromise"],[1,828,104,27,"task"],[1,831,105,35],[1,848,105,26,"task"],[1,851,105,47,"task"],[1,853,105,52,"run"],[1,857,107,10,"task"],[1,859,107,15,"run"],[1,866,109,10,"r"],[1,868,109,10,"d"],[1,870,109,10],[1,873,109,10,"r"],[1,874,110,28],[1,893,110,19,"task"],[1,895,111,12],[1,955,112,14,"JSON"],[1,960,112,19,"stringify"],[1,970,112,29,"task"],[1,972,112,35],[1,977,112,41],[1,981,115,10,"task"],[1,985,117,6],[1,986,117,8],[1,992,117,15,"e"],[1,995,120,8],[1,1001,118,8,"e"],[1,1003,118,10,"message"],[1,1011,119,10],[1,1042,119,43,"task"],[1,1044,119,48,"name"],[1,1050,119,56],[1,1054,119,62],[1,1059,119,69,"e"],[1,1061,119,71,"message"],[1,1069,120,14,"e"],[1,1070,121,6],[1,1071,122,4],[1,1072,123,2],[1,1075,123,3],[1,1076,123,3,"key"],[1,1080,123,3],[1,1099,123,3,"value"],[1,1105,132,2],[1,1116,133,4],[1,1120,133,10,"stackIdx"],[1,1122,133,21,"this"],[1,1127,133,26,"_queueStack"],[1,1139,133,38,"length"],[1,1146,133,47],[1,1148,134,10,"queue"],[1,1150,134,18,"this"],[1,1155,134,23,"_queueStack"],[1,1167,134,35,"stackIdx"],[1,1170,135,4],[1,1177,136,6,"queue"],[1,1179,136,12,"popable"],[1,1188,137,29],[1,1192,137,6,"queue"],[1,1194,137,12,"tasks"],[1,1200,137,18,"length"],[1,1208,138,6,"this"],[1,1213,138,11,"_queueStack"],[1,1225,138,23,"length"],[1,1232,138,32],[1,1235,140,6,"this"],[1,1240,140,11,"_queueStack"],[1,1252,140,23,"pop"],[1,1258,146,13,"this"],[1,1263,146,18,"_getCurrentQueue"],[1,1283,148,13,"queue"],[1,1285,148,19,"tasks"],[1,1290,150,2],[1,1293,150,3],[1,1294,150,3,"key"],[1,1298,150,3],[1,1312,150,3,"value"],[1,1318,152,2],[1,1327,152,14,"task"],[1,1330,152,33],[1,1334,152,33,"_this2"],[1,1336,152,33,"this"],[1,1341,157,4,"this"],[1,1346,157,9,"_queueStack"],[1,1358,157,21,"push"],[1,1363,157,26],[1,1364,157,27,"tasks"],[1,1370,157,34],[1,1373,157,38,"popable"],[1,1382,157,47],[1,1386,158,4],[1,1390,158,10,"stackIdx"],[1,1392,158,21,"this"],[1,1397,158,26,"_queueStack"],[1,1409,158,38,"length"],[1,1416,158,47],[1,1418,159,10,"stackItem"],[1,1420,159,22,"this"],[1,1425,159,27,"_queueStack"],[1,1437,159,39,"stackIdx"],[1,1440,162,4,"task"],[1,1442,163,7,"gen"],[1,1448,164,7,"then"],[1,1454,164,12],[1,1465,170,8,"stackItem"],[1,1467,170,18,"popable"],[1,1476,170,28],[1,1478,171,8,"_this2"],[1,1480,171,13,"hasTasksToProcess"],[1,1501,171,36,"_this2"],[1,1503,171,41,"_onMoreTasks"],[1,1517,172,6],[1,1521,173,7,"catch"],[1,1528,173,13],[1,1537,173,13,"ex"],[1,1540,174,8,"setTimeout"],[1,1552,174,19],[1,1563,176,10],[1,1569,175,10,"ex"],[1,1571,175,13,"message"],[1,1579,175,23],[1,1625,175,69,"task"],[1,1627,175,74,"name"],[1,1636,175,83,"ex"],[1,1638,175,86,"message"],[1,1648,176,16,"ex"],[1,1649,177,8],[1,1652,177,11],[1,1654,178,6],[1,1657,179,2],[1,1661,179,3],[1,1663,44,15],[1,1666,182,0,"module"],[1,1668,182,7,"exports"],[1,1676,182,17,"TaskQueue"],[1,1677,182,27],[1,1681]],"functionMap":{"names":["<global>","TaskQueue","constructor","enqueue","enqueueTasks","tasks.forEach$argument_0","cancelTasks","_queueStack.map$argument_0","queue.tasks.filter$argument_0","_queueStack.map.filter$argument_0","hasTasksToProcess","processNext","_getCurrentQueue","_genPromise","task.gen.then$argument_0","task.gen.then._catch$argument_0","setTimeout$argument_0"],"mappings":"AAA;AC2C;ECQ;GDG;EEO;GFE;EGE;kBCC,0BD;GHC;EKE;WCG;kCCE,0CD;QDC;cGC,mDH;GLC;ESY;GTE;EUK;GV0B;EWS;GXkB;EYE;YCY;ODQ;aEC;mBCC;SDG;OFC;GZC;CDC"}},"type":"js/module"}]}