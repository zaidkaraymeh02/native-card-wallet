{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":350,"column":0,"index":10102}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":350,"column":0,"index":10102}}],"key":"EU+qeBIKi4KcIzPeK4PbkLqFqVY="}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":350,"column":0,"index":10102}}],"key":"ohGilxjVqjyE1GooDVDt9OYg9x0="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":350,"column":0,"index":10102}}],"key":"V6GYoXnblvuuGHJNMy7MHyaunsU="}},{"name":"./ListMetricsAggregator","data":{"asyncType":null,"locs":[{"start":{"line":15,"column":0,"index":293},"end":{"line":15,"column":60,"index":353}}],"key":"B6XNBZp4i+zmTikMWPAwbp+lOt8="}},{"name":"invariant","data":{"asyncType":null,"locs":[{"start":{"line":17,"column":18,"index":373},"end":{"line":17,"column":38,"index":393}}],"key":"Fzi/BpZws2YooIGJ9b6u0HJtuks="}}],"output":[{"data":{"code":"__d((function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=t(r(d[1])),s=t(r(d[2])),o=t(r(d[3])),l=(t(r(d[4])),(function(){return(0,o.default)((function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{viewAreaCoveragePercentThreshold:0};(0,s.default)(this,t),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=n}),[{key:\"dispose\",value:function(){this._timers.forEach(clearTimeout)}},{key:\"computeViewableItems\",value:function(t,n,s,o,l){var c=t.getItemCount(t.data),h=this._config,f=h.itemVisiblePercentThreshold,v=h.viewAreaCoveragePercentThreshold,_=null!=v,w=_?v:f;r(d[5])(null!=w&&null!=f!=(null!=v),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var I=[];if(0===c)return I;var b=-1,y=l||{first:0,last:c-1},p=y.first,M=y.last;if(M>=c)return console.warn('Invalid render range computing viewability '+JSON.stringify({renderRange:l,itemCount:c})),[];for(var C=p;C<=M;C++){var T=o.getCellMetrics(C,t);if(T){var k=Math.floor(T.offset-n),V=Math.floor(k+T.length);if(k<s&&V>0)b=C,u(_,w,k,V,s,T.length)&&I.push(C);else if(b>=0)break}}return I}},{key:\"onUpdate\",value:function(t,n,s,o,l,u,c){var h=this,f=t.getItemCount(t.data);if((!this._config.waitForInteraction||this._hasInteracted)&&0!==f&&o.getCellMetrics(0,t)){var v=[];if(f&&(v=this.computeViewableItems(t,n,s,o,c)),this._viewableIndices.length!==v.length||!this._viewableIndices.every((function(t,n){return t===v[n]})))if(this._viewableIndices=v,this._config.minimumViewTime){var _=setTimeout((function(){h._timers.delete(_),h._onUpdateSync(t,v,u,l)}),this._config.minimumViewTime);this._timers.add(_)}else this._onUpdateSync(t,v,u,l)}}},{key:\"resetViewableIndices\",value:function(){this._viewableIndices=[]}},{key:\"recordInteraction\",value:function(){this._hasInteracted=!0}},{key:\"_onUpdateSync\",value:function(t,s,o,l){var u=this;s=s.filter((function(t){return u._viewableIndices.includes(t)}));var c=this._viewableItems,h=new Map(s.map((function(n){var s=l(n,!0,t);return[s.key,s]}))),f=[];for(var v of h){var _=(0,n.default)(v,2),w=_[0],I=_[1];c.has(w)||f.push(I)}for(var b of c){var y=(0,n.default)(b,2),p=y[0],M=y[1];h.has(p)||f.push(Object.assign({},M,{isViewable:!1}))}f.length>0&&(this._viewableItems=h,o({viewableItems:Array.from(h.values()),changed:f,viewabilityConfig:this._config}))}}])})());function u(t,n,s,o,l,u){if(h(s,o,l))return!0;var f=c(s,o,l);return 100*(t?f/l:f/u)>=n}function c(t,n,s){var o=Math.min(n,s)-Math.max(t,0);return Math.max(0,o)}function h(t,n,s){return t>=0&&n<=s&&n>t}m.exports=l}));","lineCount":1,"map":[[1,29,11,0],[1,42,11,13],[1,46,11,13,"_interopRequireDefault"],[1,48,11,13,"r"],[1,50,11,13,"d"],[1,52,11,13],[1,56,11,13,"_slicedToArray2"],[1,58,11,13,"_interopRequireDefault"],[1,60,11,13,"r"],[1,62,11,13,"d"],[1,64,11,13],[1,69,11,13,"_classCallCheck2"],[1,71,11,13,"_interopRequireDefault"],[1,73,11,13,"r"],[1,75,11,13,"d"],[1,77,11,13],[1,82,11,13,"_createClass2"],[1,84,11,13,"_interopRequireDefault"],[1,86,11,13,"r"],[1,88,11,13,"d"],[1,90,11,13],[1,95,79,6,"ViewabilityHelper"],[1,98,15,0,"_interopRequireDefault"],[1,100,15,0,"r"],[1,102,15,0,"d"],[1,104,15,0],[1,110,79,23],[1,121,92,2],[1,130,92,2,"_createClass2"],[1,132,92,2,"default"],[1,142,86,2],[1,151,86,2,"ViewabilityHelper"],[1,155,88,4],[1,159,87,4,"config"],[1,161,87,29,"arguments"],[1,171,87,29,"length"],[1,178,87,29],[1,186,87,29,"undefined"],[1,190,87,29,"arguments"],[1,200,87,29],[1,203,87,29,"arguments"],[1,213,87,29],[1,216,87,32],[1,217,87,33,"viewAreaCoveragePercentThreshold"],[1,250,87,67],[1,254,87,69],[1,256,87,69,"_classCallCheck2"],[1,258,87,69,"default"],[1,267,87,69,"this"],[1,272,87,69,"ViewabilityHelper"],[1,275,87,69,"this"],[1,280,81,2,"_hasInteracted"],[1,296,81,28],[1,298,81,33,"this"],[1,303,82,2,"_timers"],[1,311,82,25],[1,315,82,29,"Set"],[1,319,82,34,"this"],[1,324,83,2,"_viewableIndices"],[1,341,83,36],[1,344,83,38,"this"],[1,349,84,2,"_viewableItems"],[1,364,84,43],[1,368,84,47,"Map"],[1,372,89,4,"this"],[1,377,89,9,"_config"],[1,385,89,19,"config"],[1,386,90,2],[1,389,92,2],[1,391,92,2,"key"],[1,395,92,2],[1,405,92,2,"value"],[1,411,95,2],[1,422,99,4,"this"],[1,427,99,9,"_timers"],[1,435,99,17,"forEach"],[1,443,99,25,"clearTimeout"],[1,456,100,2],[1,459,102,2],[1,460,102,2,"key"],[1,464,102,2],[1,487,102,2,"value"],[1,493,105,2],[1,502,106,4,"props"],[1,504,107,4,"scrollOffset"],[1,506,108,4,"viewportHeight"],[1,508,109,4,"listMetrics"],[1,510,111,4,"renderRange"],[1,513,117,4],[1,517,117,10,"itemCount"],[1,519,117,22,"props"],[1,521,117,28,"getItemCount"],[1,534,117,41,"props"],[1,536,117,47,"data"],[1,542,118,4,"_this$_config"],[1,544,119,6,"this"],[1,549,119,11,"_config"],[1,557,118,11,"itemVisiblePercentThreshold"],[1,559,118,38,"_this$_config"],[1,561,118,11,"itemVisiblePercentThreshold"],[1,589,118,40,"viewAreaCoveragePercentThreshold"],[1,591,118,72,"_this$_config"],[1,593,118,40,"viewAreaCoveragePercentThreshold"],[1,626,120,10,"viewAreaMode"],[1,628,120,61],[1,634,120,25,"viewAreaCoveragePercentThreshold"],[1,636,121,10,"viewablePercentThreshold"],[1,638,121,37,"viewAreaMode"],[1,640,122,8,"viewAreaCoveragePercentThreshold"],[1,642,123,8,"itemVisiblePercentThreshold"],[1,644,124,4,"r"],[1,646,124,4,"d"],[1,648,124,4],[1,651,124,4,"r"],[1,652,125,34],[1,658,125,6,"viewablePercentThreshold"],[1,661,126,40],[1,667,126,9,"itemVisiblePercentThreshold"],[1,671,127,47],[1,677,127,11,"viewAreaCoveragePercentThreshold"],[1,680,128,6],[1,771,130,4],[1,775,130,10,"viewableIndices"],[1,777,130,28],[1,780,131,4],[1,783,131,22],[1,787,131,8,"itemCount"],[1,789,132,6],[1,796,132,13,"viewableIndices"],[1,798,134,4],[1,802,134,8,"firstVisible"],[1,805,134,20],[1,807,135,4,"_ref"],[1,809,135,26,"renderRange"],[1,812,135,41],[1,813,135,42,"first"],[1,819,135,49],[1,821,135,52,"last"],[1,826,135,58,"itemCount"],[1,828,135,70],[1,831,135,11,"first"],[1,833,135,16,"_ref"],[1,835,135,11,"first"],[1,841,135,18,"last"],[1,843,135,22,"_ref"],[1,845,135,18,"last"],[1,850,136,4],[1,853,136,8,"last"],[1,856,136,16,"itemCount"],[1,858,141,6],[1,865,137,6,"console"],[1,873,137,14,"warn"],[1,878,138,8],[1,924,139,10,"JSON"],[1,929,139,15,"stringify"],[1,939,139,25],[1,940,139,26,"renderRange"],[1,954,139,39,"itemCount"],[1,969,141,13],[1,972,143,4],[1,976,143,9],[1,980,143,13,"idx"],[1,982,143,19,"first"],[1,984,143,26,"idx"],[1,987,143,33,"last"],[1,989,143,39,"idx"],[1,993,143,46],[1,994,144,6],[1,998,144,12,"metrics"],[1,1000,144,22,"listMetrics"],[1,1002,144,34,"getCellMetrics"],[1,1017,144,49,"idx"],[1,1019,144,54,"props"],[1,1022,145,6],[1,1025,145,11,"metrics"],[1,1027,145,6],[1,1028,148,6],[1,1032,148,12,"top"],[1,1034,148,18,"Math"],[1,1039,148,23,"floor"],[1,1045,148,29,"metrics"],[1,1047,148,37,"offset"],[1,1054,148,46,"scrollOffset"],[1,1057,149,12,"bottom"],[1,1059,149,21,"Math"],[1,1064,149,26,"floor"],[1,1070,149,32,"top"],[1,1072,149,38,"metrics"],[1,1074,149,46,"length"],[1,1082,151,6],[1,1085,151,10,"top"],[1,1087,151,16,"viewportHeight"],[1,1090,151,34,"bottom"],[1,1092,151,43],[1,1094,152,8,"firstVisible"],[1,1096,152,23,"idx"],[1,1098,154,10,"_isViewable"],[1,1100,155,12,"viewAreaMode"],[1,1102,156,12,"viewablePercentThreshold"],[1,1104,157,12,"top"],[1,1106,158,12,"bottom"],[1,1108,159,12,"viewportHeight"],[1,1110,160,12,"metrics"],[1,1112,160,20,"length"],[1,1121,163,10,"viewableIndices"],[1,1123,163,26,"push"],[1,1128,163,31,"idx"],[1,1136,165,13],[1,1139,165,17,"firstVisible"],[1,1142,165,33],[1,1144,166,8],[1,1149,147,6],[1,1150,168,4],[1,1151,169,4],[1,1158,169,11,"viewableIndices"],[1,1159,170,2],[1,1162,172,2],[1,1163,172,2,"key"],[1,1167,172,2],[1,1178,172,2,"value"],[1,1184,176,2],[1,1193,177,4,"props"],[1,1195,178,4,"scrollOffset"],[1,1197,179,4,"viewportHeight"],[1,1199,180,4,"listMetrics"],[1,1201,181,4,"createViewToken"],[1,1203,186,4,"onViewableItemsChanged"],[1,1205,192,4,"renderRange"],[1,1208,197,10],[1,1212,197,10,"_this"],[1,1214,197,10,"this"],[1,1219,198,10,"itemCount"],[1,1221,198,22,"props"],[1,1223,198,28,"getItemCount"],[1,1236,198,41,"props"],[1,1238,198,47,"data"],[1,1244,199,4],[1,1249,200,7,"this"],[1,1254,200,12,"_config"],[1,1262,200,20,"waitForInteraction"],[1,1282,200,43,"this"],[1,1287,200,48,"_hasInteracted"],[1,1304,201,20],[1,1308,201,6,"itemCount"],[1,1311,202,7,"listMetrics"],[1,1313,202,19,"getCellMetrics"],[1,1328,202,34],[1,1330,202,37,"props"],[1,1333,199,4],[1,1334,206,4],[1,1338,206,8,"viewableIndices"],[1,1340,206,41],[1,1343,216,4],[1,1346,207,8,"itemCount"],[1,1350,208,6,"viewableIndices"],[1,1352,208,24,"this"],[1,1357,208,29,"computeViewableItems"],[1,1378,209,8,"props"],[1,1380,210,8,"scrollOffset"],[1,1382,211,8,"viewportHeight"],[1,1384,212,8,"listMetrics"],[1,1386,213,8,"renderRange"],[1,1390,217,6,"this"],[1,1395,217,11,"_viewableIndices"],[1,1412,217,28,"length"],[1,1421,217,39,"viewableIndices"],[1,1423,217,55,"length"],[1,1432,218,6,"this"],[1,1437,218,11,"_viewableIndices"],[1,1454,218,28,"every"],[1,1461,218,34],[1,1470,218,35,"v"],[1,1472,218,38,"ii"],[1,1475,218,40],[1,1482,218,45,"v"],[1,1486,218,51,"viewableIndices"],[1,1488,218,67,"ii"],[1,1490,218,70],[1,1494,225,4],[1,1497,224,4,"this"],[1,1502,224,9,"_viewableIndices"],[1,1519,224,28,"viewableIndices"],[1,1521,225,8,"this"],[1,1526,225,13,"_config"],[1,1534,225,21,"minimumViewTime"],[1,1550,225,38],[1,1551,226,6],[1,1555,226,12,"handle"],[1,1557,226,32,"setTimeout"],[1,1569,226,43],[1,1580,230,8,"_this"],[1,1582,230,13,"_timers"],[1,1590,230,21,"delete"],[1,1597,230,28,"handle"],[1,1600,231,8,"_this"],[1,1602,231,13,"_onUpdateSync"],[1,1616,232,10,"props"],[1,1618,233,10,"viewableIndices"],[1,1620,234,10,"onViewableItemsChanged"],[1,1622,235,10,"createViewToken"],[1,1624,237,6],[1,1627,237,9,"this"],[1,1632,237,14,"_config"],[1,1640,237,22,"minimumViewTime"],[1,1657,241,6,"this"],[1,1662,241,11,"_timers"],[1,1670,241,19,"add"],[1,1674,241,23,"handle"],[1,1676,242,4],[1,1682,243,6,"this"],[1,1687,243,11,"_onUpdateSync"],[1,1701,244,8,"props"],[1,1703,245,8,"viewableIndices"],[1,1705,246,8,"onViewableItemsChanged"],[1,1707,247,8,"createViewToken"],[1,1709,205,4],[1,1710,250,2],[1,1713,252,2],[1,1714,252,2,"key"],[1,1718,252,2],[1,1741,252,2,"value"],[1,1747,255,2],[1,1758,256,4,"this"],[1,1763,256,9,"_viewableIndices"],[1,1780,256,28],[1,1782,257,2],[1,1785,259,2],[1,1786,259,2,"key"],[1,1790,259,2],[1,1810,259,2,"value"],[1,1816,262,2],[1,1827,263,4,"this"],[1,1832,263,9,"_hasInteracted"],[1,1848,263,26],[1,1849,264,2],[1,1852,264,3],[1,1853,264,3,"key"],[1,1857,264,3],[1,1873,264,3,"value"],[1,1879,266,2],[1,1888,267,4,"props"],[1,1890,268,4,"viewableIndicesToCheck"],[1,1892,269,4,"onViewableItemsChanged"],[1,1894,274,4,"createViewToken"],[1,1897,279,4],[1,1901,279,4,"_this2"],[1,1903,279,4,"this"],[1,1908,281,4,"viewableIndicesToCheck"],[1,1910,281,29,"viewableIndicesToCheck"],[1,1912,281,52,"filter"],[1,1920,281,59],[1,1929,281,59,"ii"],[1,1932,281,61],[1,1939,282,6,"_this2"],[1,1941,282,11,"_viewableIndices"],[1,1958,282,28,"includes"],[1,1967,282,37,"ii"],[1,1969,282,40],[1,1973,284,4],[1,1977,284,10,"prevItems"],[1,1979,284,22,"this"],[1,1984,284,27,"_viewableItems"],[1,1999,285,10,"nextItems"],[1,2001,285,22],[1,2005,285,26,"Map"],[1,2009,286,6,"viewableIndicesToCheck"],[1,2011,286,29,"map"],[1,2016,286,33],[1,2025,286,33,"ii"],[1,2028,287,8],[1,2032,287,14,"viewable"],[1,2034,287,25,"createViewToken"],[1,2036,287,41,"ii"],[1,2039,287,45],[1,2041,287,51,"props"],[1,2044,288,8],[1,2050,288,15],[1,2051,288,16,"viewable"],[1,2053,288,25,"key"],[1,2057,288,30,"viewable"],[1,2059,289,6],[1,2064,292,10,"changed"],[1,2066,292,20],[1,2069,293,4],[1,2077,293,4,"_ref2"],[1,2082,293,34,"nextItems"],[1,2084,293,45],[1,2089,293,45,"_ref3"],[1,2092,293,45],[1,2094,293,45,"_slicedToArray2"],[1,2096,293,45,"default"],[1,2105,293,45,"_ref2"],[1,2107,293,45],[1,2110,293,16,"key"],[1,2112,293,19,"_ref3"],[1,2114,293,19],[1,2117,293,21,"viewable"],[1,2119,293,29,"_ref3"],[1,2121,293,29],[1,2124,294,11,"prevItems"],[1,2126,294,21,"has"],[1,2130,294,25,"key"],[1,2134,295,8,"changed"],[1,2136,295,16,"push"],[1,2141,295,21,"viewable"],[1,2143,297,4],[1,2144,298,4],[1,2152,298,4,"_ref4"],[1,2157,298,34,"prevItems"],[1,2159,298,45],[1,2164,298,45,"_ref5"],[1,2167,298,45],[1,2169,298,45,"_slicedToArray2"],[1,2171,298,45,"default"],[1,2180,298,45,"_ref4"],[1,2182,298,45],[1,2185,298,16,"key"],[1,2187,298,19,"_ref5"],[1,2189,298,19],[1,2192,298,21,"viewable"],[1,2194,298,29,"_ref5"],[1,2196,298,29],[1,2199,299,11,"nextItems"],[1,2201,299,21,"has"],[1,2205,299,25,"key"],[1,2209,300,8,"changed"],[1,2211,300,16,"push"],[1,2216,300,20,"Object"],[1,2223,300,20,"assign"],[1,2230,300,20],[1,2233,300,25,"viewable"],[1,2235,300,33],[1,2236,300,35,"isViewable"],[1,2248,300,47],[1,2252,302,4],[1,2253,303,8,"changed"],[1,2255,303,16,"length"],[1,2262,303,25],[1,2266,304,6,"this"],[1,2271,304,11,"_viewableItems"],[1,2286,304,28,"nextItems"],[1,2288,305,6,"onViewableItemsChanged"],[1,2290,305,29],[1,2291,306,8,"viewableItems"],[1,2305,306,23,"Array"],[1,2311,306,29,"from"],[1,2316,306,34,"nextItems"],[1,2318,306,44,"values"],[1,2328,307,8,"changed"],[1,2338,308,8,"viewabilityConfig"],[1,2356,308,27,"this"],[1,2361,308,32,"_config"],[1,2371,311,2],[1,2375,311,3],[1,2377,79,23],[1,2381,314,0],[1,2390,314,9,"_isViewable"],[1,2392,315,2,"viewAreaMode"],[1,2394,316,2,"viewablePercentThreshold"],[1,2396,317,2,"top"],[1,2398,318,2,"bottom"],[1,2400,319,2,"viewportHeight"],[1,2402,320,2,"itemLength"],[1,2405,322,2],[1,2408,322,6,"_isEntirelyVisible"],[1,2410,322,25,"top"],[1,2412,322,30,"bottom"],[1,2414,322,38,"viewportHeight"],[1,2417,323,4],[1,2424,323,11],[1,2426,325,4],[1,2430,325,10,"pixels"],[1,2432,325,19,"_getPixelsVisible"],[1,2434,325,37,"top"],[1,2436,325,42,"bottom"],[1,2438,325,50,"viewportHeight"],[1,2441,328,4],[1,2448,327,6],[1,2453,327,13,"viewAreaMode"],[1,2455,327,28,"pixels"],[1,2457,327,37,"viewportHeight"],[1,2459,327,54,"pixels"],[1,2461,327,63,"itemLength"],[1,2465,328,22,"viewablePercentThreshold"],[1,2466,330,0],[1,2467,332,0],[1,2476,332,9,"_getPixelsVisible"],[1,2478,333,2,"top"],[1,2480,334,2,"bottom"],[1,2482,335,2,"viewportHeight"],[1,2485,337,2],[1,2489,337,8,"visibleHeight"],[1,2491,337,24,"Math"],[1,2496,337,29,"min"],[1,2500,337,33,"bottom"],[1,2502,337,41,"viewportHeight"],[1,2505,337,59,"Math"],[1,2510,337,64,"max"],[1,2514,337,68,"top"],[1,2516,337,73],[1,2519,338,2],[1,2526,338,9,"Math"],[1,2531,338,14,"max"],[1,2535,338,18],[1,2537,338,21,"visibleHeight"],[1,2539,339,0],[1,2540,341,0],[1,2549,341,9,"_isEntirelyVisible"],[1,2551,342,2,"top"],[1,2553,343,2,"bottom"],[1,2555,344,2,"viewportHeight"],[1,2558,346,2],[1,2565,346,9,"top"],[1,2568,346,16],[1,2571,346,21,"bottom"],[1,2574,346,31,"viewportHeight"],[1,2577,346,49,"bottom"],[1,2579,346,58,"top"],[1,2580,347,0],[1,2581,349,0,"module"],[1,2583,349,7,"exports"],[1,2591,349,17,"ViewabilityHelper"],[1,2592,349,35],[1,2596]],"functionMap":{"names":["<global>","ViewabilityHelper","constructor","dispose","computeViewableItems","onUpdate","_viewableIndices.every$argument_0","setTimeout$argument_0","resetViewableIndices","recordInteraction","_onUpdateSync","viewableIndicesToCheck.filter$argument_0","viewableIndicesToCheck.map$argument_0","_isViewable","_getPixelsVisible","_isEntirelyVisible"],"mappings":"AAA;AC8E;ECO;GDI;EEK;GFK;EGK;GHiE;EIM;kCC0C,oCD;2CEQ;OFW;GJa;EOK;GPE;EQK;GRE;ESE;2DCe;wCDC;iCEI;OFG;GTsB;CDC;AaE;CbgB;AcE;CdO;AeE;CfM"}},"type":"js/module"}]}