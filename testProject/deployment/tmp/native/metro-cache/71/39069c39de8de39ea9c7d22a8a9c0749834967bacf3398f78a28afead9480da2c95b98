{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":100,"column":0,"index":2801}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/defineProperty","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":100,"column":0,"index":2801}}],"key":"RY2z4+Bdq4bpTD/1b+1jGPWZdgA="}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":89},"end":{"line":5,"column":31,"index":120}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"./NavigationBuilderContext","data":{"asyncType":null,"locs":[{"start":{"line":7,"column":0,"index":122},"end":{"line":9,"column":36,"index":222}}],"key":"y9eQQdj9MvCs7akL60igi3d/dsI="}},{"name":"./NavigationRouteContext","data":{"asyncType":null,"locs":[{"start":{"line":10,"column":0,"index":223},"end":{"line":10,"column":62,"index":285}}],"key":"HeyVDSY+CsJeYUdsxrU2U3K5dPs="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useOnPreventRemove;\n  exports.shouldPreventRemove = void 0;\n  var _defineProperty2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/defineProperty\"));\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[2], \"react\"));\n  var _NavigationBuilderContext = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"./NavigationBuilderContext\"));\n  var _NavigationRouteContext = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"./NavigationRouteContext\"));\n  function _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\n  function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\n  var VISITED_ROUTE_KEYS = Symbol('VISITED_ROUTE_KEYS');\n  var shouldPreventRemove = exports.shouldPreventRemove = function shouldPreventRemove(emitter, beforeRemoveListeners, currentRoutes, nextRoutes, action) {\n    var _action$VISITED_ROUTE;\n    var nextRouteKeys = nextRoutes.map(function (route) {\n      return route.key;\n    });\n\n    // Call these in reverse order so last screens handle the event first\n    var removedRoutes = currentRoutes.filter(function (route) {\n      return !nextRouteKeys.includes(route.key);\n    }).reverse();\n    var visitedRouteKeys = // @ts-expect-error: add this property to mark that we've already emitted this action\n    (_action$VISITED_ROUTE = action[VISITED_ROUTE_KEYS]) != null ? _action$VISITED_ROUTE : new Set();\n    var beforeRemoveAction = Object.assign({}, action, (0, _defineProperty2.default)({}, VISITED_ROUTE_KEYS, visitedRouteKeys));\n    for (var route of removedRoutes) {\n      var _beforeRemoveListener;\n      if (visitedRouteKeys.has(route.key)) {\n        // Skip if we've already emitted this action for this screen\n        continue;\n      }\n\n      // First, we need to check if any child screens want to prevent it\n      var isPrevented = (_beforeRemoveListener = beforeRemoveListeners[route.key]) == null ? void 0 : _beforeRemoveListener.call(beforeRemoveListeners, beforeRemoveAction);\n      if (isPrevented) {\n        return true;\n      }\n      visitedRouteKeys.add(route.key);\n      var event = emitter.emit({\n        type: 'beforeRemove',\n        target: route.key,\n        data: {\n          action: beforeRemoveAction\n        },\n        canPreventDefault: true\n      });\n      if (event.defaultPrevented) {\n        return true;\n      }\n    }\n    return false;\n  };\n  function useOnPreventRemove(_ref) {\n    var getState = _ref.getState,\n      emitter = _ref.emitter,\n      beforeRemoveListeners = _ref.beforeRemoveListeners;\n    var _React$useContext = React.useContext(_NavigationBuilderContext.default),\n      addKeyedListener = _React$useContext.addKeyedListener;\n    var route = React.useContext(_NavigationRouteContext.default);\n    var routeKey = route == null ? void 0 : route.key;\n    React.useEffect(function () {\n      if (routeKey) {\n        return addKeyedListener == null ? void 0 : addKeyedListener('beforeRemove', routeKey, function (action) {\n          var state = getState();\n          return shouldPreventRemove(emitter, beforeRemoveListeners, state.routes, [], action);\n        });\n      }\n    }, [addKeyedListener, beforeRemoveListeners, emitter, getState, routeKey]);\n  }\n});","lineCount":72,"map":[[9,2,5,0],[9,6,5,0,"React"],[9,11,5,0],[9,14,5,0,"_interopRequireWildcard"],[9,37,5,0],[9,38,5,0,"_$$_REQUIRE"],[9,49,5,0],[9,50,5,0,"_dependencyMap"],[9,64,5,0],[10,2,7,0],[10,6,7,0,"_NavigationBuilderContext"],[10,31,7,0],[10,34,7,0,"_interopRequireDefault"],[10,56,7,0],[10,57,7,0,"_$$_REQUIRE"],[10,68,7,0],[10,69,7,0,"_dependencyMap"],[10,83,7,0],[11,2,10,0],[11,6,10,0,"_NavigationRouteContext"],[11,29,10,0],[11,32,10,0,"_interopRequireDefault"],[11,54,10,0],[11,55,10,0,"_$$_REQUIRE"],[11,66,10,0],[11,67,10,0,"_dependencyMap"],[11,81,10,0],[12,2,10,62],[12,11,10,62,"_getRequireWildcardCache"],[12,36,10,62,"e"],[12,37,10,62],[12,66,10,62,"WeakMap"],[12,73,10,62],[12,92,10,62,"r"],[12,93,10,62],[12,100,10,62,"WeakMap"],[12,107,10,62],[12,111,10,62,"t"],[12,112,10,62],[12,119,10,62,"WeakMap"],[12,126,10,62],[12,138,10,62,"_getRequireWildcardCache"],[12,162,10,62],[12,174,10,62,"_getRequireWildcardCache"],[12,199,10,62,"e"],[12,200,10,62],[12,211,10,62,"e"],[12,212,10,62],[12,215,10,62,"t"],[12,216,10,62],[12,219,10,62,"r"],[12,220,10,62],[12,225,10,62,"e"],[12,226,10,62],[13,2,10,62],[13,11,10,62,"_interopRequireWildcard"],[13,35,10,62,"e"],[13,36,10,62],[13,38,10,62,"r"],[13,39,10,62],[13,48,10,62,"r"],[13,49,10,62],[13,53,10,62,"e"],[13,54,10,62],[13,58,10,62,"e"],[13,59,10,62],[13,60,10,62,"__esModule"],[13,70,10,62],[13,79,10,62,"e"],[13,80,10,62],[13,95,10,62,"e"],[13,96,10,62],[13,119,10,62,"e"],[13,120,10,62],[13,145,10,62,"e"],[13,146,10,62],[13,157,10,62,"default"],[13,164,10,62],[13,166,10,62,"e"],[13,167,10,62],[13,175,10,62,"t"],[13,176,10,62],[13,179,10,62,"_getRequireWildcardCache"],[13,203,10,62],[13,204,10,62,"r"],[13,205,10,62],[13,212,10,62,"t"],[13,213,10,62],[13,217,10,62,"t"],[13,218,10,62],[13,219,10,62,"has"],[13,222,10,62],[13,223,10,62,"e"],[13,224,10,62],[13,234,10,62,"t"],[13,235,10,62],[13,236,10,62,"get"],[13,239,10,62],[13,240,10,62,"e"],[13,241,10,62],[13,248,10,62,"n"],[13,249,10,62],[13,254,10,62,"__proto__"],[13,263,10,62],[13,273,10,62,"a"],[13,274,10,62],[13,277,10,62,"Object"],[13,283,10,62],[13,284,10,62,"defineProperty"],[13,298,10,62],[13,302,10,62,"Object"],[13,308,10,62],[13,309,10,62,"getOwnPropertyDescriptor"],[13,333,10,62],[13,344,10,62,"u"],[13,345,10,62],[13,349,10,62,"e"],[13,350,10,62],[13,370,10,62,"u"],[13,371,10,62],[13,378,10,62,"hasOwnProperty"],[13,392,10,62],[13,393,10,62,"call"],[13,397,10,62],[13,398,10,62,"e"],[13,399,10,62],[13,401,10,62,"u"],[13,402,10,62],[13,411,10,62,"i"],[13,412,10,62],[13,415,10,62,"a"],[13,416,10,62],[13,419,10,62,"Object"],[13,425,10,62],[13,426,10,62,"getOwnPropertyDescriptor"],[13,450,10,62],[13,451,10,62,"e"],[13,452,10,62],[13,454,10,62,"u"],[13,455,10,62],[13,465,10,62,"i"],[13,466,10,62],[13,471,10,62,"i"],[13,472,10,62],[13,473,10,62,"get"],[13,476,10,62],[13,480,10,62,"i"],[13,481,10,62],[13,482,10,62,"set"],[13,485,10,62],[13,489,10,62,"Object"],[13,495,10,62],[13,496,10,62,"defineProperty"],[13,510,10,62],[13,511,10,62,"n"],[13,512,10,62],[13,514,10,62,"u"],[13,515,10,62],[13,517,10,62,"i"],[13,518,10,62],[13,522,10,62,"n"],[13,523,10,62],[13,524,10,62,"u"],[13,525,10,62],[13,529,10,62,"e"],[13,530,10,62],[13,531,10,62,"u"],[13,532,10,62],[13,544,10,62,"n"],[13,545,10,62],[13,546,10,62,"default"],[13,553,10,62],[13,556,10,62,"e"],[13,557,10,62],[13,559,10,62,"t"],[13,560,10,62],[13,564,10,62,"t"],[13,565,10,62],[13,566,10,62,"set"],[13,569,10,62],[13,570,10,62,"e"],[13,571,10,62],[13,573,10,62,"n"],[13,574,10,62],[13,577,10,62,"n"],[13,578,10,62],[14,2,20,0],[14,6,20,6,"VISITED_ROUTE_KEYS"],[14,24,20,24],[14,27,20,27,"Symbol"],[14,33,20,33],[14,34,20,34],[14,54,20,54],[14,55,20,55],[15,2,22,7],[15,6,22,13,"shouldPreventRemove"],[15,25,22,32],[15,28,22,32,"exports"],[15,35,22,32],[15,36,22,32,"shouldPreventRemove"],[15,55,22,32],[15,58,22,35],[15,67,22,13,"shouldPreventRemove"],[15,86,22,32,"shouldPreventRemove"],[15,87,23,2,"emitter"],[15,94,23,52],[15,96,24,2,"beforeRemoveListeners"],[15,117,24,78],[15,119,25,2,"currentRoutes"],[15,132,25,34],[15,134,26,2,"nextRoutes"],[15,144,26,44],[15,146,27,2,"action"],[15,152,27,26],[15,154,28,5],[16,4,28,5],[16,8,28,5,"_action$VISITED_ROUTE"],[16,29,28,5],[17,4,29,2],[17,8,29,8,"nextRouteKeys"],[17,21,29,21],[17,24,29,24,"nextRoutes"],[17,34,29,34],[17,35,29,35,"map"],[17,38,29,38],[17,39,29,39],[17,49,29,40,"route"],[17,54,29,45],[18,6,29,45],[18,13,29,50,"route"],[18,18,29,55],[18,19,29,56,"key"],[18,22,29,59],[19,4,29,59],[19,6,29,60],[21,4,31,2],[22,4,32,2],[22,8,32,8,"removedRoutes"],[22,21,32,21],[22,24,32,24,"currentRoutes"],[22,37,32,37],[22,38,33,5,"filter"],[22,44,33,11],[22,45,33,12],[22,55,33,13,"route"],[22,60,33,18],[23,6,33,18],[23,13,33,23],[23,14,33,24,"nextRouteKeys"],[23,27,33,37],[23,28,33,38,"includes"],[23,36,33,46],[23,37,33,47,"route"],[23,42,33,52],[23,43,33,53,"key"],[23,46,33,56],[23,47,33,57],[24,4,33,57],[24,6,33,58],[24,7,34,5,"reverse"],[24,14,34,12],[24,15,34,13],[24,16,34,14],[25,4,36,2],[25,8,36,8,"visitedRouteKeys"],[25,24,36,37],[25,27,37,4],[26,4,37,4],[26,5,37,4,"_action$VISITED_ROUTE"],[26,26,37,4],[26,29,38,4,"action"],[26,35,38,10],[26,36,38,11,"VISITED_ROUTE_KEYS"],[26,54,38,29],[26,55,38,30],[26,67,38,30,"_action$VISITED_ROUTE"],[26,88,38,30],[26,91,38,34],[26,95,38,38,"Set"],[26,98,38,41],[26,99,38,50],[26,100,38,51],[27,4,40,2],[27,8,40,8,"beforeRemoveAction"],[27,26,40,26],[27,29,40,26,"Object"],[27,35,40,26],[27,36,40,26,"assign"],[27,42,40,26],[27,47,41,7,"action"],[27,53,41,13],[27,59,41,13,"_defineProperty2"],[27,75,41,13],[27,76,41,13,"default"],[27,83,41,13],[27,89,42,5,"VISITED_ROUTE_KEYS"],[27,107,42,23],[27,109,42,26,"visitedRouteKeys"],[27,125,42,42],[27,127,43,3],[28,4,45,2],[28,9,45,7],[28,13,45,13,"route"],[28,18,45,18],[28,22,45,22,"removedRoutes"],[28,35,45,35],[28,37,45,37],[29,6,45,37],[29,10,45,37,"_beforeRemoveListener"],[29,31,45,37],[30,6,46,4],[30,10,46,8,"visitedRouteKeys"],[30,26,46,24],[30,27,46,25,"has"],[30,30,46,28],[30,31,46,29,"route"],[30,36,46,34],[30,37,46,35,"key"],[30,40,46,38],[30,41,46,39],[30,43,46,41],[31,8,47,6],[32,8,48,6],[33,6,49,4],[35,6,51,4],[36,6,52,4],[36,10,52,10,"isPrevented"],[36,21,52,21],[36,25,52,21,"_beforeRemoveListener"],[36,46,52,21],[36,49,52,24,"beforeRemoveListeners"],[36,70,52,45],[36,71,52,46,"route"],[36,76,52,51],[36,77,52,52,"key"],[36,80,52,55],[36,81,52,56],[36,102,52,24,"_beforeRemoveListener"],[36,123,52,24],[36,124,52,24,"call"],[36,128,52,24],[36,129,52,24,"beforeRemoveListeners"],[36,150,52,45],[36,152,52,59,"beforeRemoveAction"],[36,170,52,77],[36,171,52,78],[37,6,54,4],[37,10,54,8,"isPrevented"],[37,21,54,19],[37,23,54,21],[38,8,55,6],[38,15,55,13],[38,19,55,17],[39,6,56,4],[40,6,58,4,"visitedRouteKeys"],[40,22,58,20],[40,23,58,21,"add"],[40,26,58,24],[40,27,58,25,"route"],[40,32,58,30],[40,33,58,31,"key"],[40,36,58,34],[40,37,58,35],[41,6,60,4],[41,10,60,10,"event"],[41,15,60,15],[41,18,60,18,"emitter"],[41,25,60,25],[41,26,60,26,"emit"],[41,30,60,30],[41,31,60,31],[42,8,61,6,"type"],[42,12,61,10],[42,14,61,12],[42,28,61,26],[43,8,62,6,"target"],[43,14,62,12],[43,16,62,14,"route"],[43,21,62,19],[43,22,62,20,"key"],[43,25,62,23],[44,8,63,6,"data"],[44,12,63,10],[44,14,63,12],[45,10,63,14,"action"],[45,16,63,20],[45,18,63,22,"beforeRemoveAction"],[46,8,63,41],[46,9,63,42],[47,8,64,6,"canPreventDefault"],[47,25,64,23],[47,27,64,25],[48,6,65,4],[48,7,65,5],[48,8,65,6],[49,6,67,4],[49,10,67,8,"event"],[49,15,67,13],[49,16,67,14,"defaultPrevented"],[49,32,67,30],[49,34,67,32],[50,8,68,6],[50,15,68,13],[50,19,68,17],[51,6,69,4],[52,4,70,2],[53,4,72,2],[53,11,72,9],[53,16,72,14],[54,2,73,0],[54,3,73,1],[55,2,75,15],[55,11,75,24,"useOnPreventRemove"],[55,29,75,42,"useOnPreventRemove"],[55,30,75,42,"_ref"],[55,34,75,42],[55,36,79,12],[56,4,79,12],[56,8,76,2,"getState"],[56,16,76,10],[56,19,76,10,"_ref"],[56,23,76,10],[56,24,76,2,"getState"],[56,32,76,10],[57,6,77,2,"emitter"],[57,13,77,9],[57,16,77,9,"_ref"],[57,20,77,9],[57,21,77,2,"emitter"],[57,28,77,9],[58,6,78,2,"beforeRemoveListeners"],[58,27,78,23],[58,30,78,23,"_ref"],[58,34,78,23],[58,35,78,2,"beforeRemoveListeners"],[58,56,78,23],[59,4,80,2],[59,8,80,2,"_React$useContext"],[59,25,80,2],[59,28,80,31,"React"],[59,33,80,36],[59,34,80,37,"useContext"],[59,44,80,47],[59,45,80,48,"NavigationBuilderContext"],[59,78,80,72],[59,79,80,73],[60,6,80,10,"addKeyedListener"],[60,22,80,26],[60,25,80,26,"_React$useContext"],[60,42,80,26],[60,43,80,10,"addKeyedListener"],[60,59,80,26],[61,4,81,2],[61,8,81,8,"route"],[61,13,81,13],[61,16,81,16,"React"],[61,21,81,21],[61,22,81,22,"useContext"],[61,32,81,32],[61,33,81,33,"NavigationRouteContext"],[61,64,81,55],[61,65,81,56],[62,4,82,2],[62,8,82,8,"routeKey"],[62,16,82,16],[62,19,82,19,"route"],[62,24,82,24],[62,44,82,19,"route"],[62,49,82,24],[62,50,82,26,"key"],[62,53,82,29],[63,4,84,2,"React"],[63,9,84,7],[63,10,84,8,"useEffect"],[63,19,84,17],[63,20,84,18],[63,32,84,24],[64,6,85,4],[64,10,85,8,"routeKey"],[64,18,85,16],[64,20,85,18],[65,8,86,6],[65,15,86,13,"addKeyedListener"],[65,31,86,29],[65,51,86,13,"addKeyedListener"],[65,67,86,29],[65,68,86,32],[65,82,86,46],[65,84,86,48,"routeKey"],[65,92,86,56],[65,94,86,58],[65,104,86,59,"action"],[65,110,86,65],[65,112,86,70],[66,10,87,8],[66,14,87,14,"state"],[66,19,87,19],[66,22,87,22,"getState"],[66,30,87,30],[66,31,87,31],[66,32,87,32],[67,10,89,8],[67,17,89,15,"shouldPreventRemove"],[67,36,89,34],[67,37,90,10,"emitter"],[67,44,90,17],[67,46,91,10,"beforeRemoveListeners"],[67,67,91,31],[67,69,92,10,"state"],[67,74,92,15],[67,75,92,16,"routes"],[67,81,92,22],[67,83,93,10],[67,85,93,12],[67,87,94,10,"action"],[67,93,95,8],[67,94,95,9],[68,8,96,6],[68,9,96,7],[68,10,96,8],[69,6,97,4],[70,4,98,2],[70,5,98,3],[70,7,98,5],[70,8,98,6,"addKeyedListener"],[70,24,98,22],[70,26,98,24,"beforeRemoveListeners"],[70,47,98,45],[70,49,98,47,"emitter"],[70,56,98,54],[70,58,98,56,"getState"],[70,66,98,64],[70,68,98,66,"routeKey"],[70,76,98,74],[70,77,98,75],[70,78,98,76],[71,2,99,0],[72,0,99,1],[72,3]],"functionMap":{"names":["<global>","shouldPreventRemove","nextRoutes.map$argument_0","currentRoutes.filter$argument_0","useOnPreventRemove","React.useEffect$argument_0","addKeyedListener$argument_2"],"mappings":"AAA;mCCqB;uCCO,oBD;YEI,6CF;CDwC;eIE;kBCS;0DCE;ODU;GDE;CJC"}},"type":"js/module"}]}