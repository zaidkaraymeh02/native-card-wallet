import*as e from"react";import{useLayoutEffect as t,useEffect as n,useRef as r,useState as o,createElement as i,useCallback as u}from"react";import*as c from"react-dom";function l(){return"undefined"!=typeof window}function s(e){return d(e)?(e.nodeName||"").toLowerCase():"#document"}function a(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function f(e){var t;return null==(t=(d(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function d(e){return!!l()&&(e instanceof Node||e instanceof a(e).Node)}function m(e){return!!l()&&(e instanceof Element||e instanceof a(e).Element)}function p(e){return!!l()&&(e instanceof HTMLElement||e instanceof a(e).HTMLElement)}function v(e){return!(!l()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof a(e).ShadowRoot)}function g(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=R(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function h(e){return["table","td","th"].includes(s(e))}function y(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function b(e){const t=w(),n=m(e)?R(e):e;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function w(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function x(e){return["html","body","#document"].includes(s(e))}function R(e){return a(e).getComputedStyle(e)}function E(e){return m(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function k(e){if("html"===s(e))return e;const t=e.assignedSlot||e.parentNode||v(e)&&e.host||f(e);return v(t)?t.host:t}function I(e){const t=k(e);return x(t)?e.ownerDocument?e.ownerDocument.body:e.body:p(t)&&g(t)?t:I(t)}function S(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const o=I(e),i=o===(null==(r=e.ownerDocument)?void 0:r.body),u=a(o);if(i){const e=function(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}(u);return t.concat(u,u.visualViewport||[],g(o)?o:[],e&&n?S(e):[])}return t.concat(o,S(o,[],n))}function L(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement);){var n;t=t.shadowRoot.activeElement}return t}function T(e,t){if(!e||!t)return!1;const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&v(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function C(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function M(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:n}=e;return t+"/"+n})).join(" "):navigator.userAgent}function A(e){return!(0!==e.mozInputSource||!e.isTrusted)||(D()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function O(e){return!M().includes("jsdom/")&&(!D()&&0===e.width&&0===e.height||D()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}function P(){return/apple/i.test(navigator.vendor)}function D(){const e=/android/i;return e.test(C())||e.test(M())}function N(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function F(e){return(null==e?void 0:e.ownerDocument)||document}function K(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}function W(e){return"composedPath"in e?e.composedPath()[0]:e.target}function j(e){return p(e)&&e.matches("input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])")}function B(e){e.preventDefault(),e.stopPropagation()}function H(e){return!!e&&("combobox"===e.getAttribute("role")&&j(e))}const _=Math.min,q=Math.max,V=Math.round,U=Math.floor,z=e=>({x:e,y:e}),X={left:"right",right:"left",bottom:"top",top:"bottom"},Y={start:"end",end:"start"};function $(e,t){return"function"==typeof e?e(t):e}function G(e){return e.split("-")[0]}function J(e){return e.split("-")[1]}function Q(e){return"x"===e?"y":"x"}function Z(e){return"y"===e?"height":"width"}function ee(e){return["top","bottom"].includes(G(e))?"y":"x"}function te(e){return Q(ee(e))}function ne(e,t,n){void 0===n&&(n=!1);const r=J(e),o=te(e),i=Z(o);let u="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(u=oe(u)),[u,oe(u)]}function re(e){return e.replace(/start|end/g,(e=>Y[e]))}function oe(e){return e.replace(/left|right|bottom|top/g,(e=>X[e]))}function ie(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function ue(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}
/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var ce=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"].join(","),le="undefined"==typeof Element,se=le?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ae=!le&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},fe=function e(t,n){var r;void 0===n&&(n=!0);var o=null==t||null===(r=t.getAttribute)||void 0===r?void 0:r.call(t,"inert");return""===o||"true"===o||n&&t&&e(t.parentNode)},de=function e(t,n,r){for(var o=[],i=Array.from(t);i.length;){var u=i.shift();if(!fe(u,!1))if("SLOT"===u.tagName){var c=u.assignedElements(),l=e(c.length?c:u.children,!0,r);r.flatten?o.push.apply(o,l):o.push({scopeParent:u,candidates:l})}else{se.call(u,ce)&&r.filter(u)&&(n||!t.includes(u))&&o.push(u);var s=u.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(u),a=!fe(s,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(u));if(s&&a){var f=e(!0===s?u.children:s.children,!0,r);r.flatten?o.push.apply(o,f):o.push({scopeParent:u,candidates:f})}else i.unshift.apply(i,u.children)}}return o},me=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},pe=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,n=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n}(e))&&!me(e)?0:e.tabIndex},ve=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},ge=function(e){return"INPUT"===e.tagName},he=function(e){return function(e){return ge(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||ae(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var o=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!o||o===e}(e)},ye=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},be=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var o=se.call(e,"details>summary:first-of-type")?e.parentElement:e;if(se.call(o,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return ye(e)}else{if("function"==typeof r){for(var i=e;e;){var u=e.parentElement,c=ae(e);if(u&&!u.shadowRoot&&!0===r(u))return ye(e);e=e.assignedSlot?e.assignedSlot:u||c===e.ownerDocument?u:c.host}e=i}if(function(e){var t,n,r,o,i=e&&ae(e),u=null===(t=i)||void 0===t?void 0:t.host,c=!1;if(i&&i!==e)for(c=!!(null!==(n=u)&&void 0!==n&&null!==(r=n.ownerDocument)&&void 0!==r&&r.contains(u)||null!=e&&null!==(o=e.ownerDocument)&&void 0!==o&&o.contains(e));!c&&u;){var l,s,a;c=!(null===(s=u=null===(l=i=ae(u))||void 0===l?void 0:l.host)||void 0===s||null===(a=s.ownerDocument)||void 0===a||!a.contains(u))}return c}(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},we=function(e,t){return!(t.disabled||fe(t)||function(e){return ge(e)&&"hidden"===e.type}(t)||be(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!se.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}return!1}(t))},xe=function(e,t){return!(he(t)||pe(t)<0||!we(e,t))},Re=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},Ee=function e(t){var n=[],r=[];return t.forEach((function(t,o){var i=!!t.scopeParent,u=i?t.scopeParent:t,c=function(e,t){var n=pe(e);return n<0&&t&&!me(e)?0:n}(u,i),l=i?e(t.candidates):u;0===c?i?n.push.apply(n,l):n.push(u):r.push({documentOrder:o,tabIndex:c,item:t,isScope:i,content:l})})),r.sort(ve).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},ke=function(e,t){var n;return n=(t=t||{}).getShadowRoot?de([e],t.includeContainer,{filter:xe.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Re}):function(e,t,n){if(fe(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(ce));return t&&se.call(e,ce)&&r.unshift(e),r.filter(n)}(e,t.includeContainer,xe.bind(null,t)),Ee(n)};function Ie(e,t,n){let{reference:r,floating:o}=e;const i=ee(t),u=te(t),c=Z(u),l=G(t),s="y"===i,a=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,d=r[c]/2-o[c]/2;let m;switch(l){case"top":m={x:a,y:r.y-o.height};break;case"bottom":m={x:a,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-o.width,y:f};break;default:m={x:r.x,y:r.y}}switch(J(t)){case"start":m[u]-=d*(n&&s?-1:1);break;case"end":m[u]+=d*(n&&s?-1:1)}return m}async function Se(e,t){var n;void 0===t&&(t={});const{x:r,y:o,platform:i,rects:u,elements:c,strategy:l}=e,{boundary:s="clippingAncestors",rootBoundary:a="viewport",elementContext:f="floating",altBoundary:d=!1,padding:m=0}=$(t,e),p=ie(m),v=c[d?"floating"===f?"reference":"floating":f],g=ue(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(v)))||n?v:v.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(c.floating)),boundary:s,rootBoundary:a,strategy:l})),h="floating"===f?{...u.floating,x:r,y:o}:u.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c.floating)),b=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},w=ue(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:h,offsetParent:y,strategy:l}):h);return{top:(g.top-w.top+p.top)/b.y,bottom:(w.bottom-g.bottom+p.bottom)/b.y,left:(g.left-w.left+p.left)/b.x,right:(w.right-g.right+p.right)/b.x}}const Le=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:u,middlewareData:c}=t,l=await async function(e,t){const{placement:n,platform:r,elements:o}=e,i=await(null==r.isRTL?void 0:r.isRTL(o.floating)),u=G(n),c=J(n),l="y"===ee(n),s=["left","top"].includes(u)?-1:1,a=i&&l?-1:1,f=$(t,e);let{mainAxis:d,crossAxis:m,alignmentAxis:p}="number"==typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return c&&"number"==typeof p&&(m="end"===c?-1*p:p),l?{x:m*a,y:d*s}:{x:d*s,y:m*a}}(t,e);return u===(null==(n=c.offset)?void 0:n.placement)&&null!=(r=c.arrow)&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:u}}}}};function Te(e){const t=R(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=p(e),i=o?e.offsetWidth:n,u=o?e.offsetHeight:r,c=V(n)!==i||V(r)!==u;return c&&(n=i,r=u),{width:n,height:r,$:c}}function Ce(e){return m(e)?e:e.contextElement}function Me(e){const t=Ce(e);if(!p(t))return z(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=Te(t);let u=(i?V(n.width):n.width)/r,c=(i?V(n.height):n.height)/o;return u&&Number.isFinite(u)||(u=1),c&&Number.isFinite(c)||(c=1),{x:u,y:c}}const Ae=z(0);function Oe(e){const t=a(e);return w()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Ae}function Pe(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const o=e.getBoundingClientRect(),i=Ce(e);let u=z(1);t&&(r?m(r)&&(u=Me(r)):u=Me(e));const c=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==a(e))&&t}(i,n,r)?Oe(i):z(0);let l=(o.left+c.x)/u.x,s=(o.top+c.y)/u.y,f=o.width/u.x,d=o.height/u.y;if(i){const e=a(i),t=r&&m(r)?a(r):r;let n=e,o=n.frameElement;for(;o&&r&&t!==n;){const e=Me(o),t=o.getBoundingClientRect(),r=R(o),i=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,u=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,s*=e.y,f*=e.x,d*=e.y,l+=i,s+=u,n=a(o),o=n.frameElement}}return ue({width:f,height:d,x:l,y:s})}const De=[":popover-open",":modal"];function Ne(e){return De.some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function Fe(e){return Pe(f(e)).left+E(e).scrollLeft}function Ke(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=a(e),r=f(e),o=n.visualViewport;let i=r.clientWidth,u=r.clientHeight,c=0,l=0;if(o){i=o.width,u=o.height;const e=w();(!e||e&&"fixed"===t)&&(c=o.offsetLeft,l=o.offsetTop)}return{width:i,height:u,x:c,y:l}}(e,n);else if("document"===t)r=function(e){const t=f(e),n=E(e),r=e.ownerDocument.body,o=q(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=q(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let u=-n.scrollLeft+Fe(e);const c=-n.scrollTop;return"rtl"===R(r).direction&&(u+=q(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:u,y:c}}(f(e));else if(m(t))r=function(e,t){const n=Pe(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=p(e)?Me(e):z(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}(t,n);else{const n=Oe(e);r={...t,x:t.x-n.x,y:t.y-n.y}}return ue(r)}function We(e,t){const n=k(e);return!(n===t||!m(n)||x(n))&&("fixed"===R(n).position||We(n,t))}function je(e,t,n){const r=p(t),o=f(t),i="fixed"===n,u=Pe(e,!0,i,t);let c={scrollLeft:0,scrollTop:0};const l=z(0);if(r||!r&&!i)if(("body"!==s(t)||g(o))&&(c=E(t)),r){const e=Pe(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else o&&(l.x=Fe(o));return{x:u.left+c.scrollLeft-l.x,y:u.top+c.scrollTop-l.y,width:u.width,height:u.height}}function Be(e,t){return p(e)&&"fixed"!==R(e).position?t?t(e):e.offsetParent:null}function He(e,t){const n=a(e);if(!p(e)||Ne(e))return n;let r=Be(e,t);for(;r&&h(r)&&"static"===R(r).position;)r=Be(r,t);return r&&("html"===s(r)||"body"===s(r)&&"static"===R(r).position&&!b(r))?n:r||function(e){let t=k(e);for(;p(t)&&!x(t);){if(b(t))return t;if(y(t))return null;t=k(t)}return null}(e)||n}const _e={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i="fixed"===o,u=f(r),c=!!t&&Ne(t.floating);if(r===u||c&&i)return n;let l={scrollLeft:0,scrollTop:0},a=z(1);const d=z(0),m=p(r);if((m||!m&&!i)&&(("body"!==s(r)||g(u))&&(l=E(r)),p(r))){const e=Pe(r);a=Me(r),d.x=e.x+r.clientLeft,d.y=e.y+r.clientTop}return{width:n.width*a.x,height:n.height*a.y,x:n.x*a.x-l.scrollLeft*a.x+d.x,y:n.y*a.y-l.scrollTop*a.y+d.y}},getDocumentElement:f,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[..."clippingAncestors"===n?function(e,t){const n=t.get(e);if(n)return n;let r=S(e,[],!1).filter((e=>m(e)&&"body"!==s(e))),o=null;const i="fixed"===R(e).position;let u=i?k(e):e;for(;m(u)&&!x(u);){const t=R(u),n=b(u);n||"fixed"!==t.position||(o=null),(i?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||g(u)&&!n&&We(e,u))?r=r.filter((e=>e!==u)):o=t,u=k(u)}return t.set(e,r),r}(t,this._c):[].concat(n),r],u=i[0],c=i.reduce(((e,n)=>{const r=Ke(t,n,o);return e.top=q(r.top,e.top),e.right=_(r.right,e.right),e.bottom=_(r.bottom,e.bottom),e.left=q(r.left,e.left),e}),Ke(t,u,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:He,getElementRects:async function(e){const t=this.getOffsetParent||He,n=this.getDimensions;return{reference:je(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=Te(e);return{width:t,height:n}},getScale:Me,isElement:m,isRTL:function(e){return"rtl"===R(e).direction}};function qe(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:u="function"==typeof ResizeObserver,layoutShift:c="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,s=Ce(e),a=o||i?[...s?S(s):[],...S(t)]:[];a.forEach((e=>{o&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));const d=s&&c?function(e,t){let n,r=null;const o=f(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function u(c,l){void 0===c&&(c=!1),void 0===l&&(l=1),i();const{left:s,top:a,width:f,height:d}=e.getBoundingClientRect();if(c||t(),!f||!d)return;const m={rootMargin:-U(a)+"px "+-U(o.clientWidth-(s+f))+"px "+-U(o.clientHeight-(a+d))+"px "+-U(s)+"px",threshold:q(0,_(1,l))||1};let p=!0;function v(e){const t=e[0].intersectionRatio;if(t!==l){if(!p)return u();t?u(!1,t):n=setTimeout((()=>{u(!1,1e-7)}),100)}p=!1}try{r=new IntersectionObserver(v,{...m,root:o.ownerDocument})}catch(e){r=new IntersectionObserver(v,m)}r.observe(e)}(!0),i}(s,n):null;let m,p=-1,v=null;u&&(v=new ResizeObserver((e=>{let[r]=e;r&&r.target===s&&v&&(v.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=v)||e.observe(t)}))),n()})),s&&!l&&v.observe(s),v.observe(t));let g=l?Pe(e):null;return l&&function t(){const r=Pe(e);!g||r.x===g.x&&r.y===g.y&&r.width===g.width&&r.height===g.height||n();g=r,m=requestAnimationFrame(t)}(),n(),()=>{var e;a.forEach((e=>{o&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=v)||e.disconnect(),v=null,l&&cancelAnimationFrame(m)}}const Ve=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:u,initialPlacement:c,platform:l,elements:s}=t,{mainAxis:a=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:v=!0,...g}=$(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const h=G(o),y=G(c)===c,b=await(null==l.isRTL?void 0:l.isRTL(s.floating)),w=d||(y||!v?[oe(c)]:function(e){const t=oe(e);return[re(e),t,re(t)]}(c));d||"none"===p||w.push(...function(e,t,n,r){const o=J(e);let i=function(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],u=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:u;default:return[]}}(G(e),"start"===n,r);return o&&(i=i.map((e=>e+"-"+o)),t&&(i=i.concat(i.map(re)))),i}(c,v,p,b));const x=[c,...w],R=await Se(t,g),E=[];let k=(null==(r=i.flip)?void 0:r.overflows)||[];if(a&&E.push(R[h]),f){const e=ne(o,u,b);E.push(R[e[0]],R[e[1]])}if(k=[...k,{placement:o,overflows:E}],!E.every((e=>e<=0))){var I,S;const e=((null==(I=i.flip)?void 0:I.index)||0)+1,t=x[e];if(t)return{data:{index:e,overflows:k},reset:{placement:t}};let n=null==(S=k.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:S.placement;if(!n)switch(m){case"bestFit":{var L;const e=null==(L=k.map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:L[0];e&&(n=e);break}case"initialPlacement":n=c}if(o!==n)return{reset:{placement:n}}}return{}}}},Ue=(e,t,n)=>{const r=new Map,o={platform:_e,...n},i={...o.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:u}=n,c=i.filter(Boolean),l=await(null==u.isRTL?void 0:u.isRTL(t));let s=await u.getElementRects({reference:e,floating:t,strategy:o}),{x:a,y:f}=Ie(s,r,l),d=r,m={},p=0;for(let n=0;n<c.length;n++){const{name:i,fn:v}=c[n],{x:g,y:h,data:y,reset:b}=await v({x:a,y:f,initialPlacement:r,placement:d,strategy:o,middlewareData:m,rects:s,platform:u,elements:{reference:e,floating:t}});a=null!=g?g:a,f=null!=h?h:f,m={...m,[i]:{...m[i],...y}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(d=b.placement),b.rects&&(s=!0===b.rects?await u.getElementRects({reference:e,floating:t,strategy:o}):b.rects),({x:a,y:f}=Ie(s,d,l))),n=-1)}return{x:a,y:f,placement:d,strategy:o,middlewareData:m}})(e,t,{...o,platform:i})};var ze="undefined"!=typeof document?t:n;function Xe(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!=r--;)if(!Xe(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!=r--;){const n=o[r];if(("_owner"!==n||!e.$$typeof)&&!Xe(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function Ye(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $e(e,t){const n=Ye(e);return Math.round(t*n)/n}function Ge(t){const n=e.useRef(t);return ze((()=>{n.current=t})),n}const Je=(e,t)=>({...Le(e),options:[e,t]}),Qe=(e,t)=>({...Ve(e),options:[e,t]}),Ze={...e},et=Ze.useInsertionEffect||(e=>e());function tt(t){const n=e.useRef((()=>{}));return et((()=>{n.current=t})),e.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return null==n.current?void 0:n.current(...t)}),[])}const nt="ArrowUp",rt="ArrowDown",ot="ArrowLeft",it="ArrowRight";function ut(e,t,n){return Math.floor(e/t)!==n}function ct(e,t){return t<0||t>=e.current.length}function lt(e,t){return at(e,{disabledIndices:t})}function st(e,t){return at(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function at(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:o,amount:i=1}=void 0===t?{}:t;const u=e.current;let c=n;do{c+=r?-i:i}while(c>=0&&c<=u.length-1&&mt(u,c,o));return c}function ft(e,t,n,r,o){if(-1===e)return-1;const i=n.indexOf(e),u=t[e];switch(o){case"tl":return i;case"tr":return u?i+u.width-1:i;case"bl":return u?i+(u.height-1)*r:i;case"br":return n.lastIndexOf(e)}}function dt(e,t){return t.flatMap(((t,n)=>e.includes(t)?[n]:[]))}function mt(e,t,n){if(n)return n.includes(t);const r=e[t];return null==r||r.hasAttribute("disabled")||"true"===r.getAttribute("aria-disabled")}let pt=0;function vt(e,t){void 0===t&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(pt);const i=()=>null==e?void 0:e.focus({preventScroll:n});o?i():pt=requestAnimationFrame(i)}var gt="undefined"!=typeof document?t:n;function ht(){return ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ht.apply(this,arguments)}let yt=!1,bt=0;const wt=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+bt++;const xt=Ze.useId||function(){const[t,n]=e.useState((()=>yt?wt():void 0));return gt((()=>{null==t&&n(wt())}),[]),e.useEffect((()=>{yt=!0}),[]),t};const Rt=e.createContext(null),Et=e.createContext(null),kt=()=>{var t;return(null==(t=e.useContext(Rt))?void 0:t.id)||null},It=()=>e.useContext(Et);function St(e){return"data-floating-ui-"+e}function Lt(e){const t=r(e);return gt((()=>{t.current=e})),t}const Tt=St("safe-polygon");function Ct(e,t,n){return n&&!N(n)?0:"number"==typeof e?e:null==e?void 0:e[t]}function Mt(t,n){void 0===n&&(n={});const{open:r,onOpenChange:o,dataRef:i,events:u,elements:c}=t,{enabled:l=!0,delay:s=0,handleClose:a=null,mouseOnly:f=!1,restMs:d=0,move:p=!0}=n,v=It(),g=kt(),h=Lt(a),y=Lt(s),b=Lt(r),w=e.useRef(),x=e.useRef(-1),R=e.useRef(),E=e.useRef(-1),k=e.useRef(!0),I=e.useRef(!1),S=e.useRef((()=>{})),L=e.useRef(!1),C=e.useCallback((()=>{var e;const t=null==(e=i.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t}),[i]);e.useEffect((()=>{if(l)return u.on("openchange",e),()=>{u.off("openchange",e)};function e(e){let{open:t}=e;t||(clearTimeout(x.current),clearTimeout(E.current),k.current=!0,L.current=!1)}}),[l,u]),e.useEffect((()=>{if(!l)return;if(!h.current)return;if(!r)return;function e(e){C()&&o(!1,e,"hover")}const t=F(c.floating).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}}),[c.floating,r,o,l,h,C]);const M=e.useCallback((function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="hover");const r=Ct(y.current,"close",w.current);r&&!R.current?(clearTimeout(x.current),x.current=window.setTimeout((()=>o(!1,e,n)),r)):t&&(clearTimeout(x.current),o(!1,e,n))}),[y,o]),A=tt((()=>{S.current(),R.current=void 0})),O=tt((()=>{if(I.current){const e=F(c.floating).body;e.style.pointerEvents="",e.removeAttribute(Tt),I.current=!1}}));e.useEffect((()=>{if(l&&m(c.domReference)){var e;const t=c.domReference;return r&&t.addEventListener("mouseleave",s),null==(e=c.floating)||e.addEventListener("mouseleave",s),p&&t.addEventListener("mousemove",n,{once:!0}),t.addEventListener("mouseenter",n),t.addEventListener("mouseleave",u),()=>{var e;r&&t.removeEventListener("mouseleave",s),null==(e=c.floating)||e.removeEventListener("mouseleave",s),p&&t.removeEventListener("mousemove",n),t.removeEventListener("mouseenter",n),t.removeEventListener("mouseleave",u)}}function t(){return!!i.current.openEvent&&["click","mousedown"].includes(i.current.openEvent.type)}function n(e){if(clearTimeout(x.current),k.current=!1,f&&!N(w.current)||d>0&&!Ct(y.current,"open"))return;const t=Ct(y.current,"open",w.current);t?x.current=window.setTimeout((()=>{b.current||o(!0,e,"hover")}),t):o(!0,e,"hover")}function u(e){if(t())return;S.current();const n=F(c.floating);if(clearTimeout(E.current),L.current=!1,h.current&&i.current.floatingContext){r||clearTimeout(x.current),R.current=h.current({...i.current.floatingContext,tree:v,x:e.clientX,y:e.clientY,onClose(){O(),A(),M(e,!0,"safe-polygon")}});const t=R.current;return n.addEventListener("mousemove",t),void(S.current=()=>{n.removeEventListener("mousemove",t)})}("touch"!==w.current||!T(c.floating,e.relatedTarget))&&M(e)}function s(e){t()||i.current.floatingContext&&(null==h.current||h.current({...i.current.floatingContext,tree:v,x:e.clientX,y:e.clientY,onClose(){O(),A(),M(e)}})(e))}}),[c,l,t,f,d,p,M,A,O,o,r,b,v,y,h,i]),gt((()=>{var e;if(l&&r&&null!=(e=h.current)&&e.__options.blockPointerEvents&&C()){I.current=!0;const e=c.floating;if(m(c.domReference)&&e){var t;const n=F(c.floating).body;n.setAttribute(Tt,"");const r=c.domReference,o=null==v||null==(t=v.nodesRef.current.find((e=>e.id===g)))||null==(t=t.context)?void 0:t.elements.floating;return o&&(o.style.pointerEvents=""),n.style.pointerEvents="none",r.style.pointerEvents="auto",e.style.pointerEvents="auto",()=>{n.style.pointerEvents="",r.style.pointerEvents="",e.style.pointerEvents=""}}}}),[l,r,g,c,v,h,C]),gt((()=>{r||(w.current=void 0,L.current=!1,A(),O())}),[r,A,O]),e.useEffect((()=>()=>{A(),clearTimeout(x.current),clearTimeout(E.current),O()}),[l,c.domReference,A,O]);const P=e.useMemo((()=>{function e(e){w.current=e.pointerType}return{onPointerDown:e,onPointerEnter:e,onMouseMove(e){const{nativeEvent:t}=e;function n(){k.current||b.current||o(!0,t,"hover")}f&&!N(w.current)||r||0===d||L.current&&e.movementX**2+e.movementY**2<2||(clearTimeout(E.current),"touch"===w.current?n():(L.current=!0,E.current=window.setTimeout(n,d)))}}}),[f,o,r,b,d]),D=e.useMemo((()=>({onMouseEnter(){clearTimeout(x.current)},onMouseLeave(e){M(e.nativeEvent,!1)}})),[M]);return e.useMemo((()=>l?{reference:P,floating:D}:{}),[l,P,D])}function At(e,t){let n=e.filter((e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)})),r=n;for(;r.length;)r=e.filter((e=>{var t;return null==(t=r)?void 0:t.some((t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)}))})),n=n.concat(r);return n}let Ot=new WeakMap,Pt=new WeakSet,Dt={},Nt=0;const Ft=e=>e&&(e.host||Ft(e.parentNode));function Kt(e,t,n,r){const o="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,u=(c=t,e.map((e=>{if(c.contains(e))return e;const t=Ft(e);return c.contains(t)?t:null})).filter((e=>null!=e)));var c;const l=new Set,a=new Set(u),f=[];Dt[o]||(Dt[o]=new WeakMap);const d=Dt[o];return u.forEach((function e(t){if(!t||l.has(t))return;l.add(t),t.parentNode&&e(t.parentNode)})),function e(t){if(!t||a.has(t))return;[].forEach.call(t.children,(t=>{if("script"!==s(t))if(l.has(t))e(t);else{const e=i?t.getAttribute(i):null,n=null!==e&&"false"!==e,r=(Ot.get(t)||0)+1,u=(d.get(t)||0)+1;Ot.set(t,r),d.set(t,u),f.push(t),1===r&&n&&Pt.add(t),1===u&&t.setAttribute(o,""),!n&&i&&t.setAttribute(i,"true")}}))}(t),l.clear(),Nt++,()=>{f.forEach((e=>{const t=(Ot.get(e)||0)-1,n=(d.get(e)||0)-1;Ot.set(e,t),d.set(e,n),t||(!Pt.has(e)&&i&&e.removeAttribute(i),Pt.delete(e)),n||e.removeAttribute(o)})),Nt--,Nt||(Ot=new WeakMap,Ot=new WeakMap,Pt=new WeakSet,Dt={})}}function Wt(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);const r=F(e[0]).body;return Kt(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const jt=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Bt(e,t){const n=ke(e,jt());"prev"===t&&n.reverse();const r=n.indexOf(L(F(e)));return n.slice(r+1)[0]}function Ht(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!T(n,r)}const _t={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function qt(e){"Tab"===e.key&&(e.target,clearTimeout(undefined))}const Vt=e.forwardRef((function(t,n){const[r,o]=e.useState();gt((()=>(P()&&o("button"),document.addEventListener("keydown",qt),()=>{document.removeEventListener("keydown",qt)})),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":!r||void 0,[St("focus-guard")]:"",style:_t};return e.createElement("span",ht({},t,i))})),Ut=e.createContext(null),zt="data-floating-ui-focusable";function Xt(e){return e?e.hasAttribute(zt)?e:e.querySelector("["+zt+"]")||e:null}let Yt=[];function $t(e){Yt=Yt.filter((e=>e.isConnected));let t=e;if(t&&"body"!==s(t)){if(!function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==se.call(e,ce)&&xe(t,e)}(t,jt())){const e=ke(t,jt())[0];e&&(t=e)}Yt.push(t),Yt.length>20&&(Yt=Yt.slice(-20))}}function Gt(){return Yt.slice().reverse().find((e=>e.isConnected))}const Jt=e.forwardRef((function(t,n){return e.createElement("button",ht({},t,{type:"button",ref:n,tabIndex:-1,style:_t}))}));function Qt(t){const{context:n,children:r,disabled:o=!1,order:i=["content"],guards:u=!0,initialFocus:c=0,returnFocus:l=!0,restoreFocus:s=!1,modal:a=!0,visuallyHiddenDismiss:f=!1,closeOnFocusOut:d=!0}=t,{open:m,refs:v,nodeId:g,onOpenChange:h,events:y,dataRef:b,floatingId:w,elements:{domReference:x,floating:R}}=n,E="number"==typeof c&&c<0,k=H(x)&&E,I="undefined"==typeof HTMLElement||!("inert"in HTMLElement.prototype)||u,S=Lt(i),C=Lt(c),M=Lt(l),P=It(),D=e.useContext(Ut),N=e.useRef(null),K=e.useRef(null),j=e.useRef(!1),_=e.useRef(!1),q=e.useRef(-1),V=null!=D,U=Xt(R),z=tt((function(e){return void 0===e&&(e=U),e?ke(e,jt()):[]})),X=tt((e=>{const t=z(e);return S.current.map((e=>x&&"reference"===e?x:U&&"floating"===e?U:t)).filter(Boolean).flat()}));function Y(t){return!o&&f&&a?e.createElement(Jt,{ref:"start"===t?N:K,onClick:e=>h(!1,e.nativeEvent)},"string"==typeof f?f:"Dismiss"):null}e.useEffect((()=>{j.current=!1}),[o]),e.useEffect((()=>{if(o)return;if(!a)return;function e(e){if("Tab"===e.key){T(U,L(F(U)))&&0===z().length&&!k&&B(e);const t=X(),n=W(e);"reference"===S.current[0]&&n===x&&(B(e),e.shiftKey?vt(t[t.length-1]):vt(t[1])),"floating"===S.current[1]&&n===U&&e.shiftKey&&(B(e),vt(t[0]))}}const t=F(U);return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}}),[o,x,U,a,S,k,z,X]),e.useEffect((()=>{if(!o&&R)return R.addEventListener("focusin",e),()=>{R.removeEventListener("focusin",e)};function e(e){const t=W(e),n=z().indexOf(t);-1!==n&&(q.current=n)}}),[o,R,z]),e.useEffect((()=>{if(!o&&d)return R&&p(x)?(x.addEventListener("focusout",t),x.addEventListener("pointerdown",e),R.addEventListener("focusout",t),()=>{x.removeEventListener("focusout",t),x.removeEventListener("pointerdown",e),R.removeEventListener("focusout",t)}):void 0;function e(){_.current=!0,setTimeout((()=>{_.current=!1}))}function t(e){const t=e.relatedTarget;queueMicrotask((()=>{const n=!(T(x,t)||T(R,t)||T(t,R)||T(null==D?void 0:D.portalNode,t)||null!=t&&t.hasAttribute(St("focus-guard"))||P&&(At(P.nodesRef.current,g).find((e=>{var n,r;return T(null==(n=e.context)?void 0:n.elements.floating,t)||T(null==(r=e.context)?void 0:r.elements.domReference,t)}))||function(e,t){var n;let r=[],o=null==(n=e.find((e=>e.id===t)))?void 0:n.parentId;for(;o;){const t=e.find((e=>e.id===o));o=null==t?void 0:t.parentId,t&&(r=r.concat(t))}return r}(P.nodesRef.current,g).find((e=>{var n,r;return(null==(n=e.context)?void 0:n.elements.floating)===t||(null==(r=e.context)?void 0:r.elements.domReference)===t}))));if(s&&n&&L(F(U))===F(U).body){p(U)&&U.focus();const e=q.current,t=z(),n=t[e]||t[t.length-1]||U;p(n)&&n.focus()}!k&&a||!t||!n||_.current||t===Gt()||(j.current=!0,h(!1,e,"focus-out"))}))}}),[o,x,R,U,a,g,P,D,h,d,s,z,k]),e.useEffect((()=>{var e;if(o)return;const t=Array.from((null==D||null==(e=D.portalNode)?void 0:e.querySelectorAll("["+St("portal")+"]"))||[]);if(R){const e=[R,...t,N.current,K.current,S.current.includes("reference")||k?x:null].filter((e=>null!=e)),n=a||k?Wt(e,I,!I):Wt(e);return()=>{n()}}}),[o,x,R,a,S,D,k,I]),gt((()=>{if(o||!p(U))return;const e=L(F(U));queueMicrotask((()=>{const t=X(U),n=C.current,r=("number"==typeof n?t[n]:n.current)||U,o=T(U,e);E||o||!m||vt(r,{preventScroll:r===U})}))}),[o,m,U,E,X,C]),gt((()=>{if(o||!U)return;let e=!1;const t=F(U),n=L(t);let r=b.current.openEvent;function i(t){let{open:n,reason:o,event:i,nested:u}=t;n&&(r=i),"escape-key"===o&&v.domReference.current&&$t(v.domReference.current),"hover"===o&&"mouseleave"===i.type&&(j.current=!0),"outside-press"===o&&(u?(j.current=!1,e=!0):j.current=!(A(i)||O(i)))}$t(n),y.on("openchange",i);const u=t.createElement("span");return u.setAttribute("tabindex","-1"),u.setAttribute("aria-hidden","true"),Object.assign(u.style,_t),V&&x&&x.insertAdjacentElement("afterend",u),()=>{y.off("openchange",i);const n=L(t),o=T(R,n)||P&&At(P.nodesRef.current,g).some((e=>{var t;return T(null==(t=e.context)?void 0:t.elements.floating,n)}));(o||r&&["click","mousedown"].includes(r.type))&&v.domReference.current&&$t(v.domReference.current);const c="boolean"==typeof M.current?Gt()||u:M.current.current||u;queueMicrotask((()=>{M.current&&!j.current&&p(c)&&(c===n||n===t.body||o)&&c.focus({preventScroll:e}),u.remove()}))}}),[o,R,U,M,b,v,y,P,g,V,x]),gt((()=>{if(!o&&D)return D.setFocusManagerState({modal:a,closeOnFocusOut:d,open:m,onOpenChange:h,refs:v}),()=>{D.setFocusManagerState(null)}}),[o,D,a,m,h,v,d]),gt((()=>{if(o)return;if(!U)return;if("function"!=typeof MutationObserver)return;if(E)return;const e=()=>{const e=U.getAttribute("tabindex"),t=z(),n=L(F(R)),r=t.indexOf(n);-1!==r&&(q.current=r),S.current.includes("floating")||n!==v.domReference.current&&0===t.length?"0"!==e&&U.setAttribute("tabindex","0"):"-1"!==e&&U.setAttribute("tabindex","-1")};e();const t=new MutationObserver(e);return t.observe(U,{childList:!0,subtree:!0,attributes:!0}),()=>{t.disconnect()}}),[o,R,U,v,S,z,E]);const $=!o&&I&&(!a||!k)&&(V||a);return e.createElement(e.Fragment,null,$&&e.createElement(Vt,{"data-type":"inside",ref:null==D?void 0:D.beforeInsideRef,onFocus:e=>{if(a){const e=X();vt("reference"===i[0]?e[0]:e[e.length-1])}else if(null!=D&&D.preserveTabOrder&&D.portalNode)if(j.current=!1,Ht(e,D.portalNode)){const e=Bt(document.body,"next")||x;null==e||e.focus()}else{var t;null==(t=D.beforeOutsideRef.current)||t.focus()}}}),!k&&Y("start"),r,Y("end"),$&&e.createElement(Vt,{"data-type":"inside",ref:null==D?void 0:D.afterInsideRef,onFocus:e=>{if(a)vt(X()[0]);else if(null!=D&&D.preserveTabOrder&&D.portalNode)if(d&&(j.current=!0),Ht(e,D.portalNode)){const e=Bt(document.body,"prev")||x;null==e||e.focus()}else{var t;null==(t=D.afterOutsideRef.current)||t.focus()}}}))}function Zt(e){return p(e.target)&&"BUTTON"===e.target.tagName}function en(e){return j(e)}const tn={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},nn={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},rn=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function on(t){const{open:n=!1,onOpenChange:r,elements:o}=t,i=xt(),u=e.useRef({}),[c]=e.useState((()=>function(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter((e=>e!==n)))||[])}}}())),l=null!=kt(),[s,a]=e.useState(o.reference),f=tt(((e,t,n)=>{u.current.openEvent=e?t:void 0,c.emit("openchange",{open:e,event:t,reason:n,nested:l}),null==r||r(e,t,n)})),d=e.useMemo((()=>({setPositionReference:a})),[]),m=e.useMemo((()=>({reference:s||o.reference||null,floating:o.floating||null,domReference:o.reference})),[s,o.reference,o.floating]);return e.useMemo((()=>({dataRef:u,open:n,onOpenChange:f,elements:m,events:c,floatingId:i,refs:d})),[n,f,m,c,i,d])}function un(t){void 0===t&&(t={});const{nodeId:n}=t,r=on({...t,elements:{reference:null,floating:null,...t.elements}}),o=t.rootContext||r,i=o.elements,[u,l]=e.useState(null),[s,a]=e.useState(null),f=(null==i?void 0:i.domReference)||u,d=e.useRef(null),p=It();gt((()=>{f&&(d.current=f)}),[f]);const v=function(t){void 0===t&&(t={});const{placement:n="bottom",strategy:r="absolute",middleware:o=[],platform:i,elements:{reference:u,floating:l}={},transform:s=!0,whileElementsMounted:a,open:f}=t,[d,m]=e.useState({x:0,y:0,strategy:r,placement:n,middlewareData:{},isPositioned:!1}),[p,v]=e.useState(o);Xe(p,o)||v(o);const[g,h]=e.useState(null),[y,b]=e.useState(null),w=e.useCallback((e=>{e!==k.current&&(k.current=e,h(e))}),[]),x=e.useCallback((e=>{e!==I.current&&(I.current=e,b(e))}),[]),R=u||g,E=l||y,k=e.useRef(null),I=e.useRef(null),S=e.useRef(d),L=null!=a,T=Ge(a),C=Ge(i),M=Ge(f),A=e.useCallback((()=>{if(!k.current||!I.current)return;const e={placement:n,strategy:r,middleware:p};C.current&&(e.platform=C.current),Ue(k.current,I.current,e).then((e=>{const t={...e,isPositioned:!1!==M.current};O.current&&!Xe(S.current,t)&&(S.current=t,c.flushSync((()=>{m(t)})))}))}),[p,n,r,C,M]);ze((()=>{!1===f&&S.current.isPositioned&&(S.current.isPositioned=!1,m((e=>({...e,isPositioned:!1}))))}),[f]);const O=e.useRef(!1);ze((()=>(O.current=!0,()=>{O.current=!1})),[]),ze((()=>{if(R&&(k.current=R),E&&(I.current=E),R&&E){if(T.current)return T.current(R,E,A);A()}}),[R,E,A,T,L]);const P=e.useMemo((()=>({reference:k,floating:I,setReference:w,setFloating:x})),[w,x]),D=e.useMemo((()=>({reference:R,floating:E})),[R,E]),N=e.useMemo((()=>{const e={position:r,left:0,top:0};if(!D.floating)return e;const t=$e(D.floating,d.x),n=$e(D.floating,d.y);return s?{...e,transform:"translate("+t+"px, "+n+"px)",...Ye(D.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}}),[r,s,D.floating,d.x,d.y]);return e.useMemo((()=>({...d,update:A,refs:P,elements:D,floatingStyles:N})),[d,A,P,D,N])}({...t,elements:{...i,...s&&{reference:s}}}),g=e.useCallback((e=>{const t=m(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;a(t),v.refs.setReference(t)}),[v.refs]),h=e.useCallback((e=>{(m(e)||null===e)&&(d.current=e,l(e)),(m(v.refs.reference.current)||null===v.refs.reference.current||null!==e&&!m(e))&&v.refs.setReference(e)}),[v.refs]),y=e.useMemo((()=>({...v.refs,setReference:h,setPositionReference:g,domReference:d})),[v.refs,h,g]),b=e.useMemo((()=>({...v.elements,domReference:f})),[v.elements,f]),w=e.useMemo((()=>({...v,...o,refs:y,elements:b,nodeId:n})),[v,y,b,n,o]);return gt((()=>{o.dataRef.current.floatingContext=w;const e=null==p?void 0:p.nodesRef.current.find((e=>e.id===n));e&&(e.context=w)})),e.useMemo((()=>({...v,context:w,refs:y,elements:b})),[v,y,b,w])}const cn="active",ln="selected";function sn(e,t,n){const r=new Map,o="item"===n;let i=e;if(o&&e){const{[cn]:t,[ln]:n,...r}=e;i=r}return{..."floating"===n&&{tabIndex:-1,[zt]:""},...i,...t.map((t=>{const r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,i]=t;var u;o&&[cn,ln].includes(n)||(0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"==typeof i&&(null==(u=r.get(n))||u.push(i),e[n]=function(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return null==(e=r.get(n))?void 0:e.map((e=>e(...o))).find((e=>void 0!==e))})):e[n]=i)})),e):e),{})}}let an=!1;function fn(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function dn(e,t){return fn(t,e===nt||e===rt,e===ot||e===it)}function mn(e,t,n){return fn(t,e===rt,n?e===ot:e===it)||"Enter"===e||" "===e||""===e}function pn(e,t,n){return fn(t,n?e===it:e===ot,e===nt)}function vn(t,n){const{open:r,onOpenChange:o,elements:i}=t,{listRef:u,activeIndex:c,onNavigate:l=()=>{},enabled:s=!0,selectedIndex:a=null,allowEscape:f=!1,loop:d=!1,nested:m=!1,rtl:v=!1,virtual:g=!1,focusItemOnOpen:h="auto",focusItemOnHover:y=!0,openOnArrowKeyDown:b=!0,disabledIndices:w,orientation:x="vertical",cols:R=1,scrollItemIntoView:E=!0,virtualItemRef:k,itemSizes:I,dense:S=!1}=n,M=Lt(Xt(i.floating)),D=kt(),N=It(),K=tt(l),W=H(i.domReference),j=e.useRef(h),_=e.useRef(null!=a?a:-1),q=e.useRef(null),V=e.useRef(!0),z=e.useRef(K),X=e.useRef(!!i.floating),Y=e.useRef(r),$=e.useRef(!1),G=e.useRef(!1),J=Lt(w),Q=Lt(r),Z=Lt(E),ee=Lt(a),[te,ne]=e.useState(),[re,oe]=e.useState(),ie=tt((function(e,t,n){function r(e){g?(ne(e.id),null==N||N.events.emit("virtualfocus",e),k&&(k.current=e)):vt(e,{preventScroll:!0,sync:!(!C().toLowerCase().startsWith("mac")||navigator.maxTouchPoints||!P())&&(an||$.current)})}void 0===n&&(n=!1);const o=e.current[t.current];o&&r(o),requestAnimationFrame((()=>{const i=e.current[t.current]||o;if(!i)return;o||r(i);const u=Z.current;u&&ce&&(n||!V.current)&&(null==i.scrollIntoView||i.scrollIntoView("boolean"==typeof u?{block:"nearest",inline:"nearest"}:u))}))}));gt((()=>{document.createElement("div").focus({get preventScroll(){return an=!0,!1}})}),[]),gt((()=>{s&&(r&&i.floating?j.current&&null!=a&&(G.current=!0,_.current=a,K(a)):X.current&&(_.current=-1,z.current(null)))}),[s,r,i.floating,a,K]),gt((()=>{if(s&&r&&i.floating)if(null==c){if($.current=!1,null!=ee.current)return;if(X.current&&(_.current=-1,ie(u,_)),(!Y.current||!X.current)&&j.current&&(null!=q.current||!0===j.current&&null==q.current)){let e=0;const t=()=>{if(null==u.current[0]){if(e<2){(e?requestAnimationFrame:queueMicrotask)(t)}e++}else _.current=null==q.current||mn(q.current,x,v)||m?lt(u,J.current):st(u,J.current),q.current=null,K(_.current)};t()}}else ct(u,c)||(_.current=c,ie(u,_,G.current),G.current=!1)}),[s,r,i.floating,c,ee,m,u,x,v,K,ie,J]),gt((()=>{var e;if(!s||i.floating||!N||g||!X.current)return;const t=N.nodesRef.current,n=null==(e=t.find((e=>e.id===D)))||null==(e=e.context)?void 0:e.elements.floating,r=L(F(i.floating)),o=t.some((e=>e.context&&T(e.context.elements.floating,r)));n&&!o&&V.current&&n.focus({preventScroll:!0})}),[s,i.floating,N,D,g]),gt((()=>{if(s&&N&&g&&!D)return N.events.on("virtualfocus",e),()=>{N.events.off("virtualfocus",e)};function e(e){oe(e.id),k&&(k.current=e)}}),[s,N,g,D,k]),gt((()=>{z.current=K,X.current=!!i.floating})),gt((()=>{r||(q.current=null)}),[r]),gt((()=>{Y.current=r}),[r]);const ue=null!=c,ce=e.useMemo((()=>{function e(e){if(!r)return;const t=u.current.indexOf(e);-1!==t&&K(t)}return{onFocus(t){let{currentTarget:n}=t;e(n)},onClick:e=>{let{currentTarget:t}=e;return t.focus({preventScroll:!0})},...y&&{onMouseMove(t){let{currentTarget:n}=t;e(n)},onPointerLeave(e){let{pointerType:t}=e;V.current&&"touch"!==t&&(_.current=-1,ie(u,_),K(null),g||vt(M.current,{preventScroll:!0}))}}}}),[r,M,ie,y,u,K,g]),le=tt((e=>{if(V.current=!1,$.current=!0,229===e.which)return;if(!Q.current&&e.currentTarget===M.current)return;if(m&&pn(e.key,x,v))return B(e),o(!1,e.nativeEvent,"list-navigation"),void(p(i.domReference)&&(g?null==N||N.events.emit("virtualfocus",i.domReference):i.domReference.focus()));const t=_.current,n=lt(u,w),c=st(u,w);if(W||("Home"===e.key&&(B(e),_.current=n,K(_.current)),"End"===e.key&&(B(e),_.current=c,K(_.current))),R>1){const t=I||Array.from({length:u.current.length},(()=>({width:1,height:1}))),r=function(e,t,n){const r=[];let o=0;return e.forEach(((e,i)=>{let{width:u,height:c}=e,l=!1;for(n&&(o=0);!l;){const e=[];for(let n=0;n<u;n++)for(let r=0;r<c;r++)e.push(o+n+r*t);o%t+u<=t&&e.every((e=>null==r[e]))?(e.forEach((e=>{r[e]=i})),l=!0):o++}})),[...r]}(t,R,S),o=r.findIndex((e=>null!=e&&!mt(u.current,e,w))),i=r.reduce(((e,t,n)=>null==t||mt(u.current,t,w)?e:n),-1),l=r[function(e,t){let{event:n,orientation:r,loop:o,cols:i,disabledIndices:u,minIndex:c,maxIndex:l,prevIndex:s,stopEvent:a=!1}=t,f=s;if(n.key===nt){if(a&&B(n),-1===s)f=l;else if(f=at(e,{startingIndex:f,amount:i,decrement:!0,disabledIndices:u}),o&&(s-i<c||f<0)){const e=s%i,t=l%i,n=l-(t-e);f=t===e?l:t>e?n:n-i}ct(e,f)&&(f=s)}if(n.key===rt&&(a&&B(n),-1===s?f=c:(f=at(e,{startingIndex:s,amount:i,disabledIndices:u}),o&&s+i>l&&(f=at(e,{startingIndex:s%i-i,amount:i,disabledIndices:u}))),ct(e,f)&&(f=s)),"both"===r){const t=U(s/i);n.key===it&&(a&&B(n),s%i!=i-1?(f=at(e,{startingIndex:s,disabledIndices:u}),o&&ut(f,i,t)&&(f=at(e,{startingIndex:s-s%i-1,disabledIndices:u}))):o&&(f=at(e,{startingIndex:s-s%i-1,disabledIndices:u})),ut(f,i,t)&&(f=s)),n.key===ot&&(a&&B(n),s%i!=0?(f=at(e,{startingIndex:s,decrement:!0,disabledIndices:u}),o&&ut(f,i,t)&&(f=at(e,{startingIndex:s+(i-s%i),decrement:!0,disabledIndices:u}))):o&&(f=at(e,{startingIndex:s+(i-s%i),decrement:!0,disabledIndices:u})),ut(f,i,t)&&(f=s));const r=U(l/i)===t;ct(e,f)&&(f=o&&r?n.key===ot?l:at(e,{startingIndex:s-s%i-1,disabledIndices:u}):s)}return f}({current:r.map((e=>null!=e?u.current[e]:null))},{event:e,orientation:x,loop:d,cols:R,disabledIndices:dt([...w||u.current.map(((e,t)=>mt(u.current,t)?t:void 0)),void 0],r),minIndex:o,maxIndex:i,prevIndex:ft(_.current>c?n:_.current,t,r,R,e.key===rt?"bl":e.key===it?"tr":"tl"),stopEvent:!0})];if(null!=l&&(_.current=l,K(_.current)),"both"===x)return}if(dn(e.key,x)){if(B(e),r&&!g&&L(e.currentTarget.ownerDocument)===e.currentTarget)return _.current=mn(e.key,x,v)?n:c,void K(_.current);mn(e.key,x,v)?_.current=d?t>=c?f&&t!==u.current.length?-1:n:at(u,{startingIndex:t,disabledIndices:w}):Math.min(c,at(u,{startingIndex:t,disabledIndices:w})):_.current=d?t<=n?f&&-1!==t?u.current.length:c:at(u,{startingIndex:t,decrement:!0,disabledIndices:w}):Math.max(n,at(u,{startingIndex:t,decrement:!0,disabledIndices:w})),ct(u,_.current)?K(null):K(_.current)}})),se=e.useMemo((()=>g&&r&&ue&&{"aria-activedescendant":re||te}),[g,r,ue,re,te]),ae=e.useMemo((()=>({"aria-orientation":"both"===x?void 0:x,...!H(i.domReference)&&se,onKeyDown:le,onPointerMove(){V.current=!0}})),[se,le,i.domReference,x]),fe=e.useMemo((()=>{function e(e){"auto"===h&&A(e.nativeEvent)&&(j.current=!0)}return{...se,onKeyDown(e){V.current=!1;const t=e.key.startsWith("Arrow"),n=["Home","End"].includes(e.key),i=t||n,c=function(e,t,n){return fn(t,n?e===ot:e===it,e===rt)}(e.key,x,v),l=pn(e.key,x,v),s=dn(e.key,x),f=(m?c:s)||"Enter"===e.key||""===e.key.trim();if(g&&r){const t=null==N?void 0:N.nodesRef.current.find((e=>null==e.parentId)),r=N&&t?function(e,t){let n,r=-1;return function t(o,i){i>r&&(n=o,r=i),At(e,o).forEach((e=>{t(e.id,i+1)}))}(t,0),e.find((e=>e.id===n))}(N.nodesRef.current,t.id):null;if(i&&r&&k){const t=new KeyboardEvent("keydown",{key:e.key,bubbles:!0});if(c||l){var d,p;const n=(null==(d=r.context)?void 0:d.elements.domReference)===e.currentTarget,o=l&&!n?null==(p=r.context)?void 0:p.elements.domReference:c?u.current.find((e=>(null==e?void 0:e.id)===te)):null;o&&(B(e),o.dispatchEvent(t),oe(void 0))}var h;if((s||n)&&r.context)if(r.context.open&&r.parentId&&e.currentTarget!==r.context.elements.domReference)return B(e),void(null==(h=r.context.elements.domReference)||h.dispatchEvent(t))}return le(e)}(r||b||!t)&&(f&&(q.current=m&&s?null:e.key),m?c&&(B(e),r?(_.current=lt(u,J.current),K(_.current)):o(!0,e.nativeEvent,"list-navigation")):s&&(null!=a&&(_.current=a),B(e),!r&&b?o(!0,e.nativeEvent,"list-navigation"):le(e),r&&K(_.current)))},onFocus(){r&&!g&&K(null)},onPointerDown:function(e){j.current=h,"auto"===h&&O(e.nativeEvent)&&(j.current=!0)},onMouseDown:e,onClick:e}}),[te,se,le,J,h,u,m,K,o,r,b,x,v,a,N,g,k]);return e.useMemo((()=>s?{reference:fe,floating:ae,item:ce}:{}),[s,fe,ae,ce])}const gn=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function hn(t,n){var r;const{open:o,dataRef:i}=t,{listRef:u,activeIndex:c,onMatch:l,onTypingChange:s,enabled:a=!0,findMatch:f=null,resetMs:d=750,ignoreKeys:m=[],selectedIndex:p=null}=n,v=e.useRef(),g=e.useRef(""),h=e.useRef(null!=(r=null!=p?p:c)?r:-1),y=e.useRef(null),b=tt(l),w=tt(s),x=Lt(f),R=Lt(m);gt((()=>{o&&(clearTimeout(v.current),y.current=null,g.current="")}),[o]),gt((()=>{var e;o&&""===g.current&&(h.current=null!=(e=null!=p?p:c)?e:-1)}),[o,p,c]);const E=tt((e=>{e?i.current.typing||(i.current.typing=e,w(e)):i.current.typing&&(i.current.typing=e,w(e))})),k=tt((e=>{function t(e,t,n){const r=x.current?x.current(t,n):t.find((e=>0===(null==e?void 0:e.toLocaleLowerCase().indexOf(n.toLocaleLowerCase()))));return r?e.indexOf(r):-1}const n=u.current;if(g.current.length>0&&" "!==g.current[0]&&(-1===t(n,n,g.current)?E(!1):" "===e.key&&B(e)),null==n||R.current.includes(e.key)||1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey)return;o&&" "!==e.key&&(B(e),E(!0));n.every((e=>{var t,n;return!e||(null==(t=e[0])?void 0:t.toLocaleLowerCase())!==(null==(n=e[1])?void 0:n.toLocaleLowerCase())}))&&g.current===e.key&&(g.current="",h.current=y.current),g.current+=e.key,clearTimeout(v.current),v.current=setTimeout((()=>{g.current="",h.current=y.current,E(!1)}),d);const r=h.current,i=t(n,[...n.slice((r||0)+1),...n.slice(0,(r||0)+1)],g.current);-1!==i?(b(i),y.current=i):" "!==e.key&&(g.current="",E(!1))})),I=e.useMemo((()=>({onKeyDown:k})),[k]),S=e.useMemo((()=>({onKeyDown:k,onKeyUp(e){" "===e.key&&E(!1)}})),[k,E]);return e.useMemo((()=>a?{reference:I,floating:S}:{}),[a,I,S])}function yn(e,t){const[n,r]=e;let o=!1;const i=t.length;for(let e=0,u=i-1;e<i;u=e++){const[i,c]=t[e]||[0,0],[l,s]=t[u]||[0,0];c>=r!=s>=r&&n<=(l-i)*(r-c)/(s-c)+i&&(o=!o)}return o}function bn(e){void 0===e&&(e={});const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:r=!0}=e;let o,i=!1,u=null,c=null,l=performance.now();const s=e=>{let{x:n,y:s,placement:a,elements:f,onClose:d,nodeId:p,tree:v}=e;return function(e){function g(){clearTimeout(o),d()}if(clearTimeout(o),!f.domReference||!f.floating||null==a||null==n||null==s)return;const{clientX:h,clientY:y}=e,b=[h,y],w=W(e),x="mouseleave"===e.type,R=T(f.floating,w),E=T(f.domReference,w),k=f.domReference.getBoundingClientRect(),I=f.floating.getBoundingClientRect(),S=a.split("-")[0],L=n>I.right-I.width/2,C=s>I.bottom-I.height/2,M=function(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}(b,k),A=I.width>k.width,O=I.height>k.height,P=(A?k:I).left,D=(A?k:I).right,N=(O?k:I).top,F=(O?k:I).bottom;if(R&&(i=!0,!x))return;if(E&&(i=!1),E&&!x)return void(i=!0);if(x&&m(e.relatedTarget)&&T(f.floating,e.relatedTarget))return;if(v&&At(v.nodesRef.current,p).some((e=>{let{context:t}=e;return null==t?void 0:t.open})))return;if("top"===S&&s>=k.bottom-1||"bottom"===S&&s<=k.top+1||"left"===S&&n>=k.right-1||"right"===S&&n<=k.left+1)return g();let K=[];switch(S){case"top":K=[[P,k.top+1],[P,I.bottom-1],[D,I.bottom-1],[D,k.top+1]];break;case"bottom":K=[[P,I.top+1],[P,k.bottom-1],[D,k.bottom-1],[D,I.top+1]];break;case"left":K=[[I.right-1,F],[I.right-1,N],[k.left+1,N],[k.left+1,F]];break;case"right":K=[[k.right-1,F],[k.right-1,N],[I.left+1,N],[I.left+1,F]]}if(!yn([h,y],K)){if(i&&!M)return g();if(!x&&r){const t=function(e,t){const n=performance.now(),r=n-l;if(null===u||null===c||0===r)return u=e,c=t,l=n,null;const o=e-u,i=t-c,s=Math.sqrt(o*o+i*i);return u=e,c=t,l=n,s/r}(e.clientX,e.clientY);if(null!==t&&t<.1)return g()}yn([h,y],function(e){let[n,r]=e;switch(S){case"top":return[[A?n+t/2:L?n+4*t:n-4*t,r+t+1],[A?n-t/2:L?n+4*t:n-4*t,r+t+1],...[[I.left,L||A?I.bottom-t:I.top],[I.right,L?A?I.bottom-t:I.top:I.bottom-t]]];case"bottom":return[[A?n+t/2:L?n+4*t:n-4*t,r-t],[A?n-t/2:L?n+4*t:n-4*t,r-t],...[[I.left,L||A?I.top+t:I.bottom],[I.right,L?A?I.top+t:I.bottom:I.top+t]]];case"left":{const e=[n+t+1,O?r+t/2:C?r+4*t:r-4*t],o=[n+t+1,O?r-t/2:C?r+4*t:r-4*t];return[...[[C||O?I.right-t:I.left,I.top],[C?O?I.right-t:I.left:I.right-t,I.bottom]],e,o]}case"right":return[[n-t,O?r+t/2:C?r+4*t:r-4*t],[n-t,O?r-t/2:C?r+4*t:r-4*t],...[[C||O?I.left+t:I.right,I.top],[C?O?I.left+t:I.right:I.left+t,I.bottom]]]}}([n,s]))?!i&&r&&(o=window.setTimeout(g,40)):g()}}};return s.__options={blockPointerEvents:n},s}var wn,xn={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/wn=xn,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var i=typeof o;if("string"===i||"number"===i)n.push(o);else if(Array.isArray(o)){if(o.length){var u=t.apply(null,o);u&&n.push(u)}}else if("object"===i){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){n.push(o.toString());continue}for(var c in o)e.call(o,c)&&o[c]&&n.push(c)}}}return n.join(" ")}wn.exports?(t.default=t,wn.exports=t):window.classNames=t}();var Rn=xn.exports;function En(t){let{currentLanguage:n,isOpen:i,languageList:u,onSelect:c,position:l,setOpen:s,triggerOn:a}=t;const f=u.map((e=>e.value)),d=u.findIndex((e=>e.value===(null==n?void 0:n.value))),[v,g]=o(null),[h,y]=o(null!=d?d:null),{context:b,floatingStyles:E,refs:I}=un({onOpenChange:s,open:i,placement:l,strategy:"fixed",whileElementsMounted:qe,middleware:[Je(2),Qe({fallbackPlacements:["top","right","bottom","left"]})]}),L=r([]),C=r(f),M=r(!1),A=Mt(b,{enabled:"hover"===a,move:!1,handleClose:bn()}),O=function(t,n){void 0===n&&(n={});const{open:r,onOpenChange:o,dataRef:i,elements:{domReference:u}}=t,{enabled:c=!0,event:l="click",toggle:s=!0,ignoreMouse:a=!1,keyboardHandlers:f=!0}=n,d=e.useRef(),m=e.useRef(!1),p=e.useMemo((()=>({onPointerDown(e){d.current=e.pointerType},onMouseDown(e){const t=d.current;0===e.button&&"click"!==l&&(N(t,!0)&&a||(!r||!s||i.current.openEvent&&"mousedown"!==i.current.openEvent.type?(e.preventDefault(),o(!0,e.nativeEvent,"click")):o(!1,e.nativeEvent,"click")))},onClick(e){const t=d.current;"mousedown"===l&&d.current?d.current=void 0:N(t,!0)&&a||(!r||!s||i.current.openEvent&&"click"!==i.current.openEvent.type?o(!0,e.nativeEvent,"click"):o(!1,e.nativeEvent,"click"))},onKeyDown(e){d.current=void 0,e.defaultPrevented||!f||Zt(e)||(" "!==e.key||en(u)||(e.preventDefault(),m.current=!0),"Enter"===e.key&&o(!r||!s,e.nativeEvent,"click"))},onKeyUp(e){e.defaultPrevented||!f||Zt(e)||en(u)||" "===e.key&&m.current&&(m.current=!1,o(!r||!s,e.nativeEvent,"click"))}})),[i,u,l,a,f,o,r,s]);return e.useMemo((()=>c?{reference:p}:{}),[c,p])}(b,{enabled:"click"===a,event:"mousedown"}),P=function(t,n){void 0===n&&(n={});const{open:r,onOpenChange:o,elements:i,dataRef:u}=t,{enabled:c=!0,escapeKey:l=!0,outsidePress:s=!0,outsidePressEvent:a="pointerdown",referencePress:f=!1,referencePressEvent:d="pointerdown",ancestorScroll:v=!1,bubbles:g,capture:h}=n,y=It(),b=tt("function"==typeof s?s:()=>!1),E="function"==typeof s?b:s,I=e.useRef(!1),L=e.useRef(!1),{escapeKey:C,outsidePress:M}=rn(g),{escapeKey:A,outsidePress:O}=rn(h),P=e.useRef(!1),D=tt((e=>{var t;if(!r||!c||!l||"Escape"!==e.key)return;if(P.current)return;const n=null==(t=u.current.floatingContext)?void 0:t.nodeId,i=y?At(y.nodesRef.current,n):[];if(!C&&(e.stopPropagation(),i.length>0)){let e=!0;if(i.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)})),!e)return}o(!1,function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,"escape-key")})),N=tt((e=>{var t;const n=()=>{var t;D(e),null==(t=W(e))||t.removeEventListener("keydown",n)};null==(t=W(e))||t.addEventListener("keydown",n)})),j=tt((e=>{var t;const n=I.current;I.current=!1;const r=L.current;if(L.current=!1,"click"===a&&r)return;if(n)return;if("function"==typeof E&&!E(e))return;const c=W(e),l="["+St("inert")+"]",s=F(i.floating).querySelectorAll(l);let f=m(c)?c:null;for(;f&&!x(f);){const e=k(f);if(x(e)||!m(e))break;f=e}if(s.length&&m(c)&&!c.matches("html,body")&&!T(c,i.floating)&&Array.from(s).every((e=>!T(f,e))))return;if(p(c)&&_){const t=c.clientWidth>0&&c.scrollWidth>c.clientWidth,n=c.clientHeight>0&&c.scrollHeight>c.clientHeight;let r=n&&e.offsetX>c.clientWidth;if(n&&"rtl"===R(c).direction&&(r=e.offsetX<=c.offsetWidth-c.clientWidth),r||t&&e.offsetY>c.clientHeight)return}const d=null==(t=u.current.floatingContext)?void 0:t.nodeId,v=y&&At(y.nodesRef.current,d).some((t=>{var n;return K(e,null==(n=t.context)?void 0:n.elements.floating)}));if(K(e,i.floating)||K(e,i.domReference)||v)return;const g=y?At(y.nodesRef.current,d):[];if(g.length>0){let e=!0;if(g.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)})),!e)return}o(!1,e,"outside-press")})),B=tt((e=>{var t;const n=()=>{var t;j(e),null==(t=W(e))||t.removeEventListener(a,n)};null==(t=W(e))||t.addEventListener(a,n)}));e.useEffect((()=>{if(!r||!c)return;u.current.__escapeKeyBubbles=C,u.current.__outsidePressBubbles=M;let e=-1;function t(e){o(!1,e,"ancestor-scroll")}function n(){window.clearTimeout(e),P.current=!0}function s(){e=window.setTimeout((()=>{P.current=!1}),w()?5:0)}const f=F(i.floating);l&&(f.addEventListener("keydown",A?N:D,A),f.addEventListener("compositionstart",n),f.addEventListener("compositionend",s)),E&&f.addEventListener(a,O?B:j,O);let d=[];return v&&(m(i.domReference)&&(d=S(i.domReference)),m(i.floating)&&(d=d.concat(S(i.floating))),!m(i.reference)&&i.reference&&i.reference.contextElement&&(d=d.concat(S(i.reference.contextElement)))),d=d.filter((e=>{var t;return e!==(null==(t=f.defaultView)?void 0:t.visualViewport)})),d.forEach((e=>{e.addEventListener("scroll",t,{passive:!0})})),()=>{l&&(f.removeEventListener("keydown",A?N:D,A),f.removeEventListener("compositionstart",n),f.removeEventListener("compositionend",s)),E&&f.removeEventListener(a,O?B:j,O),d.forEach((e=>{e.removeEventListener("scroll",t)})),window.clearTimeout(e)}}),[u,i,l,E,a,r,o,v,c,C,M,D,A,N,j,O,B]),e.useEffect((()=>{I.current=!1}),[E,a]);const H=e.useMemo((()=>({onKeyDown:D,[tn[d]]:e=>{f&&o(!1,e.nativeEvent,"reference-press")}})),[D,o,f,d]),_=e.useMemo((()=>({onKeyDown:D,onMouseDown(){L.current=!0},onMouseUp(){L.current=!0},[nn[a]]:()=>{I.current=!0}})),[D,a]);return e.useMemo((()=>c?{reference:H,floating:_}:{}),[c,H,_])}(b),D=function(t,n){var r;void 0===n&&(n={});const{open:o,floatingId:i}=t,{enabled:u=!0,role:c="dialog"}=n,l=null!=(r=gn.get(c))?r:c,s=xt(),a=null!=kt(),f=e.useMemo((()=>"tooltip"===l||"label"===c?{["aria-"+("label"===c?"labelledby":"describedby")]:o?i:void 0}:{"aria-expanded":o?"true":"false","aria-haspopup":"alertdialog"===l?"dialog":l,"aria-controls":o?i:void 0,..."listbox"===l&&{role:"combobox"},..."menu"===l&&{id:s},..."menu"===l&&a&&{role:"menuitem"},..."select"===c&&{"aria-autocomplete":"none"},..."combobox"===c&&{"aria-autocomplete":"list"}}),[l,i,a,o,s,c]),d=e.useMemo((()=>{const e={id:i,...l&&{role:l}};return"tooltip"===l||"label"===c?e:{...e,..."menu"===l&&{"aria-labelledby":s}}}),[l,i,s,c]),m=e.useCallback((e=>{let{active:t,selected:n}=e;const r={role:"option",...t&&{id:i+"-option"}};switch(c){case"select":return{...r,"aria-selected":t&&n};case"combobox":return{...r,...t&&{"aria-selected":!0}}}return{}}),[i,c]);return e.useMemo((()=>u?{reference:f,floating:d,item:m}:{}),[u,f,d,m])}(b,{role:"listbox"}),j=vn(b,{listRef:L,activeIndex:v,selectedIndex:h,onNavigate:g}),B=hn(b,{listRef:C,activeIndex:v,selectedIndex:h,onMatch:i?g:y,onTypingChange(e){M.current=e}}),{getReferenceProps:H,getFloatingProps:_,getItemProps:q}=function(t){void 0===t&&(t=[]);const n=t.map((e=>null==e?void 0:e.reference)),r=t.map((e=>null==e?void 0:e.floating)),o=t.map((e=>null==e?void 0:e.item)),i=e.useCallback((e=>sn(e,t,"reference")),n),u=e.useCallback((e=>sn(e,t,"floating")),r),c=e.useCallback((e=>sn(e,t,"item")),o);return e.useMemo((()=>({getReferenceProps:i,getFloatingProps:u,getItemProps:c})),[i,u,c])}([P,D,j,B,O,A]);return{activeIndex:v,context:b,floatingStyles:E,getFloatingProps:_,getItemProps:q,getReferenceProps:H,handleSelect:e=>{null==c||c(u[e]),y(e),s(!1)},isTypingRef:M,listRef:L,refs:I,selectedIndex:h}}const kn=e=>{let{className:t,currentLanguage:n,languageList:r,onSelect:u,position:c,screenReaderLabelCaption:l,style:s,tabIndex:a,trigger:f}=e;const[d,m]=o(!1),{activeIndex:p,context:v,floatingStyles:g,getFloatingProps:h,getItemProps:y,getReferenceProps:b,handleSelect:w,isTypingRef:x,listRef:R,refs:E}=En({currentLanguage:n,isOpen:d,languageList:r,onSelect:u,position:c,setOpen:m,triggerOn:f});return i("div",{className:Rn(t,"widget-language-selector","popupmenu"),style:s},i("div",{ref:null==E?void 0:E.setReference,className:"popupmenu-trigger popupmenu-trigger-alignment","aria-label":l||"Language selector","aria-autocomplete":"none","aria-activedescendant":d&&null!==p?"":void 0,tabIndex:a,...null==b?void 0:b()},i("span",{className:"current-language-text"},(null==n?void 0:n.value)||""),i("span",{className:"language-arrow","aria-hidden":"true"},i("div",{className:"arrow-image ".concat(d?"arrow-up":"arrow-down")}))),d&&i(Qt,{context:v,modal:!1},i("div",{"aria-activedescendant":d&&null!==p?"":void 0,className:"popupmenu-menu",ref:null==E?void 0:E.setFloating,style:{...g,outline:0,overflowY:"auto"},...null==h?void 0:h()},r.map(((e,t)=>i("div",{key:e._guid,ref:e=>{R.current[t]=e},role:"option",tabIndex:t===p?0:-1,className:Rn("popupmenu-basic-item",{active:n===e,highlighted:p===t}),...null==y?void 0:y({onKeyDown(e){"Enter"===e.key&&(e.preventDefault(),w(t))," "!==e.key||x.current||(e.preventDefault(),w(t))},onClick(){w(t)}})},e.value))))))};function In(e){var t,r;const[c,l]=o(),[s,a]=o([]),[f,d]=o(!1);n((()=>{if(e.languageOptions.items&&e.languageCaption){const t=e.languageOptions.items.map((t=>({_guid:t.id,value:e.languageCaption.get(t).value})));a(t),t.length<2&&e.hideForSingle&&d(!0)}}),[e]),n((()=>{const e=window.mx.session.getUserObject().jsonData.attributes["System.User_Language"].value,t=s.find((t=>t._guid===e));l(t)}),[s]);const m=u((e=>{const t=window.mx.session.getUserObject();t.addReference("System.User_Language",e._guid),window.mx.data.commit({mxobj:t,callback(){l(e),window.mx.reloadWithState()}})}),[]);return f?null:i(kn,{className:e.class,position:e.position,currentLanguage:c,languageList:s,onSelect:m,trigger:e.trigger,tabIndex:null!==(t=e.tabIndex)&&void 0!==t?t:0,screenReaderLabelCaption:null===(r=e.screenReaderLabelCaption)||void 0===r?void 0:r.value})}export{In as default};
