import e,{useRef as t,useEffect as n,createContext as i,useCallback as r,useMemo as o,useState as s,forwardRef as a,memo as l,createElement as u,useContext as c,useLayoutEffect as d,Children as h,isValidElement as f,cloneElement as v,Fragment as g}from"react";import{unstable_batchedUpdates as p}from"react-dom";import{and as m,equals as _,literal as b,or as y,greaterThan as w,attribute as S,lessThan as x,contains as C,startsWith as O,endsWith as A,greaterThanOrEqual as E,notEqual as I,lessThanOrEqual as T,dayLessThanOrEqual as N,dayLessThan as k,dayNotEqual as P,dayEquals as D,dayGreaterThanOrEqual as M,dayGreaterThan as R,association as V,empty as L}from"mendix/filters/builders";import j,{Big as z}from"big.js";function H(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const F=e=>{e&&e.canExecute&&!e.isExecuting&&e.execute()};class K{constructor(e){H(this,"selectionValue",void 0),H(this,"type","Single"),this.selectionValue=e}updateProps(e){this.selectionValue=e}isSelected(e){var t;return(null===(t=this.selectionValue.selection)||void 0===t?void 0:t.id)===e.id}reduceTo(e){this.selectionValue.setSelection(e)}remove(e){this.selectionValue.setSelection(void 0)}}class B{constructor(e,t){H(this,"selectionValue",void 0),H(this,"selectableItems",void 0),H(this,"type","Multi"),H(this,"rangeStart",void 0),H(this,"rangeEnd",void 0),this.selectionValue=e,this.selectableItems=t,this.rangeStart=void 0}isSelected(e){return this.selectionValue.selection.some((t=>t.id===e.id))}updateProps(e,t){this.selectionValue=e,this.selectableItems=t}get selectionStatus(){return 0===this.selectionValue.selection.length?"none":this.selectionValue.selection.length===this.selectableItems.length?"all":"some"}add(e){this._add(e),this._setRangeStart(e),this._setRangeEnd(void 0)}remove(e){this.isSelected(e)&&this.selectionValue.setSelection(this.selectionValue.selection.filter((t=>t.id!==e.id))),this._resetRange()}reduceTo(e){this.selectionValue.setSelection([e]),this._setRangeStart(e),this._setRangeEnd(void 0)}_add(e){this.isSelected(e)||this.selectionValue.setSelection(this.selectionValue.selection.concat(e))}_setRangeStart(e){let t=-1;void 0!==e&&(t=this.selectableItems.indexOf(e)),this.rangeStart=t>-1?t:void 0}_setRangeEnd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)return void(this.rangeEnd=void 0);const[i,r]=t,o=this.rangeEnd,s=this.selectableItems.indexOf(i);this.rangeEnd=s>-1?s:void 0,this._updateSelectionWithRange({start:this.rangeStart,end:o,newEnd:s,selectionMode:r})}_updateSelectionWithRange(e){const{start:t,end:n,newEnd:i,selectionMode:r}=e,o="toggle"===r;if(void 0===t||-1===i||n===i)return;if(void 0===n){let e=this._getRange(t,i);return e=o?this._union(this.selectionValue.selection,e):e,void this.selectionValue.setSelection(e)}const s=this._getRange(t,n),a=this._getRange(t,i);let l=o?[...this.selectionValue.selection]:[];l=this._diff(l,s),l=this._union(l,a),this.selectionValue.setSelection(l)}_getRange(e,t){const n=this.selectableItems.length,[i,r]=[U(e,0,n),U(t,0,n)].sort(((e,t)=>e-t));return this.selectableItems.slice(i,r+1)}_resetRange(){this._setRangeStart(void 0),this._setRangeEnd(void 0)}_union(e,t){const n=[...e],i=new Set(e.map((e=>e.id)));for(const e of t)i.has(e.id)||(i.add(e.id),n.push(e));return n}_diff(e,t){const n=new Set(e),i=new Set(t.map((e=>e.id)));for(const e of n)i.has(e.id)&&n.delete(e);return Array.from(n)}selectAll(){this.selectionValue.setSelection(this.selectableItems),this._resetRange()}selectNone(){this.selectionValue.setSelection([]),this._resetRange()}selectUpTo(e,t){void 0===this.rangeStart?(this._add(e),this._setRangeStart(e)):this._setRangeEnd(e,t)}_findIndexInList(e,t,n){const i=this.selectableItems.length-1,r="forward"===t;if("edge"===n)return r?i:0;return U(r?e+n:e-n,0,i)}_findIndexInGrid(e,t,n){const{columnIndex:i}=function(e,t,n){if(n<0||n>=t)return{columnIndex:-1,rowIndex:-1};const i=n%e,r=function(e,t){return Math.floor(e/t)}(n,e);return{columnIndex:i,rowIndex:r}}(n,this.selectableItems.length,e);return"PageDown"===t?this.selectableItems.length-(n-i):"Home"===t?e-i:"End"===t?e+(n-(i+1)):i}selectUpToAdjacent(e,t,n,i){if(!1===t)return void this._resetRange();const r=this.selectableItems.findIndex((t=>t.id===e.id));let o=-1;if(o="direction"in i?this._findIndexInList(r,i.direction,i.size):this._findIndexInGrid(r,i.code,i.numberOfColumns),o===r)return;void 0===this.rangeStart&&this._setRangeStart(e);const s=this.selectableItems.at(o);s&&this._setRangeEnd(s,n)}}const U=(e,t,n)=>Math.min(Math.max(e,t),n);function W(e,i,r){const o=t([]),s=t(!1);s.current||(s.current="loading"!==(null==i?void 0:i.status)),n((()=>{var t;const n=o.current,i=null!==(t=null==e?void 0:e.selection)&&void 0!==t?t:[],a=Array.isArray(i)?i:[i];(function(e,t){if(e.length!==t.length)return!1;const n=new Set(t.map((e=>e.id)));return e.every((e=>n.has(e.id)))})(n,a)||(o.current=a,s.current&&F(r))}),[null==e?void 0:e.selection,r]);const a=t(void 0);var l,u;void 0!==e&&("Single"===e.type?a.current?a.current.updateProps(e):a.current=new K(e):a.current?a.current.updateProps(e,null!==(l=i.items)&&void 0!==l?l:[]):a.current=new B(e,null!==(u=i.items)&&void 0!==u?u:[]));return a.current}const q=new Set(["KeyA","MetaLeft","MetaRight","ControlLeft","ControlRight"]),G=(e,t)=>{let n=!1;const[i,r]=function(e,t){let n=0,i=0;return[function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];const a=(new Date).getTime()-i,l=()=>{n=0,i=(new Date).getTime(),e(...o)};n||(a>=t?l():n=window.setTimeout(l,t-a))},()=>{clearTimeout(n),n=0}]}((()=>{n=!0,e()}),500);return[{eventName:"onKeyDown",filter:(e,t)=>"Multi"===e.selectionType&&function(e){const t=e.currentTarget===e.target;return"KeyA"===e.code&&(e.metaKey||e.ctrlKey)&&t}(t),handler:i},{eventName:"onKeyUp",filter:(e,t)=>"Multi"===e.selectionType&&q.has(t.code)&&n,handler:()=>{n=!1,r(),null==t||t()}}]};function J(e,t){return t.metaKey||t.ctrlKey?"toggle":e.selectionMode}const X=e=>[{eventName:"onKeyDown",filter:(e,t)=>"ArrowUp"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,J(t,n),{direction:"backward",size:1})},{eventName:"onKeyDown",filter:(e,t)=>"ArrowDown"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,J(t,n),{direction:"forward",size:1})},{eventName:"onKeyDown",filter:(e,t)=>"PageUp"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,J(t,n),{direction:"backward",size:t.pageSize})},{eventName:"onKeyDown",filter:(e,t)=>"PageDown"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,J(t,n),{direction:"forward",size:t.pageSize})},{eventName:"onKeyDown",filter:(e,t)=>"Home"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,J(t,n),{direction:"backward",size:"edge"})},{eventName:"onKeyDown",filter:(e,t)=>"End"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,J(t,n),{direction:"forward",size:"edge"})}],Z="com.mendix.widgets.web.selectable.selectionContext";class Y{constructor(e,t){var n=this;H(this,"selection",void 0),H(this,"selectionHelper",void 0),H(this,"onSelect",(function(){n.selectionHelper&&("Multi"===n.selectionHelper.type?n._onSelectItemMulti(...arguments):n._onSelectItemSingle(...arguments))})),H(this,"_onSelectItemMulti",(function(e,t){var i;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"Multi"===(null===(i=n.selectionHelper)||void 0===i?void 0:i.type)&&(t?n.selectionHelper.selectUpTo(e,r?"toggle":"clear"):n.selectItem(e,r))})),H(this,"_onSelectItemSingle",(function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.selectItem(e,i)})),H(this,"onSelectAll",(e=>{this.selectionHelper&&("Single"!==this.selectionHelper.type?"selectAll"!==e&&"all"===this.selectionHelper.selectionStatus?this.selectionHelper.selectNone():this.selectionHelper.selectAll():console.warn("Datagrid: calling onSelectAll in single selection mode have no effect"))})),H(this,"onSelectAdjacent",(function(){var e;"Multi"===(null===(e=n.selectionHelper)||void 0===e?void 0:e.type)&&n.selectionHelper.selectUpToAdjacent(...arguments)})),H(this,"isSelected",(e=>!!this.selectionHelper&&this.selectionHelper.isSelected(e))),H(this,"selectItem",((e,t)=>{void 0!==this.selectionHelper&&(!1!==t?this.selectionHelper.isSelected(e)?this.selectionHelper.remove(e):"Multi"===this.selectionHelper.type?this.selectionHelper.add(e):this.selectionHelper.reduceTo(e):this.selectionHelper.reduceTo(e))})),this.selection=e,this.selectionHelper=t}get selectionType(){if(void 0===this.selection)return"None";if("object"==typeof this.selection)return this.selection.type;if("None"===this.selection||"Single"===this.selection||"Multi"===this.selection)return this.selection;throw new Error("Unknown selection type: ".concat(this.selection))}}function $(){const e="com.mendix.widgets.web.UUID";return window[e]||(window[e]=1),window[e]++}function Q(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var ee={};function te(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:ee}var ne=Object.assign,ie=Object.getOwnPropertyDescriptor,re=Object.defineProperty,oe=Object.prototype,se=[];Object.freeze(se);var ae={};Object.freeze(ae);var le="undefined"!=typeof Proxy,ue=Object.toString();function ce(){le||Q("Proxy not available")}function de(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var he=function(){};function fe(e){return"function"==typeof e}function ve(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function ge(e){return null!==e&&"object"==typeof e}function pe(e){if(!ge(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===ue}function me(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function _e(e,t,n){re(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function be(e,t,n){re(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function ye(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return ge(e)&&!0===e[n]}}function we(e){return e instanceof Map}function Se(e){return e instanceof Set}var xe=void 0!==Object.getOwnPropertySymbols;var Ce="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:xe?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function Oe(e){return null===e?null:"object"==typeof e?""+e:e}function Ae(e,t){return oe.hasOwnProperty.call(e,t)}var Ee=Object.getOwnPropertyDescriptors||function(e){var t={};return Ce(e).forEach((function(n){t[n]=ie(e,n)})),t};function Ie(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?o:String(o)),i)}var r,o}function Te(e,t,n){return t&&Ie(e.prototype,t),n&&Ie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ne.apply(this,arguments)}function ke(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Pe(e,t)}function Pe(e,t){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pe(e,t)}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Re(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ve=Symbol("mobx-stored-annotations");function Le(e){return Object.assign((function(t,n){if(ze(n))return e.decorate_20223_(t,n);je(t,n,e)}),e)}function je(e,t,n){Ae(e,Ve)||_e(e,Ve,Ne({},e[Ve])),function(e){return e.annotationType_===Ge}(n)||(e[Ve][t]=n)}function ze(e){return"object"==typeof e&&"string"==typeof e.kind}var He=Symbol("mobx administration"),Fe=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Wt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return pn(this)},t.reportChanged=function(){vn(),mn(this),gn()},t.toString=function(){return this.name_},e}(),Ke=ye("Atom",Fe);function Be(e,t,n){void 0===t&&(t=he),void 0===n&&(n=he);var i,r=new Fe(e);return t!==he&&Fn(jn,r,t,i),n!==he&&Hn(r,n),r}var Ue={identity:function(e,t){return e===t},structural:function(e,t){return or(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return or(e,t,1)}};function We(e,t,n){return Qn(e)?e:Array.isArray(e)?Nt.array(e,{name:n}):pe(e)?Nt.object(e,void 0,{name:n}):we(e)?Nt.map(e,{name:n}):Se(e)?Nt.set(e,{name:n}):"function"!=typeof e||Dn(e)||$n(e)?e:me(e)?Zn(e):Pn(n,e)}function qe(e){return e}var Ge="override";function Je(e,t){return{annotationType_:e,options_:t,make_:Xe,extend_:Ze,decorate_20223_:Ye}}function Xe(e,t,n,i){var r;if(null!=(r=this.options_)&&r.bound)return null===this.extend_(e,t,n,!1)?0:1;if(i===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(Dn(n.value))return 1;var o=$e(e,this,t,n,!1);return re(i,t,o),2}function Ze(e,t,n,i){var r=$e(e,this,t,n);return e.defineProperty_(t,r,i)}function Ye(e,t){var n=t.kind,i=t.name,r=t.addInitializer,o=this;if("field"!=n){var s,a,l,u,c,d;if("method"==n)return Dn(e)||(a=e,e=Ht(null!=(l=null==(u=o.options_)?void 0:u.name)?l:i.toString(),a,null!=(c=null==(d=o.options_)?void 0:d.autoAction)&&c)),null!=(s=this.options_)&&s.bound&&r((function(){var e=this,t=e[i].bind(e);t.isMobxAction=!0,e[i]=t})),e;Q("Cannot apply '"+o.annotationType_+"' to '"+String(i)+"' (kind: "+n+"):\n'"+o.annotationType_+"' can only be used on properties with a function value.")}else r((function(){je(this,i,o)}))}function $e(e,t,n,i,r){var o,s,a,l,u,c,d,h;void 0===r&&(r=cn.safeDescriptors),h=i,t.annotationType_,h.value;var f,v=i.value;null!=(o=t.options_)&&o.bound&&(v=v.bind(null!=(f=e.proxy_)?f:e.target_));return{value:Ht(null!=(s=null==(a=t.options_)?void 0:a.name)?s:n.toString(),v,null!=(l=null==(u=t.options_)?void 0:u.autoAction)&&l,null!=(c=t.options_)&&c.bound?null!=(d=e.proxy_)?d:e.target_:void 0),configurable:!r||e.isPlainObject_,enumerable:!1,writable:!r}}function Qe(e,t){return{annotationType_:e,options_:t,make_:et,extend_:tt,decorate_20223_:nt}}function et(e,t,n,i){var r;if(i===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(r=this.options_)&&r.bound&&(!Ae(e.target_,t)||!$n(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if($n(n.value))return 1;var o=it(e,this,t,n,!1,!1);return re(i,t,o),2}function tt(e,t,n,i){var r,o=it(e,this,t,n,null==(r=this.options_)?void 0:r.bound);return e.defineProperty_(t,o,i)}function nt(e,t){var n,i=t.name,r=t.addInitializer;return $n(e)||(e=Zn(e)),null!=(n=this.options_)&&n.bound&&r((function(){var e=this,t=e[i].bind(e);t.isMobXFlow=!0,e[i]=t})),e}function it(e,t,n,i,r,o){var s;void 0===o&&(o=cn.safeDescriptors),s=i,t.annotationType_,s.value;var a,l=i.value;($n(l)||(l=Zn(l)),r)&&((l=l.bind(null!=(a=e.proxy_)?a:e.target_)).isMobXFlow=!0);return{value:l,configurable:!o||e.isPlainObject_,enumerable:!1,writable:!o}}function rt(e,t){return{annotationType_:e,options_:t,make_:ot,extend_:st,decorate_20223_:at}}function ot(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function st(e,t,n,i){var r;return r=n,this.annotationType_,r.get,e.defineComputedProperty_(t,Ne({},this.options_,{get:n.get,set:n.set}),i)}function at(e,t){var n=this,i=t.name;return(0,t.addInitializer)((function(){var t=ji(this)[He],r=Ne({},n.options_,{get:e,context:this});r.name||(r.name="ObservableObject."+i.toString()),t.values_.set(i,new Gt(r))})),function(){return this[He].getObservablePropValue_(i)}}function lt(e,t){return{annotationType_:e,options_:t,make_:ut,extend_:ct,decorate_20223_:dt}}function ut(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function ct(e,t,n,i){var r,o;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(r=null==(o=this.options_)?void 0:o.enhancer)?r:We,i)}function dt(e,t){var n=this,i=t.kind,r=t.name,o=new WeakSet;function s(e,t){var i,s,a=ji(e)[He],l=new Ut(t,null!=(i=null==(s=n.options_)?void 0:s.enhancer)?i:We,"ObservableObject."+r.toString(),!1);a.values_.set(r,l),o.add(e)}if("accessor"==i)return{get:function(){return o.has(this)||s(this,e.get.call(this)),this[He].getObservablePropValue_(r)},set:function(e){return o.has(this)||s(this,e),this[He].setObservablePropValue_(r,e)},init:function(e){return o.has(this)||s(this,e),e}}}var ht="true",ft=vt();function vt(e){return{annotationType_:ht,options_:e,make_:gt,extend_:pt,decorate_20223_:mt}}function gt(e,t,n,i){var r,o,s,a;if(n.get)return Mt.make_(e,t,n,i);if(n.set){var l=Ht(t.toString(),n.set);return i===e.target_?null===e.defineProperty_(t,{configurable:!cn.safeDescriptors||e.isPlainObject_,set:l})?0:2:(re(i,t,{configurable:!0,set:l}),2)}if(i!==e.target_&&"function"==typeof n.value)return me(n.value)?(null!=(a=this.options_)&&a.autoBind?Zn.bound:Zn).make_(e,t,n,i):(null!=(s=this.options_)&&s.autoBind?Pn.bound:Pn).make_(e,t,n,i);var u,c=!1===(null==(r=this.options_)?void 0:r.deep)?Nt.ref:Nt;"function"==typeof n.value&&null!=(o=this.options_)&&o.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return c.make_(e,t,n,i)}function pt(e,t,n,i){var r,o,s;if(n.get)return Mt.extend_(e,t,n,i);if(n.set)return e.defineProperty_(t,{configurable:!cn.safeDescriptors||e.isPlainObject_,set:Ht(t.toString(),n.set)},i);"function"==typeof n.value&&null!=(r=this.options_)&&r.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?Nt.ref:Nt).extend_(e,t,n,i)}function mt(e,t){Q("'"+this.annotationType_+"' cannot be used as a decorator")}var _t={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function bt(e){return e||_t}Object.freeze(_t);var yt=lt("observable"),wt=lt("observable.ref",{enhancer:qe}),St=lt("observable.shallow",{enhancer:function(e,t,n){return null==e||Fi(e)||Ci(e)||ki(e)||Mi(e)?e:Array.isArray(e)?Nt.array(e,{name:n,deep:!1}):pe(e)?Nt.object(e,void 0,{name:n,deep:!1}):we(e)?Nt.map(e,{name:n,deep:!1}):Se(e)?Nt.set(e,{name:n,deep:!1}):void 0}}),xt=lt("observable.struct",{enhancer:function(e,t){return or(e,t)?t:e}}),Ct=Le(yt);function Ot(e){return!0===e.deep?We:!1===e.deep?qe:(t=e.defaultDecorator)&&null!=(n=null==(i=t.options_)?void 0:i.enhancer)?n:We;var t,n,i}function At(e,t,n){return ze(t)?yt.decorate_20223_(e,t):ve(t)?void je(e,t,yt):Qn(e)?e:pe(e)?Nt.object(e,t,n):Array.isArray(e)?Nt.array(e,t):we(e)?Nt.map(e,t):Se(e)?Nt.set(e,t):"object"==typeof e&&null!==e?e:Nt.box(e,t)}ne(At,Ct);var Et,It,Tt={box:function(e,t){var n=bt(t);return new Ut(e,Ot(n),n.name,!0,n.equals)},array:function(e,t){var n=bt(t);return(!1===cn.useProxies||!1===n.proxy?Qi:gi)(e,Ot(n),n.name)},map:function(e,t){var n=bt(t);return new Ni(e,Ot(n),n.name)},set:function(e,t){var n=bt(t);return new Di(e,Ot(n),n.name)},object:function(e,t,n){return ir((function(){return Un(!1===cn.useProxies||!1===(null==n?void 0:n.proxy)?ji({},n):function(e,t){var n,i;return ce(),e=ji(e,t),null!=(i=(n=e[He]).proxy_)?i:n.proxy_=new Proxy(e,ni)}({},n),e,t)}))},ref:Le(wt),shallow:Le(St),deep:Ct,struct:Le(xt)},Nt=ne(At,Tt),kt="computed",Pt=rt(kt),Dt=rt("computed.struct",{equals:Ue.structural}),Mt=function(e,t){if(ze(t))return Pt.decorate_20223_(e,t);if(ve(t))return je(e,t,Pt);if(pe(e))return Le(rt(kt,e));var n=pe(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Gt(n)};Object.assign(Mt,Pt),Mt.struct=Le(Dt);var Rt,Vt=0,Lt=1,jt=null!=(Et=null==(It=ie((function(){}),"name"))?void 0:It.configurable)&&Et,zt={value:"action",configurable:!0,writable:!1,enumerable:!1};function Ht(e,t,n,i){function r(){return function(e,t,n,i,r){var o=function(e,t){var n=!1,i=0,r=cn.trackingDerivation,o=!t||!r;vn();var s=cn.allowStateChanges;o&&(tn(),s=Ft(!0));var a=rn(!0),l={runAsAction_:o,prevDerivation_:r,prevAllowStateChanges_:s,prevAllowStateReads_:a,notifySpy_:n,startTime_:i,actionId_:Lt++,parentActionId_:Vt};return Vt=l.actionId_,l}(0,t);try{return n.apply(i,r)}catch(e){throw o.error_=e,e}finally{!function(e){Vt!==e.actionId_&&Q(30);Vt=e.parentActionId_,void 0!==e.error_&&(cn.suppressReactionErrors=!0);Kt(e.prevAllowStateChanges_),on(e.prevAllowStateReads_),gn(),e.runAsAction_&&nn(e.prevDerivation_);cn.suppressReactionErrors=!1}(o)}}(0,n,t,i||this,arguments)}return void 0===n&&(n=!1),r.isMobxAction=!0,r.toString=function(){return t.toString()},jt&&(zt.value=e,re(r,"name",zt)),r}function Ft(e){var t=cn.allowStateChanges;return cn.allowStateChanges=e,t}function Kt(e){cn.allowStateChanges=e}Rt=Symbol.toPrimitive;var Bt,Ut=function(e){function t(t,n,i,r,o){var s;return void 0===i&&(i="ObservableValue"),void 0===o&&(o=Ue.default),(s=e.call(this,i)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=i,s.equals=o,s.value_=n(t,void 0,i),s}ke(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==cn.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(ii(this)){var t=oi(this,{object:this,type:hi,newValue:e});if(!t)return cn.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?cn.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),si(this)&&li(this,{type:hi,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return ri(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:hi,newValue:this.value_,oldValue:void 0}),ai(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return Oe(this.get())},n[Rt]=function(){return this.valueOf()},t}(Fe);Bt=Symbol.toPrimitive;var Wt,qt,Gt=function(){function e(e){this.dependenciesState_=Wt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Wt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Xt(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=qt.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||Q(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Ht("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?Ue.structural:Ue.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==Wt.UP_TO_DATE_)return;e.lowestObserverState_=Wt.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Wt.UP_TO_DATE_&&(e.dependenciesState_=Wt.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&Q(32,this.name_,this.derivation),0!==cn.inBatch||0!==this.observers_.size||this.keepAlive_){if(pn(this),Yt(this)){var e=cn.trackingContext;this.keepAlive_&&!e&&(cn.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===Wt.STALE_)return;e.lowestObserverState_=Wt.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===Wt.POSSIBLY_STALE_?t.dependenciesState_=Wt.STALE_:t.dependenciesState_===Wt.UP_TO_DATE_&&(e.lowestObserverState_=Wt.UP_TO_DATE_)}))}(this),cn.trackingContext=e}}else Yt(this)&&(this.warnAboutUntrackedRead_(),vn(),this.value_=this.computeValue_(!1),gn());var t=this.value_;if(Zt(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&Q(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else Q(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===Wt.NOT_TRACKING_,n=this.computeValue_(!0),i=t||Zt(e)||Zt(n)||!this.equals_(e,n);return i&&(this.value_=n),i},t.computeValue_=function(e){this.isComputing_=!0;var t,n=Ft(!1);if(e)t=$t(this,this.derivation,this.scope_);else if(!0===cn.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new Xt(e)}return Kt(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(Qt(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,i=!0,r=void 0;return Mn((function(){var o=n.get();if(!i||t){var s=tn();e({observableKind:"computed",debugObjectName:n.name_,type:hi,object:n,newValue:o,oldValue:r}),nn(s)}i=!1,r=o}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return Oe(this.get())},t[Bt]=function(){return this.valueOf()},e}(),Jt=ye("ComputedValue",Gt);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(Wt||(Wt={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(qt||(qt={}));var Xt=function(e){this.cause=void 0,this.cause=e};function Zt(e){return e instanceof Xt}function Yt(e){switch(e.dependenciesState_){case Wt.UP_TO_DATE_:return!1;case Wt.NOT_TRACKING_:case Wt.STALE_:return!0;case Wt.POSSIBLY_STALE_:for(var t=rn(!0),n=tn(),i=e.observing_,r=i.length,o=0;o<r;o++){var s=i[o];if(Jt(s)){if(cn.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return nn(n),on(t),!0}if(e.dependenciesState_===Wt.STALE_)return nn(n),on(t),!0}}return sn(e),nn(n),on(t),!1}}function $t(e,t,n){var i=rn(!0);sn(e),e.newObserving_=new Array(0===e.runId_?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++cn.runId;var r,o=cn.trackingDerivation;if(cn.trackingDerivation=e,cn.inBatch++,!0===cn.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(e){r=new Xt(e)}return cn.inBatch--,cn.trackingDerivation=o,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,i=Wt.UP_TO_DATE_,r=0,o=e.unboundDepsCount_,s=0;s<o;s++){var a=n[s];0===a.diffValue_&&(a.diffValue_=1,r!==s&&(n[r]=a),r++),a.dependenciesState_>i&&(i=a.dependenciesState_)}n.length=r,e.newObserving_=null,o=t.length;for(;o--;){var l=t[o];0===l.diffValue_&&hn(l,e),l.diffValue_=0}for(;r--;){var u=n[r];1===u.diffValue_&&(u.diffValue_=0,dn(u,e))}i!==Wt.UP_TO_DATE_&&(e.dependenciesState_=i,e.onBecomeStale_())}(e),on(i),r}function Qt(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)hn(t[n],e);e.dependenciesState_=Wt.NOT_TRACKING_}function en(e){var t=tn();try{return e()}finally{nn(t)}}function tn(){var e=cn.trackingDerivation;return cn.trackingDerivation=null,e}function nn(e){cn.trackingDerivation=e}function rn(e){var t=cn.allowStateReads;return cn.allowStateReads=e,t}function on(e){cn.allowStateReads=e}function sn(e){if(e.dependenciesState_!==Wt.UP_TO_DATE_){e.dependenciesState_=Wt.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=Wt.UP_TO_DATE_}}var an=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},ln=!0,un=!1,cn=function(){var e=te();return e.__mx_isolated_mobxInstanceCount>0&&!e.__mx_isolated_mobxGlobals&&(ln=!1),e.__mx_isolated_mobxGlobals&&e.__mx_isolated_mobxGlobals.version!==(new an).version&&(ln=!1),ln?e.__mx_isolated_mobxGlobals?(e.__mx_isolated_mobxInstanceCount+=1,e.__mx_isolated_mobxGlobals.UNCHANGED||(e.__mx_isolated_mobxGlobals.UNCHANGED={}),e.__mx_isolated_mobxGlobals):(e.__mx_isolated_mobxInstanceCount=1,e.__mx_isolated_mobxGlobals=new an):(setTimeout((function(){un||Q(35)}),1),new an)}();function dn(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function hn(e,t){e.observers_.delete(t),0===e.observers_.size&&fn(e)}function fn(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,cn.pendingUnobservations.push(e))}function vn(){cn.inBatch++}function gn(){if(0==--cn.inBatch){wn();for(var e=cn.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Gt&&n.suspend_())}cn.pendingUnobservations=[]}}function pn(e){var t=cn.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&cn.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&cn.inBatch>0&&fn(e),!1)}function mn(e){e.lowestObserverState_!==Wt.STALE_&&(e.lowestObserverState_=Wt.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Wt.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Wt.STALE_})))}var _n=function(){function e(e,t,n,i){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Wt.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=qt.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=i}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,cn.pendingReactions.push(this),wn())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){vn(),this.isScheduled_=!1;var e=cn.trackingContext;if(cn.trackingContext=this,Yt(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}cn.trackingContext=e,gn()}},t.track=function(e){if(!this.isDisposed_){vn(),this.isRunning_=!0;var t=cn.trackingContext;cn.trackingContext=this;var n=$t(this,e,void 0);cn.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Qt(this),Zt(n)&&this.reportExceptionInDerivation_(n.cause),gn()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(cn.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";cn.suppressReactionErrors||console.error(n,e),cn.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(vn(),Qt(this),gn()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",n)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[He]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){},e}(),bn=100,yn=function(e){return e()};function wn(){cn.inBatch>0||cn.isRunningReactions||yn(Sn)}function Sn(){cn.isRunningReactions=!0;for(var e=cn.pendingReactions,t=0;e.length>0;){++t===bn&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction_()}cn.isRunningReactions=!1}var xn=ye("Reaction",_n);var Cn="action",On="autoAction",An=Je(Cn),En=Je("action.bound",{bound:!0}),In=Je(On,{autoAction:!0}),Tn=Je("autoAction.bound",{autoAction:!0,bound:!0});function Nn(e){return function(t,n){return fe(t)?Ht(t.name||"<unnamed action>",t,e):fe(n)?Ht(t,n,e):ze(n)?(e?In:An).decorate_20223_(t,n):ve(n)?je(t,n,e?In:An):ve(t)?Le(Je(e?On:Cn,{name:t,autoAction:e})):void 0}}var kn=Nn(!1);Object.assign(kn,An);var Pn=Nn(!0);function Dn(e){return fe(e)&&!0===e.isMobxAction}function Mn(e,t){var n,i,r,o,s;void 0===t&&(t=ae);var a,l=null!=(n=null==(i=t)?void 0:i.name)?n:"Autorun";if(!t.scheduler&&!t.delay)a=new _n(l,(function(){this.track(d)}),t.onError,t.requiresObservable);else{var u=Vn(t),c=!1;a=new _n(l,(function(){c||(c=!0,u((function(){c=!1,a.isDisposed_||a.track(d)})))}),t.onError,t.requiresObservable)}function d(){e(a)}return null!=(r=t)&&null!=(o=r.signal)&&o.aborted||a.schedule_(),a.getDisposer_(null==(s=t)?void 0:s.signal)}Object.assign(Pn,In),kn.bound=Le(En),Pn.bound=Le(Tn);var Rn=function(e){return e()};function Vn(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Rn}function Ln(e,t,n){var i,r,o,s;void 0===n&&(n=ae);var a,l,u,c=null!=(i=n.name)?i:"Reaction",d=kn(c,n.onError?(a=n.onError,l=t,function(){try{return l.apply(this,arguments)}catch(e){a.call(this,e)}}):t),h=!n.scheduler&&!n.delay,f=Vn(n),v=!0,g=!1,p=n.compareStructural?Ue.structural:n.equals||Ue.default,m=new _n(c,(function(){v||h?_():g||(g=!0,f(_))}),n.onError,n.requiresObservable);function _(){if(g=!1,!m.isDisposed_){var t=!1,i=u;m.track((function(){var n=function(e,t){var n=Ft(e);try{return t()}finally{Kt(n)}}(!1,(function(){return e(m)}));t=v||!p(u,n),u=n})),(v&&n.fireImmediately||!v&&t)&&d(u,i,m),v=!1}}return null!=(r=n)&&null!=(o=r.signal)&&o.aborted||m.schedule_(),m.getDisposer_(null==(s=n)?void 0:s.signal)}var jn="onBO",zn="onBUO";function Hn(e,t,n){return Fn(zn,e,t,n)}function Fn(e,t,n,i){var r="function"==typeof i?er(t,n):er(t),o=fe(i)?i:n,s=e+"L";return r[s]?r[s].add(o):r[s]=new Set([o]),function(){var e=r[s];e&&(e.delete(o),0===e.size&&delete r[s])}}var Kn="always";function Bn(e){!0===e.isolateGlobalState&&function(){if((cn.pendingReactions.length||cn.inBatch||cn.isRunningReactions)&&Q(36),un=!0,ln){var e=te();0==--e.__mx_isolated_mobxInstanceCount&&(e.__mx_isolated_mobxGlobals=void 0),cn=new an}}();var t,n,i=e.useProxies,r=e.enforceActions;if(void 0!==i&&(cn.useProxies=i===Kn||"never"!==i&&"undefined"!=typeof Proxy),"ifavailable"===i&&(cn.verifyProxies=!0),void 0!==r){var o=r===Kn?Kn:"observed"===r;cn.enforceActions=o,cn.allowStateChanges=!0!==o&&o!==Kn}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(cn[t]=!!e[t])})),cn.allowStateReads=!cn.observableRequiresReaction,e.reactionScheduler&&(t=e.reactionScheduler,n=yn,yn=function(e){return t((function(){return n(e)}))})}function Un(e,t,n,i){var r=Ee(t);return ir((function(){var t=ji(e,i)[He];Ce(r).forEach((function(e){t.extend_(e,r[e],!n||(!(e in n)||n[e]))}))})),e}function Wn(e){var t,n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=(t=e.observing_,Array.from(new Set(t))).map(Wn)),n}var qn=0;function Gn(){this.message="FLOW_CANCELLED"}Gn.prototype=Object.create(Error.prototype);var Jn=Qe("flow"),Xn=Qe("flow.bound",{bound:!0}),Zn=Object.assign((function(e,t){if(ze(t))return Jn.decorate_20223_(e,t);if(ve(t))return je(e,t,Jn);var n=e,i=n.name||"<unnamed flow>",r=function(){var e,t=arguments,r=++qn,o=kn(i+" - runid: "+r+" - init",n).apply(this,t),s=void 0,a=new Promise((function(t,n){var a=0;function l(e){var t;s=void 0;try{t=kn(i+" - runid: "+r+" - yield "+a++,o.next).call(o,e)}catch(e){return n(e)}c(t)}function u(e){var t;s=void 0;try{t=kn(i+" - runid: "+r+" - yield "+a++,o.throw).call(o,e)}catch(e){return n(e)}c(t)}function c(e){if(!fe(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(l,u);e.then(c,n)}e=n,l(void 0)}));return a.cancel=kn(i+" - runid: "+r+" - cancel",(function(){try{s&&Yn(s);var t=o.return(void 0),n=Promise.resolve(t.value);n.then(he,he),Yn(n),e(new Gn)}catch(t){e(t)}})),a};return r.isMobXFlow=!0,r}),Jn);function Yn(e){fe(e.cancel)&&e.cancel()}function $n(e){return!0===(null==e?void 0:e.isMobXFlow)}function Qn(e){return function(e,t){return!!e&&(void 0!==t?!!Fi(e)&&e[He].values_.has(t):Fi(e)||!!e[He]||Ke(e)||xn(e)||Jt(e))}(e)}function ei(e,t){void 0===t&&(t=void 0),vn();try{return e.apply(t)}finally{gn()}}function ti(e){return e[He]}Zn.bound=Le(Xn);var ni={has:function(e,t){return ti(e).has_(t)},get:function(e,t){return ti(e).get_(t)},set:function(e,t,n){var i;return!!ve(t)&&(null==(i=ti(e).set_(t,n,!0))||i)},deleteProperty:function(e,t){var n;return!!ve(t)&&(null==(n=ti(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var i;return null==(i=ti(e).defineProperty_(t,n))||i},ownKeys:function(e){return ti(e).ownKeys_()},preventExtensions:function(e){Q(13)}};function ii(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function ri(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),de((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function oi(e,t){var n=tn();try{for(var i=[].concat(e.interceptors_||[]),r=0,o=i.length;r<o&&((t=i[r](t))&&!t.type&&Q(14),t);r++);return t}finally{nn(n)}}function si(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function ai(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),de((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function li(e,t){var n=tn(),i=e.changeListeners_;if(i){for(var r=0,o=(i=i.slice()).length;r<o;r++)i[r](t);nn(n)}}function ui(e,t,n){return ir((function(){var i=ji(e,n)[He];null!=t||(t=function(e){return Ae(e,Ve)||_e(e,Ve,Ne({},e[Ve])),e[Ve]}(e)),Ce(t).forEach((function(e){return i.make_(e,t[e])}))})),e}var ci=Symbol("mobx-keys");var di="splice",hi="update",fi={get:function(e,t){var n=e[He];return t===He?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?Ae(pi,t)?pi[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var i=e[He];return"length"===t&&i.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:i.set_(parseInt(t),n),!0},preventExtensions:function(){Q(15)}},vi=function(){function e(e,t,n,i){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=i,this.atom_=new Fe(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return ri(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),ai(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&Q("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),i=0;i<e-t;i++)n[i]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&Q(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&$i(e+t+1)},t.spliceWithArray_=function(e,t,n){var i=this;this.atom_;var r=this.values_.length;if(void 0===e?e=0:e>r?e=r:e<0&&(e=Math.max(0,r+e)),t=1===arguments.length?r-e:null==t?0:Math.max(0,Math.min(t,r-e)),void 0===n&&(n=se),ii(this)){var o=oi(this,{object:this.proxy_,type:di,index:e,removedCount:t,added:n});if(!o)return se;t=o.removedCount,n=o.added}if(n=0===n.length?n:n.map((function(e){return i.enhancer_(e,void 0)})),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(r,s)}var a=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,a),this.dehanceValues_(a)},t.spliceItemsIntoValues_=function(e,t,n){var i;if(n.length<1e4)return(i=this.values_).splice.apply(i,[e,t].concat(n));var r=this.values_.slice(e,e+t),o=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var a=0;a<o.length;a++)this.values_[e+n.length+a]=o[a];return r},t.notifyArrayChildUpdate_=function(e,t,n){var i=!this.owned_&&!1,r=si(this),o=r||i?{observableKind:"array",object:this.proxy_,type:hi,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),r&&li(this,o)},t.notifyArraySplice_=function(e,t,n){var i=!this.owned_&&!1,r=si(this),o=r||i?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:di,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),r&&li(this,o)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&Q(17,e,n.length),e<n.length){this.atom_;var i=n[e];if(ii(this)){var r=oi(this,{type:hi,object:this.proxy_,index:e,newValue:t});if(!r)return;t=r.newValue}(t=this.enhancer_(t,i))!==i&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,i))}else{for(var o=new Array(e+1-n.length),s=0;s<o.length-1;s++)o[s]=void 0;o[o.length-1]=t,this.spliceWithArray_(n.length,0,o)}},e}();function gi(e,t,n,i){return void 0===n&&(n="ObservableArray"),void 0===i&&(i=!1),ce(),ir((function(){var r=new vi(n,t,i,!1);be(r.values_,He,r);var o=new Proxy(r.values_,fi);return r.proxy_=o,e&&e.length&&r.spliceWithArray_(0,0,e),o}))}var pi={clear:function(){return this.splice(0)},replace:function(e){var t=this[He];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var o=this[He];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(e);case 2:return o.spliceWithArray_(e,t)}return o.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,n){return this[He].spliceWithArray_(e,t,n)},push:function(){for(var e=this[He],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[He].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[He],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return cn.trackingDerivation&&Q(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){cn.trackingDerivation&&Q(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[He],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function mi(e,t){"function"==typeof Array.prototype[e]&&(pi[e]=t(e))}function _i(e){return function(){var t=this[He];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function bi(e){return function(t,n){var i=this,r=this[He];return r.atom_.reportObserved(),r.dehanceValues_(r.values_)[e]((function(e,r){return t.call(n,e,r,i)}))}}function yi(e){return function(){var t=this,n=this[He];n.atom_.reportObserved();var i=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(e,n,i){return r(e,n,i,t)},i[e].apply(i,arguments)}}mi("at",_i),mi("concat",_i),mi("flat",_i),mi("includes",_i),mi("indexOf",_i),mi("join",_i),mi("lastIndexOf",_i),mi("slice",_i),mi("toString",_i),mi("toLocaleString",_i),mi("toSorted",_i),mi("toSpliced",_i),mi("with",_i),mi("every",bi),mi("filter",bi),mi("find",bi),mi("findIndex",bi),mi("findLast",bi),mi("findLastIndex",bi),mi("flatMap",bi),mi("forEach",bi),mi("map",bi),mi("some",bi),mi("toReversed",bi),mi("reduce",yi),mi("reduceRight",yi);var wi,Si,xi=ye("ObservableArrayAdministration",vi);function Ci(e){return ge(e)&&xi(e[He])}var Oi={},Ai="add",Ei="delete";wi=Symbol.iterator,Si=Symbol.toStringTag;var Ii,Ti,Ni=function(){function e(e,t,n){var i=this;void 0===t&&(t=We),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[He]=Oi,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,fe(Map)||Q(18),ir((function(){i.keysAtom_=Be("ObservableMap.keys()"),i.data_=new Map,i.hasMap_=new Map,e&&i.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!cn.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var i=n=new Ut(this.has_(e),qe,"ObservableMap.key?",!1);this.hasMap_.set(e,i),Hn(i,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(ii(this)){var i=oi(this,{type:n?hi:Ai,object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,ii(this))&&!oi(this,{type:Ei,object:this,name:e}))return!1;if(this.has_(e)){var n=si(this),i=n?{observableKind:"map",debugObjectName:this.name_,type:Ei,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return ei((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&li(this,i),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==cn.UNCHANGED){var i=si(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:hi,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&li(this,r)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,ei((function(){var i,r=new Ut(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,r),t=r.value_,null==(i=n.hasMap_.get(e))||i.setNewValue_(!0),n.keysAtom_.reportChanged()}));var i=si(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:Ai,object:this,name:e,newValue:t}:null;i&&li(this,r)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return lr({next:function(){var n=t.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:e.get(r)}}})},t.entries=function(){var e=this,t=this.keys();return lr({next:function(){var n=t.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:[r,e.get(r)]}}})},t[wi]=function(){return this.entries()},t.forEach=function(e,t){for(var n,i=Re(this);!(n=i()).done;){var r=n.value,o=r[0],s=r[1];e.call(t,s,o,this)}},t.merge=function(e){var t=this;return ki(e)&&(e=new Map(e)),ei((function(){pe(e)?function(e){var t=Object.keys(e);if(!xe)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return oe.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],i=e[1];return t.set(n,i)})):we(e)?(e.constructor!==Map&&Q(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&Q(20,e)})),this},t.clear=function(){var e=this;ei((function(){en((function(){for(var t,n=Re(e.keys());!(t=n()).done;){var i=t.value;e.delete(i)}}))}))},t.replace=function(e){var t=this;return ei((function(){for(var n,i=function(e){if(we(e)||ki(e))return e;if(Array.isArray(e))return new Map(e);if(pe(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return Q(21,e)}(e),r=new Map,o=!1,s=Re(t.data_.keys());!(n=s()).done;){var a=n.value;if(!i.has(a))if(t.delete(a))o=!0;else{var l=t.data_.get(a);r.set(a,l)}}for(var u,c=Re(i.entries());!(u=c()).done;){var d=u.value,h=d[0],f=d[1],v=t.data_.has(h);if(t.set(h,f),t.data_.has(h)){var g=t.data_.get(h);r.set(h,g),v||(o=!0)}}if(!o)if(t.data_.size!==r.size)t.keysAtom_.reportChanged();else for(var p=t.data_.keys(),m=r.keys(),_=p.next(),b=m.next();!_.done;){if(_.value!==b.value){t.keysAtom_.reportChanged();break}_=p.next(),b=m.next()}t.data_=r})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return ai(this,e)},t.intercept_=function(e){return ri(this,e)},Te(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Si,get:function(){return"Map"}}]),e}(),ki=ye("ObservableMap",Ni);var Pi={};Ii=Symbol.iterator,Ti=Symbol.toStringTag;var Di=function(){function e(e,t,n){var i=this;void 0===t&&(t=We),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[He]=Pi,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,fe(Set)||Q(22),this.enhancer_=function(e,i){return t(e,i,n)},ir((function(){i.atom_=Be(i.name_),e&&i.replace(e)}))}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;ei((function(){en((function(){for(var t,n=Re(e.data_.values());!(t=n()).done;){var i=t.value;e.delete(i)}}))}))},t.forEach=function(e,t){for(var n,i=Re(this);!(n=i()).done;){var r=n.value;e.call(t,r,r,this)}},t.add=function(e){var t=this;if((this.atom_,ii(this))&&!oi(this,{type:Ai,object:this,newValue:e}))return this;if(!this.has(e)){ei((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=si(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:Ai,object:this,newValue:e}:null;n&&li(this,i)}return this},t.delete=function(e){var t=this;if(ii(this)&&!oi(this,{type:Ei,object:this,oldValue:e}))return!1;if(this.has(e)){var n=si(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:Ei,object:this,oldValue:e}:null;return ei((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&li(this,i),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return lr({next:function(){var i=e;return e+=1,i<n.length?{value:[t[i],n[i]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return lr({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return Mi(e)&&(e=new Set(e)),ei((function(){Array.isArray(e)||Se(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&Q("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return ai(this,e)},t.intercept_=function(e){return ri(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Ii]=function(){return this.values()},Te(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Ti,get:function(){return"Set"}}]),e}(),Mi=ye("ObservableSet",Di),Ri=Object.create(null),Vi="remove",Li=function(){function e(e,t,n,i){void 0===t&&(t=new Map),void 0===i&&(i=ft),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=i,this.keysAtom_=new Fe("ObservableObject.keys"),this.isPlainObject_=pe(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof Gt)return n.set(t),!0;if(ii(this)){var i=oi(this,{type:hi,object:this.proxy_||this.target_,name:e,newValue:t});if(!i)return null;t=i.newValue}if((t=n.prepareNewValue_(t))!==cn.UNCHANGED){var r=si(this),o=r?{type:hi,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&li(this,o)}return!0},t.get_=function(e){return cn.trackingDerivation&&!Ae(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),Ae(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!cn.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new Ut(e in this.target_,qe,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[Ve])&&n[e])return;Q(1,t.annotationType_,this.name_+"."+e.toString())}for(var i=this.target_;i&&i!==oe;){var r=ie(i,e);if(r){var o=t.make_(this,e,r,i);if(0===o)return;if(1===o)break}i=Object.getPrototypeOf(i)}Ki(this,t,e)}},t.extend_=function(e,t,n,i){if(void 0===i&&(i=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,i);var r=n.extend_(this,e,t,i);return r&&Ki(this,n,e),r},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{vn();var i=this.delete_(e);if(!i)return i;if(ii(this)){var r=oi(this,{object:this.proxy_||this.target_,name:e,type:Ai,newValue:t.value});if(!r)return null;var o=r.newValue;t.value!==o&&(t=Ne({},t,{value:o}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else re(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{gn()}return!0},t.defineObservableProperty_=function(e,t,n,i){void 0===i&&(i=!1),this.keysAtom_;try{vn();var r=this.delete_(e);if(!r)return r;if(ii(this)){var o=oi(this,{object:this.proxy_||this.target_,name:e,type:Ai,newValue:t});if(!o)return null;t=o.newValue}var s=Hi(e),a={configurable:!cn.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(i){if(!Reflect.defineProperty(this.target_,e,a))return!1}else re(this.target_,e,a);var l=new Ut(t,n,"ObservableObject.key",!1);this.values_.set(e,l),this.notifyPropertyAddition_(e,l.value_)}finally{gn()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{vn();var i=this.delete_(e);if(!i)return i;if(ii(this))if(!oi(this,{object:this.proxy_||this.target_,name:e,type:Ai,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var r=Hi(e),o={configurable:!cn.safeDescriptors||this.isPlainObject_,enumerable:!1,get:r.get,set:r.set};if(n){if(!Reflect.defineProperty(this.target_,e,o))return!1}else re(this.target_,e,o);this.values_.set(e,new Gt(t)),this.notifyPropertyAddition_(e,void 0)}finally{gn()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!Ae(this.target_,e))return!0;if(ii(this)&&!oi(this,{object:this.proxy_||this.target_,name:e,type:Vi}))return null;try{var n,i;vn();var r,o=si(this),s=this.values_.get(e),a=void 0;if(!s&&o)a=null==(r=ie(this.target_,e))?void 0:r.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof Ut&&(a=s.value_),mn(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(i=n.get(e))||i.set(e in this.target_),o){var l={type:Vi,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:a,name:e};0,o&&li(this,l)}}finally{gn()}return!0},t.observe_=function(e,t){return ai(this,e)},t.intercept_=function(e){return ri(this,e)},t.notifyPropertyAddition_=function(e,t){var n,i,r=si(this);if(r){var o=r?{type:Ai,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;r&&li(this,o)}null==(n=this.pendingKeys_)||null==(i=n.get(e))||i.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Ce(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function ji(e,t){var n;if(Ae(e,He))return e;var i=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",r=new Li(e,new Map,String(i),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:vt(e):void 0}(t));return _e(e,He,r),e}var zi=ye("ObservableObjectAdministration",Li);function Hi(e){return Ri[e]||(Ri[e]={get:function(){return this[He].getObservablePropValue_(e)},set:function(t){return this[He].setObservablePropValue_(e,t)}})}function Fi(e){return!!ge(e)&&zi(e[He])}function Ki(e,t,n){var i;null==(i=e.target_[Ve])||delete i[n]}var Bi,Ui,Wi=Zi(0),qi=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),Gi=0,Ji=function(){};Bi=Ji,Ui=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Bi.prototype,Ui):void 0!==Bi.prototype.__proto__?Bi.prototype.__proto__=Ui:Bi.prototype=Ui;var Xi=function(e,t,n){function i(t,n,i,r){var o;return void 0===i&&(i="ObservableArray"),void 0===r&&(r=!1),o=e.call(this)||this,ir((function(){var e=new vi(i,n,r,!0);e.proxy_=De(o),be(De(o),He,e),t&&t.length&&o.spliceWithArray(0,0,t),qi&&Object.defineProperty(De(o),"0",Wi)})),o}ke(i,e);var r=i.prototype;return r.concat=function(){this[He].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return Ci(e)?e.slice():e})))},r[n]=function(){var e=this,t=0;return lr({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},Te(i,[{key:"length",get:function(){return this[He].getArrayLength_()},set:function(e){this[He].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),i}(Ji,Symbol.toStringTag,Symbol.iterator);function Zi(e){return{enumerable:!1,configurable:!0,get:function(){return this[He].get_(e)},set:function(t){this[He].set_(e,t)}}}function Yi(e){re(Xi.prototype,""+e,Zi(e))}function $i(e){if(e>Gi){for(var t=Gi;t<e+100;t++)Yi(t);Gi=e}}function Qi(e,t,n){return new Xi(e,t,n)}function er(e,t){if("object"==typeof e&&null!==e){if(Ci(e))return void 0!==t&&Q(23),e[He].atom_;if(Mi(e))return e.atom_;if(ki(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||Q(25,t,nr(e)),n}if(Fi(e)){if(!t)return Q(26);var i=e[He].values_.get(t);return i||Q(27,t,nr(e)),i}if(Ke(e)||Jt(e)||xn(e))return e}else if(fe(e)&&xn(e[He]))return e[He];Q(28)}function tr(e,t){return e||Q(29),void 0!==t?tr(er(e,t)):Ke(e)||Jt(e)||xn(e)||ki(e)||Mi(e)?e:e[He]?e[He]:void Q(24,e)}function nr(e,t){var n;if(void 0!==t)n=er(e,t);else{if(Dn(e))return e.name;n=Fi(e)||ki(e)||Mi(e)?tr(e):er(e)}return n.name_}function ir(e){var t=tn(),n=Ft(!0);vn();try{return e()}finally{gn(),Kt(n),nn(t)}}Object.entries(pi).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&_e(Xi.prototype,t,n)})),$i(1e3);var rr=oe.toString;function or(e,t,n){return void 0===n&&(n=-1),sr(e,t,n)}function sr(e,t,n,i,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;if("function"!==o&&"object"!==o&&"object"!=typeof t)return!1;var s=rr.call(e);if(s!==rr.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=ar(e),t=ar(t);var a="[object Array]"===s;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,u=t.constructor;if(l!==u&&!(fe(l)&&l instanceof l&&fe(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),r=r||[];for(var c=(i=i||[]).length;c--;)if(i[c]===e)return r[c]===t;if(i.push(e),r.push(t),a){if((c=e.length)!==t.length)return!1;for(;c--;)if(!sr(e[c],t[c],n-1,i,r))return!1}else{var d,h=Object.keys(e);if(c=h.length,Object.keys(t).length!==c)return!1;for(;c--;)if(!Ae(t,d=h[c])||!sr(e[d],t[d],n-1,i,r))return!1}return i.pop(),r.pop(),!0}function ar(e){return Ci(e)?e.slice():we(e)||ki(e)||Se(e)||Mi(e)?Array.from(e.entries()):e}function lr(e){return e[Symbol.iterator]=ur,e}function ur(){return this}if(["Symbol","Map","Set"].forEach((function(e){void 0===te()[e]&&Q("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:nr},$mobx:He}),!s)throw new Error("mobx-react-lite requires React with Hooks support");if(!ui)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function cr(e){e()}function dr(e){return Wn(er(e,t));var t}var hr,fr,vr=function(){function e(e){var t=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=1e4),clearTimeout(t.sweepTimeout),t.sweepTimeout=void 0;var n=Date.now();t.registrations.forEach((function(i,r){n-i.registeredAt>=e&&(t.finalize(i.value),t.registrations.delete(r))})),t.registrations.size>0&&t.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.registrations.set(n,{value:t,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),e}(),gr=new("undefined"!=typeof FinalizationRegistry?FinalizationRegistry:vr)((function(e){var t;null===(t=e.reaction)||void 0===t||t.dispose(),e.reaction=null}));function pr(e){e.reaction=new _n("observer".concat(e.name),(function(){var t;e.stateVersion=Symbol(),null===(t=e.onStoreChange)||void 0===t||t.call(e)}))}var mr="function"==typeof Symbol&&Symbol.for,_r=null!==(fr=null===(hr=Object.getOwnPropertyDescriptor((function(){}),"name"))||void 0===hr?void 0:hr.configurable)&&void 0!==fr&&fr,br=mr?Symbol.for("react.forward_ref"):"function"==typeof a&&a((function(e){return null})).$$typeof,yr=mr?Symbol.for("react.memo"):"function"==typeof l&&l((function(e){return null})).$$typeof;function wr(t,n){var i;if(yr&&t.$$typeof===yr)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var r=null!==(i=null==n?void 0:n.forwardRef)&&void 0!==i&&i,o=t,s=t.displayName||t.name;if(br&&t.$$typeof===br&&(r=!0,"function"!=typeof(o=t.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var u,c,d=function(t,n){return function(t,n){void 0===n&&(n="observed");var i=e.useRef(null);if(!i.current){var r={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:n,subscribe:function(e){return gr.unregister(r),r.onStoreChange=e,r.reaction||(pr(r),r.stateVersion=Symbol()),function(){var e;r.onStoreChange=null,null===(e=r.reaction)||void 0===e||e.dispose(),r.reaction=null}},getSnapshot:function(){return r.stateVersion}};i.current=r}var o,s,a=i.current;if(a.reaction||(pr(a),gr.register(i,a,a)),e.useDebugValue(a.reaction,dr),e.useSyncExternalStore(a.subscribe,a.getSnapshot,a.getSnapshot),a.reaction.track((function(){try{o=t()}catch(e){s=e}})),s)throw s;return o}((function(){return o(t,n)}),s)};return d.displayName=t.displayName,_r&&Object.defineProperty(d,"name",{value:t.name,writable:!0,configurable:!0}),t.contextTypes&&(d.contextTypes=t.contextTypes),r&&(d=a(d)),d=l(d),u=t,c=d,Object.keys(u).forEach((function(e){Sr[e]||Object.defineProperty(c,e,Object.getOwnPropertyDescriptor(u,e))})),d}var Sr={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};!function(e){e||(e=cr),Bn({reactionScheduler:e})}(p),gr.finalizeAllImmediately;var xr,Cr={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/xr=Cr,function(){var e={}.hasOwnProperty;function t(){for(var n=[],i=0;i<arguments.length;i++){var r=arguments[i];if(r){var o=typeof r;if("string"===o||"number"===o)n.push(r);else if(Array.isArray(r)){if(r.length){var s=t.apply(null,r);s&&n.push(s)}}else if("object"===o){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){n.push(r.toString());continue}for(var a in r)e.call(r,a)&&r[a]&&n.push(a)}}}return n.join(" ")}xr.exports?(t.default=t,xr.exports=t):window.classNames=t}();var Or=Cr.exports;const Ar=a((function(e,t){let{className:n,borderTop:i,clickable:r,previewAsHidden:o,wrapText:s,alignment:a,tabIndex:l,...c}=e;return u("div",{className:Or("td",{"td-borders":i,clickable:r,"hidden-column-preview":o,"wrap-text":s,["align-column-".concat(a)]:"string"==typeof a},n),role:"gridcell",tabIndex:null!=l?l:r?0:void 0,ref:t,...c})})),Er=l(Ar),Ir=Symbol("DefaultKeyNavContextValue"),Tr=i(Ir);function Nr(e){let{focusController:t,children:n}=e;const i=o((()=>({focusController:t})),[t]);return u(Tr.Provider,{value:i},n)}function kr(e,t){return"".concat(e,",").concat(t)}function Pr(e){const[t,n]=e.split(",");return[parseInt(t,10),parseInt(n,10)]}function Dr(e){const i=t(null),r=t(e.focusTarget),{focusController:a}=function(){const e=c(Tr);if(e===Ir)throw new Error("useKeyNavContext: context provider is missing");return e}(),[l,u]=o((()=>{const t=kr(e.columnIndex,e.rowIndex);return[t===a.focusTarget,t]}),[e.columnIndex,e.rowIndex,a.focusTarget]),[d,h]=s({canFocus:!1});return n((()=>{const e=e=>h((t=>e.lastPos===u?{canFocus:!1}:e.targetPos===u?{canFocus:e.shouldFocus}:t));return a.addListener(e),()=>a.removeListener(e)}),[a,u]),n((()=>{const{current:e}=r;if(d.canFocus){const t="function"==typeof e?e():i.current;null==t||t.focus()}}),[d]),{ref:i,tabIndex:l?0:-1,"data-position":u}}const Mr=wr((function(e){var t;const n=Dr({columnIndex:null!==(t=e.columnIndex)&&void 0!==t?t:-1,rowIndex:e.rowIndex}),i=o((()=>e.eventsController.getProps(e.item)),[e.item,e.eventsController]),r=Mt((()=>e.column.renderCellContent(e.item))).get();return u(Er,{alignment:e.column.alignment,borderTop:0===e.rowIndex,className:e.column.columnClass(e.item),wrapText:e.column.wrapText,clickable:e.clickable,previewAsHidden:e.preview&&(!e.column.isAvailable||e.column.isHidden),tabIndex:n.tabIndex,ref:n.ref,"data-position":n["data-position"],onClick:i.onClick,onDoubleClick:i.onDoubleClick,onMouseDown:i.onMouseDown,onKeyDown:i.onKeyDown,onKeyUp:i.onKeyUp,onFocus:i.onFocus},r)})),Rr=Mr;function Vr(e){let{direction:t}=e;const n="pagination-icon ".concat(t);switch(t){case"forward":return u("span",{"aria-hidden":!0},u("svg",{className:n,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M17.81 6.63C17.48 6.37 17 6.61 17 7.02V24.98C17 25.4 17.48 25.63 17.81 25.37L28.5 16.39C28.76 16.19 28.76 15.8 28.5 15.6L17.81 6.63Z",fill:"currentColor"}),u("path",{d:"M4.81 6.63C4.48 6.37 4 6.61 4 7.02V24.98C4 25.4 4.48 25.63 4.81 25.37L15.5 16.39C15.76 16.19 15.76 15.8 15.5 15.6L4.81 6.63Z",fill:"currentColor"})));case"step-forward":return u("span",{"aria-hidden":!0},u("svg",{className:n,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M8.81 6.63C8.48 6.37 8 6.61 8 7.02V24.98C8 25.4 8.48 25.63 8.81 25.37L20.5 16.39C20.76 16.19 20.76 15.8 20.5 15.6L8.81 6.63Z",fill:"currentColor"}),u("path",{d:"M24 6H22V26H24V6Z",fill:"currentColor"})));case"backward":return u("span",{"aria-hidden":!0},u("svg",{className:n,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M14.19 6.63L3.51 15.61C3.25 15.81 3.25 16.2 3.51 16.4L14.2 25.38C14.53 25.64 15.01 25.4 15.01 24.99V7.02C15.01 6.6 14.53 6.37 14.2 6.63H14.19Z",fill:"currentColor"}),u("path",{d:"M27.19 6.63L16.5 15.61C16.24 15.81 16.24 16.2 16.5 16.4L27.19 25.38C27.52 25.64 28 25.4 28 24.99V7.02C28 6.6 27.52 6.37 27.19 6.63Z",fill:"currentColor"})));case"step-backward":return u("span",{"aria-hidden":!0},u("svg",{className:n,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M23.19 6.63L11.51 15.61C11.25 15.81 11.25 16.2 11.51 16.4L23.2 25.38C23.53 25.64 24.01 25.4 24.01 24.99V7.02C24.01 6.6 23.53 6.37 23.2 6.63H23.19Z",fill:"currentColor"}),u("path",{d:"M10 6H8V26H10V6Z",fill:"currentColor"})));default:return u("div",null)}}function Lr(e){var t,n,i,r,o,s,a;const l=void 0!==e.numberOfItems?Math.ceil(e.numberOfItems/e.pageSize):void 0,c=void 0!==l?l-1:0,d=void 0!==l,h=0===e.numberOfItems?0:e.page*e.pageSize+1,f=(v=e.canNextPage,g=e.numberOfItems,p=e.page,m=e.pageSize,v||!g?0===g?g:(p+1)*m:g);var v,g,p,m;const _=t=>{e.setPaginationIndex&&e.setPaginationIndex(t)};if(0===e.numberOfItems&&"always"!==e.showPagingButtons)return null;const b="".concat(h," to ").concat(f," ").concat(d?"of ".concat(null!==(t=e.numberOfItems)&&void 0!==t?t:(null!=l?l:1)*e.pageSize):"");return u("div",{"aria-label":null!==(n=e.labelPagination)&&void 0!==n?n:"Pagination",className:"pagination-bar"},u("button",{className:"btn pagination-button",disabled:0===e.page,...jr((()=>{e.gotoPage(0),_(0)})),"aria-label":null!==(i=e.labelFirstPage)&&void 0!==i?i:"Go to first page"},u(Vr,{direction:"step-backward"})),u("button",{className:"btn pagination-button",disabled:!e.canPreviousPage,...jr((()=>{e.previousPage(),_(e.page-1)})),"aria-label":null!==(r=e.labelPreviousPage)&&void 0!==r?r:"Go to previous page"},u(Vr,{direction:"backward"})),u("span",{className:"sr-only sr-only-focusable"},null!==(o=e.labelPagingStatus)&&void 0!==o?o:"Currently showing"," ",b),u("div",{"aria-hidden":!0,className:"paging-status"},b),u("button",{"aria-label":null!==(s=e.labelNextPage)&&void 0!==s?s:"Go to next page",className:"btn pagination-button",disabled:!e.canNextPage,...jr((()=>{e.nextPage(),_(e.page+1)}))},u(Vr,{direction:"forward"})),d&&u("button",{"aria-label":null!==(a=e.labelLastPage)&&void 0!==a?a:"Go to last page",className:"btn pagination-button",disabled:e.page===c||0===e.numberOfItems,...jr((()=>{e.gotoPage(c),_(c)}))},u(Vr,{direction:"step-forward"})))}function jr(e){return{onClick:e,onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),t.stopPropagation(),e())}}}const zr=Symbol("NO_PROPS_VALUE"),Hr=i(zr),Fr=Hr.Provider;function Kr(){const e=c(Hr);if(e===zr)throw new Error("useTableProps: failed to get value from props provider.");return e}function Br(e){const{children:t,className:n,...i}=e;return u("div",{className:Or("widget-datagrid-grid table",n),role:"grid",...i},t)}function Ur(e){return u("div",{...e,className:Or("widget-datagrid-grid-body table-content",e.className),role:"rowgroup"})}function Wr(e){var i,r;const[o,a]=s(!1),l=null!==(r=(i=t()).current)&&void 0!==r?r:i.current=function(e){let{setIsIntersecting:t}=e;return new IntersectionObserver((e=>{let[n]=e;t(n.isIntersecting)}))}({setIsIntersecting:a});return n((()=>(e.current&&l.observe(e.current),()=>{l.disconnect()})),[l,e]),o}function qr(){const e=t(null),[i,r]=s(1);return n((()=>{const t=e.current;if(null!==t)return function(e,t){const n=new IntersectionObserver((e=>{let[n]=e;0!==n.intersectionRatio&&1!==n.intersectionRatio||t(n.intersectionRatio)}),{threshold:[0,1]});return n.observe(e),()=>n.unobserve(e)}(t,r)}),[]),u("div",{className:Or("sticky-sentinel",{"container-stuck":0===i}),ref:e,style:{height:1,marginBottom:"-1px"}})}function Gr(e){let{size:t="medium",withMargins:n=!1}=e;return u("div",{className:Or("widget-datagrid-spinner",{"widget-datagrid-spinner-margin":n}),"aria-busy":!0,"aria-live":"polite"},u("div",{className:"widget-datagrid-spinner-loader widget-datagrid-spinner-loader-".concat(t)}))}const Jr=e=>{let{children:n,className:i,hasMoreItems:o,isInfinite:a,style:l,setPage:c,paginationType:h}=e;const[f,v,g]=function(e){const{setPage:n,hasMoreItems:i,isInfinite:o}=e,[a,l]=s(0),u=t(null),c=Wr(u),h=r((e=>{Math.floor(e.target.scrollHeight-30-e.target.scrollTop)<=Math.floor(e.target.clientHeight)+2&&i&&n&&n((e=>e+1))}),[i,n]),f=r((()=>{c&&o&&i&&a<=0&&u.current&&l(u.current.clientHeight-30)}),[o,i,a,c]);return d((()=>{setTimeout((()=>f()),100)}),[f]),[h,a,u]}({hasMoreItems:o,isInfinite:a,setPage:c});return u("div",{className:Or("widget-datagrid-content","sticky-table-container",{"infinite-loading":a},i),ref:g,onScroll:a&&"loadMore"!==h?f:void 0,style:a&&v>0?{...l,maxHeight:v}:l},u(qr,null),n)};function Xr(e){return e.isLoading?u("div",{className:"widget-datagrid-loader-container"},u(Gr,{withMargins:!0,size:"large"})):u(Jr,{...e})}function Zr(e){const{pagingPosition:t,pagination:n,paginationType:i,loadMoreButtonCaption:r,hasMoreItems:o,setPage:s,...a}=e;return u("div",{...a,className:"widget-datagrid-footer table-footer"},("bottom"===t||"both"===t)&&n,o&&"loadMore"===i&&u("button",{className:"btn btn-primary widget-datagrid-load-more",onClick:()=>s&&s((e=>e+1)),tabIndex:0},r))}function Yr(e){const{children:t,headerTitle:n,...i}=e;return t?u("div",{...i,className:"widget-datagrid-header header-filters","aria-label":n||void 0},t):null}function $r(e){const n=t(null),{className:i,selectionMethod:r,selection:s,exporting:a,children:l,...c}=e,d=o((()=>{const t={...e.style};return a&&n.current&&(t.height=n.current.offsetHeight),t}),[e.style,a]);return u("div",{...c,ref:n,style:d,className:Or(i,"widget-datagrid",{"widget-datagrid-exporting":a,"widget-datagrid-selectable-rows":s,"widget-datagrid-selection-method-checkbox":s&&"checkbox"===r,"widget-datagrid-selection-method-click":s&&"rowClick"===r})},l)}function Qr(e){return u("div",{...e,className:"widget-datagrid-top-bar table-header"},e.children)}function eo(e){return u("div",{className:"widget-datagrid-modal-root",role:"presentation"},u("div",{className:"widget-datagrid-modal-overlay",role:"presentation"}),u("div",{className:"widget-datagrid-modal-main",role:"presentation"},e.children))}function to(){return to=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},to.apply(this,arguments)}function no(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t[0];if(1===t.length)return i;const r=()=>{const e=t.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(t){const n=e.reduce(((e,n)=>{let{useScope:i,scopeName:r}=n;return{...e,...i(t)["__scope".concat(r)]}}),{});return o((()=>({["__scope".concat(i.scopeName)]:n})),[n])}};return r.scopeName=i.scopeName,r}function io(){return io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},io.apply(this,arguments)}function ro(){return ro=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ro.apply(null,arguments)}function oo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.forEach((t=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)))}const so=a(((e,t)=>{const{children:n,...i}=e,r=h.toArray(n),o=r.find(uo);if(o){const e=o.props.children,n=r.map((t=>t===o?h.count(e)>1?h.only(null):f(e)?e.props.children:null:t));return u(ao,ro({},i,{ref:t}),f(e)?v(e,void 0,n):null)}return u(ao,ro({},i,{ref:t}),n)}));so.displayName="Slot";const ao=a(((e,t)=>{const{children:n,...i}=e;return f(n)?v(n,{...co(i,n.props),ref:t?oo(t,n.ref):n.ref}):h.count(n)>1?h.only(null):null}));ao.displayName="SlotClone";const lo=e=>{let{children:t}=e;return u(g,null,t)};function uo(e){return f(e)&&e.type===lo}function co(e,t){const n={...t};for(const i in t){const r=e[i],o=t[i];/^on[A-Z]/.test(i)?r&&o?n[i]=function(){o(...arguments),r(...arguments)}:r&&(n[i]=r):"style"===i?n[i]={...r,...o}:"className"===i&&(n[i]=[r,o].filter(Boolean).join(" "))}return{...e,...n}}const ho=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>{const i=a(((e,i)=>{const{asChild:r,...o}=e,s=r?so:t;return n((()=>{window[Symbol.for("radix-ui")]=!0}),[]),u(s,io({},o,{ref:i}))}));return i.displayName="Primitive.".concat(t),{...e,[t]:i}}),{}),fo="Progress",vo=100,[go,po]=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const r=()=>{const t=n.map((e=>i(e)));return function(n){const i=(null==n?void 0:n[e])||t;return o((()=>({["__scope".concat(e)]:{...n,[e]:i}})),[n,i])}};return r.scopeName=e,[function(t,r){const s=i(r),a=n.length;function l(t){const{scope:n,children:i,...r}=t,l=(null==n?void 0:n[e][a])||s,c=o((()=>r),Object.values(r));return u(l.Provider,{value:c},i)}return n=[...n,r],l.displayName=t+"Provider",[l,function(n,i){const o=(null==i?void 0:i[e][a])||s,l=c(o);if(l)return l;if(void 0!==r)return r;throw new Error("`".concat(n,"` must be used within `").concat(t,"`"))}]},no(r,...t)]}(fo),[mo,_o]=go(fo),bo=a(((e,t)=>{const{__scopeProgress:n,value:i,max:r,getValueLabel:o=wo,...s}=e,a=Co(r)?r:vo,l=Oo(i,a)?i:null,c=xo(l)?o(l,a):void 0;return u(mo,{scope:n,value:l,max:a},u(ho.div,to({"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":xo(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":So(l,a),"data-value":null!=l?l:void 0,"data-max":a},s,{ref:t})))}));bo.propTypes={max(e,t,n){const i=e[t],r=String(i);return i&&!Co(i)?new Error(function(e,t){return"Invalid prop `max` of value `".concat(e,"` supplied to `").concat(t,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(vo,"`.")}(r,n)):null},value(e,t,n){const i=e[t],r=String(i),o=Co(e.max)?e.max:vo;return null==i||Oo(i,o)?null:new Error(function(e,t){return"Invalid prop `value` of value `".concat(e,"` supplied to `").concat(t,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(vo," if no `max` prop is set)\n  - `null` if the progress is indeterminate.\n\nDefaulting to `null`.")}(r,n))}};const yo=a(((e,t)=>{var n;const{__scopeProgress:i,...r}=e,o=_o("ProgressIndicator",i);return u(ho.div,to({"data-state":So(o.value,o.max),"data-value":null!==(n=o.value)&&void 0!==n?n:void 0,"data-max":o.max},r,{ref:t}))}));function wo(e,t){return"".concat(Math.round(e/t*100),"%")}function So(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function xo(e){return"number"==typeof e}function Co(e){return xo(e)&&!isNaN(e)&&e>0}function Oo(e,t){return xo(e)&&!isNaN(e)&&e<=t&&e>=0}const Ao=bo,Eo=yo;function Io(){return u("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},u("path",{d:"M14.205 3.205L12.795 1.795L8 6.585L3.205 1.795L1.795 3.205L6.585 8L1.795 12.795L3.205 14.205L8 9.415L12.795 14.205L14.205 12.795L9.415 8L14.205 3.205Z",fill:"currentColor"}))}function To(){return u("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},u("rect",{x:"13.3773",y:"10.5415",width:"5.30402",height:"14.7575",fill:"white"}),u("path",{d:"M29.71 24.97L23.77 15.11L17.64 4.94C16.89 3.69 15.11 3.69 14.36 4.94L8.23002 15.11L2.29002 24.97C1.50002 26.29 2.42002 28 3.94002 28H28.06C29.58 28 30.5 26.29 29.71 24.97ZM16 25C14.9 25 14 24.1 14 23C14 22 14.74 21.18 15.7 21.03C15.8 21.01 15.9 21 16 21C16.1 21 16.21 21.01 16.3 21.03C17.26 21.18 18 22 18 23C18 24.1 17.1 25 16 25ZM18 19H14V11H18V19Z",fill:"currentColor"}))}function No(e){let{alertLabel:t,cancelLabel:n,failed:i,onCancel:r,progress:o,total:a}=e;const[l]=s((()=>"widget-datagrid-export-alert-".concat($())));return u("div",{id:l,className:Or("widget-datagrid-export-alert",{"widget-datagrid-export-alert-failed":i}),role:"status","aria-live":"off","aria-label":t},u("button",{role:"button",className:"btn btn-image btn-icon widget-datagrid-export-alert-cancel",onClick:r,"aria-label":n,tabIndex:0},u(Io,null)),u("div",{className:"widget-datagrid-export-alert-message"},i?u(To,null):u("p",null,Po(a)?function(e,t){return"".concat(e," / ").concat(t)}(o,a):o)),u(ko,{progress:o,total:a}))}function ko(e){let{progress:t,total:n}=e;const i=Po(n)&&n;return u(Ao,{className:"widget-datagrid-export-progress",value:i?t:null,max:n},u(Eo,{className:Or("widget-datagrid-export-progress-indicator",{"widget-datagrid-export-progress-indicator-indeterminate":!i}),style:i?Do(t,n):void 0}))}function Po(e){return"number"==typeof e&&e>0}function Do(e,t){return{transform:"translateX(-".concat(100-Mo(e,0,t),"%)")}}function Mo(e,t,n){if(e<t)return 0;if(e>n)return 100;const i=n-t,r=Math.round((e-t)/i*100);return Math.abs(r)}function Ro(e){let{open:t,...n}=e;return t?u(eo,null,u(No,{...n})):null}function Vo(e){let{withCheckbox:t=!1}=e;return u("div",{className:"widget-datagrid-skeleton","aria-busy":!0,"aria-live":"polite"},t&&u("span",{className:"widget-datagrid-skeleton-loader widget-datagrid-skeleton-loader-small"}),u("span",{className:"widget-datagrid-skeleton-loader"}))}function Lo(e){return u(Er,{...e,className:"column-selector"})}function jo(e){let{columnsHidable:t,columnsSize:n,pageSize:i}=e;const{selectActionHelper:r}=Kr();return u(g,null,Array.from({length:i}).map(((e,i)=>u("div",{className:"tr",role:"row",key:i},r.showCheckboxColumn&&u(Er,{borderTop:0===i,className:"widget-datagrid-col-select",tabIndex:-1},u("input",{type:"checkbox"})),Array.from({length:n}).map(((e,t)=>u(Er,{alignment:"left",borderTop:0===i,key:"".concat(i,"-").concat(t)},u(Vo,null)))),t&&u(Lo,{key:"column_selector_cell",borderTop:0===i,tabIndex:-1})))))}function zo(e){let{item:t,rowIndex:n,lastRow:i,...r}=e;const o=Dr({columnIndex:0,rowIndex:n}),{selectActionHelper:s,checkboxEventsController:a,selectRowLabel:l,gridInteractive:c}=Kr();return u(Er,{...r,clickable:c,className:"widget-datagrid-col-select",tabIndex:-1},u("input",{checked:s.isSelected(t),type:"checkbox",tabIndex:o.tabIndex,"data-position":o["data-position"],onChange:Fo,onFocus:i?Ho:void 0,ref:o.ref,"aria-label":"".concat(null!=l?l:"Select row"," ").concat(n+1),...a.getProps(t)}))}function Ho(e){var t;"function"==typeof(null===(t=e.target.parentElement)||void 0===t?void 0:t.scrollIntoView)&&e.target.parentElement.scrollIntoView(!1)}function Fo(){}function Ko(e){const{CellComponent:t,selectActionHelper:n,preview:i,totalRows:r,eventsController:o}=e,s=n.isSelected(e.item),a="None"===n.selectionType?void 0:s,l=0===e.index;return u("div",{className:Or("tr",{"tr-selected":s,"tr-preview":i},e.className),role:"row","aria-selected":a},n.showCheckboxColumn&&u(zo,{item:e.item,key:"checkbox_cell",borderTop:l,rowIndex:e.index,lastRow:e.index===r-1}),e.columns.map(((r,s)=>{var a;const l=u(t,{key:"row_".concat(e.item.id,"_col_").concat(r.columnId),column:r,rowIndex:e.index,columnIndex:n.showCheckboxColumn?s+1:s,item:e.item,clickable:e.clickable,preview:i,eventsController:o});return i?null===(a=e.selectableWrapper)||void 0===a?void 0:a.call(e,s,l):l})),e.showSelectorCell&&u(Lo,{key:"column_selector_cell",borderTop:l,clickable:e.clickable,tabIndex:-1}))}function Bo(e){return e.isLoading?u(jo,{columnsHidable:e.columnsHidable,columnsSize:e.columns.length,pageSize:e.pageSize}):u(Nr,{focusController:e.focusController},e.rows.map(((t,n)=>{var i;return u(Ko,{totalRows:e.rows.length,clickable:e.interactive,selectActionHelper:e.selectActionHelper,preview:e.preview,eventsController:e.eventsController,CellComponent:e.Cell,className:null===(i=e.rowClass)||void 0===i?void 0:i.call(e,t),columns:e.columns,index:n,item:t,key:"row_".concat(t.id),showSelectorCell:e.columnsHidable,selectableWrapper:e.selectableWrapper})})))}function Uo(e){let{id:i,value:r,onChange:o}=e;const s=t(null);return n((()=>{s.current&&("all"===r||"none"===r?s.current.indeterminate=!1:"some"===r&&(s.current.indeterminate=!0))}),[r]),u("input",{id:i,type:"checkbox",className:"three-state-checkbox",ref:s,checked:"none"!==r,onChange:o})}function Wo(){const{selectActionHelper:e,selectionStatus:t}=Kr(),{showCheckboxColumn:n,showSelectAllToggle:i,onSelectAll:r}=e;if(!1===n)return u(g,null);let o=null;if(i){if("unknown"===t)throw new Error("Don't know how to render checkbox with selectionStatus=unknown");o=u(Uo,{value:t,onChange:r})}return u("div",{className:"th widget-datagrid-col-select",role:"columnheader"},o)}function qo(e){const i=t(e);return n((()=>{i.current=e})),r((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.current&&i.current.apply(void 0,t)}),[])}function Go(e){let{minWidth:i=50,setColumnWidth:o,onResizeEnds:a,onResizeStart:l}=e;const[c,d]=s(!1),[h,f]=s(0),[v,g]=s(0),p=t(null),m=qo(l),_=r((e=>{const t=e.touches?e.touches[0].screenX:e.screenX;if(f(t),d(!0),p.current){const e=p.current.parentElement;g(e.clientWidth)}m()}),[m]),b=r((()=>{c&&(d(!1),g(0),null==a||a())}),[a,c]),y=qo(o),w=r((e=>{if(!c)return;const t=e.touches?e.touches[0].screenX:e.screenX;if(v){let e=v-(h-t);e<i&&(e=i),y(e)}}),[c,v,h,i,y]);return n((()=>(document.addEventListener("mousemove",w),document.addEventListener("mouseup",b),document.addEventListener("touchmove",w),document.addEventListener("touchend",b),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",b),document.removeEventListener("touchmove",w),document.removeEventListener("touchend",b)})),[w,b]),u("div",{"aria-hidden":!0,ref:p,className:"column-resizer",onMouseDown:_,onTouchStart:_},u("div",{className:"column-resizer-bar"}))}function Jo(){return u("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"eye",className:"svg-inline--fa fa-eye fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},u("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.589893 7.715C0.724893 7.52 3.91989 3 7.99989 3C12.0799 3 15.2749 7.52 15.4099 7.715L15.6099 8L15.4099 8.285C15.2749 8.48 12.0799 13 7.99989 13C3.91989 13 0.724893 8.48 0.589893 8.285L0.389893 8L0.589893 7.715ZM1.62489 8C2.37489 8.96 4.98989 12 7.99989 12C11.0099 12 13.6249 8.96 14.3749 8C13.6249 7.04 11.0099 4 7.99989 4C4.98989 4 2.37489 7.04 1.62489 8ZM5.5 8C5.5 6.62 6.62 5.5 8 5.5C9.38 5.5 10.5 6.62 10.5 8C10.5 9.38 9.38 10.5 8 10.5C6.62 10.5 5.5 9.38 5.5 8ZM6.5 8C6.5 8.825 7.175 9.5 8 9.5C8.825 9.5 9.5 8.825 9.5 8C9.5 7.175 8.825 6.5 8 6.5C7.175 6.5 6.5 7.175 6.5 8Z",fill:"currentColor"}))}function Xo(e,t){n((()=>{const{current:n}=Array.isArray(e)?e[0]:e;if(!n)return;const i=n.ownerDocument,r=function(e,t){const n=Array.isArray(e)?e:[e];return e=>{n.every((t=>{let{current:n}=t;return n&&!n.contains(e.target)}))&&t()}}(e,t);return i.addEventListener("mousedown",r),i.addEventListener("touchstart",r),()=>{i.removeEventListener("mousedown",r),i.removeEventListener("touchstart",r)}}),[e,t])}function Zo(e,t){const[i,o]=s(),a=r((()=>{o((t=>{const n=null==e?void 0:e.getBoundingClientRect();return r=n,(i=t)&&r&&i.height===r.height&&i.width===r.width&&i.bottom===r.bottom&&i.top===r.top&&i.left===r.left&&i.right===r.right?t:n;var i,r}))}),[e]);var l;return n((()=>l?function(e){let t;const n=()=>{t=window.requestAnimationFrame((()=>{e(),n()}))},i=()=>window.cancelAnimationFrame(t);return n(),i}(l):void 0),[l=t?a:void 0]),i}function Yo(e){var n;const{visibleLength:i}=e,[a,l]=s(!1),c=t(null),h=t(null),f=Zo(h.current,a);Xo([h,c],(()=>l(!1)));const v=null!==(n=e.label)&&void 0!==n?n:"Column selector",g=(e=>{const t=e.current,[n,i]=s(!0);return d((()=>{const e=null==t?void 0:t.getBoundingClientRect(),n=!e||e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth);i(n)}),[t]),n})(c),p=o((()=>e.columns.findIndex((e=>e.canHide))),[e.columns]),m=o((()=>e.columns.map((e=>e.canHide)).lastIndexOf(!0)),[e.columns]),_=u("ul",{ref:c,id:"".concat(e.id,"-column-selectors"),className:"column-selectors ".concat(g?"":"overflow"),"data-focusindex":0,role:"menu",style:{position:"fixed",top:null==f?void 0:f.bottom,right:void 0!==(null==f?void 0:f.right)?document.body.clientWidth-f.right:void 0}},e.columns.map(((t,n)=>{const r=!t.isHidden,o=r&&1===i,s=()=>{o||t.toggleHidden()};return t.canHide?u("li",{key:t.columnId,onClick:e=>{e.preventDefault(),e.stopPropagation(),s()},onKeyDown:e=>{var t;"Enter"===e.key||" "===e.key?(e.preventDefault(),e.stopPropagation(),s()):("Tab"===e.key&&(n===m||e.shiftKey&&n===p)||"Escape"===e.key)&&(e.preventDefault(),l(!1),null===(t=h.current)||void 0===t||t.focus())},role:"menuitem",tabIndex:0},u("input",{checked:r,disabled:o,id:"".concat(e.id,"_checkbox_toggle_").concat(n),style:{pointerEvents:"none"},type:"checkbox",tabIndex:-1,onChange:$o}),u("label",{htmlFor:"".concat(e.id,"_checkbox_toggle_").concat(n),style:{pointerEvents:"none"}},t.header)):null}))),b=r((()=>{l((e=>!e)),setTimeout((()=>{var e,t;null===(t=null===(e=c.current)||void 0===e?void 0:e.querySelector("li"))||void 0===t||t.focus()}),10)}),[]);return u("div",{"aria-label":v,className:"th column-selector",role:"columnheader",title:v},u("div",{className:"column-selector-content"},u("button",{"aria-label":v,ref:h,className:"btn btn-default column-selector-button",onClick:b,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),b())},"aria-haspopup":!0,"aria-expanded":a,"aria-controls":"".concat(e.id,"-column-selectors")},u(Jo,null))),a&&_)}function $o(){}function Qo(){return u("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-down",className:"svg-inline--fa fa-long-arrow-alt-down fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},u("path",{fill:"currentColor",d:"M168 345.941V44c0-6.627-5.373-12-12-12h-56c-6.627 0-12 5.373-12 12v301.941H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.569 9.373 33.941 0l86.059-86.059c15.119-15.119 4.411-40.971-16.971-40.971H168z"}))}function es(){return u("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-up",className:"svg-inline--fa fa-long-arrow-alt-up fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},u("path",{fill:"currentColor",d:"M88 166.059V468c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12V166.059h46.059c21.382 0 32.09-25.851 16.971-40.971l-86.059-86.059c-9.373-9.373-24.569-9.373-33.941 0l-86.059 86.059c-15.119 15.119-4.411 40.971 16.971 40.971H88z"}))}function ts(){return u("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"arrows-alt-v",className:"svg-inline--fa fa-arrows-alt-v fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},u("path",{fill:"currentColor",d:"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"}))}function ns(e){var t,n,i,o,s;const a=e.sortable&&e.column.canSort,l=function(e,t,n,i,o,s){const a=r((e=>{var t,n,i,r,o;const a=e.target.closest(".th"),l=null!==(t=a.dataset.columnId)&&void 0!==t?t:"",u=null===(i=null===(n=a.previousElementSibling)||void 0===n?void 0:n.dataset)||void 0===i?void 0:i.columnId,c=null===(o=null===(r=a.nextElementSibling)||void 0===r?void 0:r.dataset)||void 0===o?void 0:o.columnId;s([u,l,c])}),[s]),l=r((e=>{if(!o)return;const t=e.currentTarget.dataset.columnId;if(!t)return;e.preventDefault();const[r,s,a]=o;if(t===s)return void(void 0!==n&&i(void 0));let l;if(t===r)l=!1;else if(t===a)l=!0;else{const t=e.currentTarget.getBoundingClientRect();l=t.width/2+("after"===(null==n?void 0:n[1])?-10:10)<e.clientX-t.left}const u=l?"after":"before";t===(null==n?void 0:n[0])&&u===(null==n?void 0:n[1])||i([t,u])}),[o,n,i]),u=r((e=>{e.preventDefault()}),[]),c=r((()=>{s(void 0),i(void 0)}),[i,s]),d=r((e=>{c(),o&&n&&t(o[1],n)}),[c,t,o,n]);return e?{draggable:!0,onDragStart:a,onDragOver:l,onDrop:d,onDragEnter:u,onDragEnd:c}:{}}(e.draggable&&null!==(t=e.column.canDrag)&&void 0!==t&&t,e.swapColumns,e.dropTarget,e.setDropTarget,e.isDragging,e.setIsDragging),c=a?function(e){switch(e.sortDir){case"asc":return u(es,null);case"desc":return u(Qo,null);default:return u(ts,null)}}(e.column):null,d=a?(h=e.column,{onClick:()=>{h.toggleSort()},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),h.toggleSort())},role:"button",tabIndex:0}):null;var h;const f=e.column.header.trim();return u("div",{"aria-sort":is(a,e.column),className:Or("th",{"hidden-column-preview":e.preview&&(!e.column.isAvailable||e.hidable&&e.column.isHidden)},{["drop-".concat(null===(n=e.dropTarget)||void 0===n?void 0:n[1])]:e.column.columnId===(null===(i=e.dropTarget)||void 0===i?void 0:i[0]),dragging:e.column.columnId===(null===(o=e.isDragging)||void 0===o?void 0:o[1]),"dragging-over-self":e.column.columnId===(null===(s=e.isDragging)||void 0===s?void 0:s[1])&&!e.dropTarget}),role:"columnheader",style:a?void 0:{cursor:"unset"},title:f,ref:t=>e.column.setHeaderElementRef(t),"data-column-id":e.column.columnId,onDrop:l.onDrop,onDragEnter:l.onDragEnter,onDragOver:l.onDragOver},u("div",{className:Or("column-container"),id:"".concat(e.gridId,"-column").concat(e.column.columnId),draggable:l.draggable,onDragStart:l.onDragStart,onDragEnd:l.onDragEnd},u("div",{className:Or("column-header",{clickable:a},e.className),style:{pointerEvents:e.isDragging?"none":void 0},...d,"aria-label":a?"sort "+f:f},u("span",null,f.length>0?f:" "),c),e.filterable&&e.filterWidget),e.resizable&&e.column.canResize&&e.resizer)}function is(e,t){if(e)switch(t.sortDir){case"asc":return"ascending";case"desc":return"descending";default:return"none"}}function rs(e){let{size:t}=e;return u("div",{key:"headers_row",className:"tr",role:"row"},Array.from({length:t}).map(((e,t)=>u("div",{className:"th",role:"columnheader",key:t},u("div",{className:"column-container"},u("div",{className:"column-header align-column-left"},u("span",null,u(Vo,null))))))))}function os(e){let{availableColumns:t,columns:n,setIsResizing:i,columnsDraggable:o,columnsFilterable:a,columnsHidable:l,columnsResizable:c,columnsSortable:d,columnsSwap:h,filterRenderer:f,headerWrapperRenderer:v,id:g,isLoading:p,preview:m}=e;const[_,b]=s(void 0),[y,w]=s(),S=r((e=>u("div",{className:"filter",style:{pointerEvents:y?"none":void 0}},e)),[y]);return p?u(rs,{size:n.length}):u("div",{key:"headers_row",className:"tr",role:"row"},u(Wo,{key:"headers_column_select_all"}),n.map(((e,t)=>v(t,u(ns,{key:"".concat(e.columnId),className:"align-column-".concat(e.alignment),gridId:g,column:e,draggable:o,dropTarget:_,filterable:a,filterWidget:f(S,e.columnIndex),hidable:l,isDragging:y,preview:m,resizable:c&&n.at(-1)!==e,resizer:u(Go,{onResizeStart:()=>i(!0),onResizeEnds:()=>i(!1),setColumnWidth:t=>e.setSize(t)}),swapColumns:h,setDropTarget:b,setIsDragging:w,sortable:d})))),l&&u(Yo,{key:"headers_column_selector",columns:t,id:g,visibleLength:n.length}))}const ss=wr((e=>{var t,n;const{className:i,exporting:r,numberOfItems:o,onExportCancel:s,selectActionHelper:a}=e,l="None"!==a.selectionType;return u(Fr,{value:e},u($r,{className:i,selectionMethod:a.selectionMethod,selection:l,style:{},exporting:r},u(as,{...e,data:r?[]:e.data}),r&&u(Ro,{alertLabel:null!==(t=e.exportDialogLabel)&&void 0!==t?t:"Export progress",cancelLabel:null!==(n=e.cancelExportLabel)&&void 0!==n?n:"Cancel data export",failed:!1,onCancel:s,open:r,progress:e.processedRows,total:o})))})),as=wr((e=>{var t;const{CellComponent:n,columnsHidable:i,data:r,emptyPlaceholderRenderer:o,hasMoreItems:s,headerContent:a,headerTitle:l,loadMoreButtonCaption:c,numberOfItems:d,page:h,pageSize:f,paginationType:v,paging:p,pagingPosition:m,preview:_,selectActionHelper:b,setPage:y,visibleColumns:w}=e,S=!p,x=!!a,C=p&&("top"===m||"both"===m),O=p?u(Lr,{canNextPage:s,canPreviousPage:0!==h,gotoPage:e=>y&&y((()=>e)),nextPage:()=>y&&y((e=>e+1)),numberOfItems:d,page:h,pageSize:f,showPagingButtons:e.showPagingButtons,previousPage:()=>y&&y((e=>e-1))}):null,A=function(e,t){const n=e.map((e=>e.getCssWidth())),i=[];t.selectItemColumn&&i.push("48px");i.push(...n),t.visibilitySelectorColumn&&i.push("54px");return{gridTemplateColumns:i.join(" ")}}(w,{selectItemColumn:b.showCheckboxColumn,visibilitySelectorColumn:i}),E="None"!==b.selectionType;return u(g,null,C&&u(Qr,null,O),x&&u(Yr,{headerTitle:l},a),u(Xr,{isInfinite:S,hasMoreItems:s,setPage:y,paginationType:v,isLoading:e.isLoading&&"spinner"===e.loadingType,pageSize:e.pageSize},u(Br,{"aria-multiselectable":E?"Multi"===b.selectionType:void 0},u(Ur,{style:A},u(os,{availableColumns:e.availableColumns,columns:w,setIsResizing:e.setIsResizing,columnsDraggable:e.columnsDraggable,columnsFilterable:e.columnsFilterable,columnsHidable:e.columnsHidable,columnsResizable:e.columnsResizable,columnsSortable:e.columnsSortable,columnsSwap:e.columnsSwap,filterRenderer:e.filterRenderer,headerWrapperRenderer:e.headerWrapperRenderer,id:e.id,isLoading:e.columnsLoading,preview:e.preview}),u(Bo,{preview:null!==(t=e.preview)&&void 0!==t&&t,interactive:e.gridInteractive,Cell:n,columns:w,columnsHidable:i,rows:r,rowClass:e.rowClass,selectableWrapper:e.headerWrapperRenderer,selectActionHelper:b,focusController:e.focusController,eventsController:e.cellEventsController,isLoading:e.isLoading,pageSize:e.pageSize}),(0===r.length||_)&&o&&o((e=>u("div",{key:"row-footer",className:Or("td",{"td-borders":!_}),style:{gridColumn:"span ".concat(w.length+(i?1:0)+(b.showCheckboxColumn?1:0))}},u("div",{className:"empty-placeholder"},e))))))),u(Zr,{pagination:O,pagingPosition:m,paginationType:v,loadMoreButtonCaption:c,hasMoreItems:s,setPage:y}))}));function ls(e){return{hasError:!0,error:e}}function us(e){return{hasError:!1,value:e}}var cs,ds;!function(e){e[e.EMISSINGSTORE=2]="EMISSINGSTORE",e[e.ENOCONTEXT=1]="ENOCONTEXT",e[e.ESTORETYPE=3]="ESTORETYPE",e[e.EKEYMISSING=7]="EKEYMISSING"}(cs||(cs={})),Object.freeze({code:cs.ENOCONTEXT,message:"The filter widget must be placed inside the column or header of the Data grid 2.0 or inside header of the Gallery widget."}),Object.freeze({code:cs.EMISSINGSTORE,message:"Unable to get filter store. Check parent widget configuration."}),Object.freeze({code:cs.EKEYMISSING,message:"The key for filter is missing."}),function(e){e.STRING="string",e.NUMBER="number",e.ENUMERATION="enum",e.DATE="date"}(ds||(ds={}));const hs="com.mendix.widgets.web.filterable.filterContext.v2";function fs(){var e,t;return null!==(t=(e=window)[hs])&&void 0!==t?t:e[hs]=i(null)}const vs=(void 0===window[Z]&&(window[Z]=i(void 0)),window[Z]),gs=fs();function ps(e){return u(gs.Provider,{value:e.filtersStore.context},e.children)}function ms(e){const t=function(e){const t=r((()=>{"Multi"===(null==e?void 0:e.type)&&("all"===e.selectionStatus?e.selectNone():e.selectAll())}),[e]),n="Multi"===(null==e?void 0:e.type)?e.selectionStatus:void 0;return o((()=>{if(void 0!==n)return{status:n,toggle:t}}),[n,t])}(e.selectionHelper);return u(vs.Provider,{value:t},e.children)}const _s=l((function(e){return u(ps,{filtersStore:e.filtersStore},u(ms,{selectionHelper:e.selectionHelper},e.children))}));_s.displayName="WidgetHeaderContext";const bs=_s,ys=e=>{const{pagination:t,showPagingButtons:n,totalCount:i,limit:r}=e;return o((()=>"buttons"===t&&("always"===n||"auto"===n&&!!i&&i>r)),[t,n,i,r])};class ws extends Y{constructor(e,t,n,i,r,o){super(e,t),this._selectionMode=o,this._selectionMethod=n,this._showSelectAllToggle=i,this.pageSize=r}get selectionMethod(){return"None"===this.selectionType?"none":this._selectionMethod}get showCheckboxColumn(){return"checkbox"===this.selectionMethod}get showSelectAllToggle(){return this._showSelectAllToggle&&"Multi"===this.selectionType}get selectionMode(){return"checkbox"===this.selectionMethod?"toggle":this._selectionMode}}class Ss{constructor(e,t){H(this,"trigger",void 0),H(this,"listAction",void 0),H(this,"onExecuteAction",(e=>{this.listAction&&"get"in this.listAction&&F(this.listAction.get(e))})),this.trigger=e,this.listAction=t}get clickTrigger(){return this.listAction?this.trigger:"none"}update(e){this.listAction=e}}function xs(e){return e.reduce(((e,t)=>{var n,i,r,o,s,a;switch(t.eventName){case"onClick":e.onClick=null!==(n=e.onClick)&&void 0!==n?n:[],e.onClick.push(t);break;case"onDoubleClick":e.onDoubleClick=null!==(i=e.onDoubleClick)&&void 0!==i?i:[],e.onDoubleClick.push(t);break;case"onKeyDown":e.onKeyDown=null!==(r=e.onKeyDown)&&void 0!==r?r:[],e.onKeyDown.push(t);break;case"onKeyUp":e.onKeyUp=null!==(o=e.onKeyUp)&&void 0!==o?o:[],e.onKeyUp.push(t);break;case"onMouseDown":e.onMouseDown=null!==(s=e.onMouseDown)&&void 0!==s?s:[],e.onMouseDown.push(t);break;case"onFocus":e.onFocus=null!==(a=e.onFocus)&&void 0!==a?a:[],e.onFocus.push(t)}return e}),{})}function Cs(e,t){const n=xs(t);return{onClick(t){var i;null===(i=n.onClick)||void 0===i||i.forEach((n=>Os(e,t,n)))},onDoubleClick(t){var i;null===(i=n.onDoubleClick)||void 0===i||i.forEach((n=>Os(e,t,n)))},onKeyUp(t){var i;null===(i=n.onKeyUp)||void 0===i||i.forEach((n=>Os(e,t,n)))},onKeyDown(t){var i;null===(i=n.onKeyDown)||void 0===i||i.forEach((n=>Os(e,t,n)))},onMouseDown(t){var i;null===(i=n.onMouseDown)||void 0===i||i.forEach((n=>Os(e,t,n)))},onFocus(t){var i;null===(i=n.onFocus)||void 0===i||i.forEach((n=>Os(e,t,n)))}}}function Os(e,t,n){const i=e();(!n.filter||n.filter(i,t))&&n.handler(i,t)}const As=e=>({eventName:"onClick",filter:(e,t)=>"single"===e.clickTrigger&&"none"===e.selectionMethod||"single"===e.clickTrigger&&"checkbox"===e.selectionMethod&&!t.metaKey&&!t.ctrlKey,handler:t=>{let{item:n}=t;return e(n)}}),Es=e=>({eventName:"onDoubleClick",filter:(e,t)=>"none"===e.selectionMethod?"double"===e.clickTrigger:"double"===e.clickTrigger&&!t.metaKey&&!t.ctrlKey,handler:t=>{let{item:n}=t;return e(n)}}),Is=(e,t)=>"Space"===t.code&&"none"!==e.clickTrigger?!t.shiftKey||"none"===e.selectionMethod:"Enter"===t.code&&"none"!==e.clickTrigger,Ts=e=>{let t=!1;return[{eventName:"onKeyDown",filter:Is,handler:()=>t=!0},{eventName:"onKeyUp",filter:(e,n)=>Is(e,n)&&t,handler:n=>{let{item:i}=n;t=!1,e(i)}}]};function Ns(e){return[As(e),Es(e),(t=e=>{e.preventDefault(),e.stopPropagation()},{eventName:"onKeyDown",filter:(e,t)=>function(e){return"Space"===e.code&&e.target===e.currentTarget}(t),handler:(e,n)=>t(n)}),...Ts(e)];var t}function ks(){var e;null===(e=window.getSelection())||void 0===e||e.removeAllRanges()}function Ps(){document.body.style.userSelect="none"}const Ds=()=>{Ds.timeoutId&&clearTimeout(Ds.timeoutId),Ds.timeoutId=window.setTimeout((()=>{ks(),document.body.style.userSelect="",Ds.timeoutId=void 0}),250)},Ms=e=>({eventName:"onClick",filter:(e,t)=>"rowClick"===e.selectionMethod?"single"!==e.clickTrigger:"checkbox"===e.selectionMethod&&(t.metaKey||t.ctrlKey),handler:(t,n)=>{let{item:i,selectionMode:r}=t,o=!1;o||(o="toggle"===r),o||(o=n.metaKey),o||(o=n.ctrlKey),e(i,n.shiftKey,o)}}),Rs=e=>({eventName:"onKeyUp",filter:(e,t)=>"none"!==e.selectionMethod&&function(e){return"Space"===e.code&&e.shiftKey}(t),handler:t=>{let{item:n}=t;return e(n,!1,!0)}});const Vs=e=>({eventName:"onClick",handler:(t,n)=>e({type:"Mouse",reactEvent:n})}),Ls=e=>({eventName:"onKeyDown",handler:(t,n)=>e({type:"Keyboard",reactEvent:n})}),js=e=>({eventName:"onFocus",handler:(t,n)=>e({type:"Focus",reactEvent:n})});function zs(e){return[Vs(e),Ls(e),js(e)]}class Hs{constructor(e){H(this,"entries",void 0),this.entries=e}getClickEntry(){const{onClick:e=[],onDoubleClick:t=[]}=xs(this.entries);let n=0;return{eventName:"onClick",handler:(i,r)=>{Date.now()-n>320?(e.forEach((e=>this.runEntry(e,i,r))),n=Date.now()):(t.forEach((e=>this.runEntry(e,i,r))),n=0)}}}runEntry(e,t,n){var i,r;(null===(i=null===(r=e.filter)||void 0===r?void 0:r.call(e,t,n))||void 0===i||i)&&e.handler(t,n)}}class Fs{constructor(e,t,n,i,r,o){this.contextFactory=e,this.selectFx=t,this.selectAllFx=n,this.selectAdjacentFx=i,this.executeActionFx=r,this.focusTargetFx=o}getProps(e){return Cs((()=>this.contextFactory(e)),this.getEntries())}getEntries(){const e=[...(t=this.selectFx,n=this.selectAllFx,i=this.selectAdjacentFx,[(r=ks,{eventName:"onMouseDown",filter:e=>"none"!==e.selectionMethod,handler:r}),Ms(t),Rs(t),G((()=>{Ps(),n("selectAll")}),(()=>Ds())),X(i)].flat()),...Ns(this.executeActionFx),...zs(this.focusTargetFx)];var t,n,i,r;const o=e.filter((e=>"onClick"===e.eventName||"onDoubleClick"===e.eventName)),s=e.filter((e=>"onClick"!==e.eventName&&"onDoubleClick"!==e.eventName));return[new Hs(o).getClickEntry(),...s]}}const Ks=e=>({eventName:"onClick",filter:e=>"checkbox"===e.selectionMethod,handler:(t,n)=>{let{item:i}=t;return e(i,n.shiftKey,!0)}});function Bs(e,t,n){return[Ks(e),...X(n),...G((()=>{Ps(),t("selectAll")}),(()=>Ds()))]}class Us{constructor(e,t,n,i,r){this.contextFactory=e,this.selectFx=t,this.selectAllFx=n,this.selectAdjacentFx=i,this.focusTargetFx=r,this.getProps=e=>Cs((()=>this.contextFactory(e)),[...Bs(this.selectFx,this.selectAllFx,this.selectAdjacentFx),...zs(this.focusTargetFx)])}}class Ws{constructor(e,t){H(this,"_listeners",void 0),H(this,"_focusTarget",void 0),H(this,"_positionController",void 0),H(this,"_layout",void 0),H(this,"dispatch",(e=>{const t=this._positionController.dispatch(e,this._layout);void 0!==t&&t!==this._focusTarget&&("Keyboard"===e.type?this._setTargetAndFocus(t):this._setTarget(t))})),this._listeners=[],this._focusTarget=this._getInitPosition(),this._positionController=e,this._layout=t}get focusTarget(){return this._focusTarget}addListener(e){this._listeners.push(e)}removeListener(e){this._listeners.splice(this._listeners.indexOf(e),1)}updateGridLayout(e){this._layout=e,void 0===this._layout.get(Pr(this._focusTarget))&&this._setTarget(this._getInitPosition())}_setTarget(e){const t=this._focusTarget;this._focusTarget=e,this._emit({lastPos:t,targetPos:e,shouldFocus:!1})}_setTargetAndFocus(e){const t=this._focusTarget;this._focusTarget=e,this._emit({lastPos:t,targetPos:e,shouldFocus:!0})}_emit(e){for(const t of this._listeners)t(e)}_getInitPosition(){return kr(0,0)}}class qs{constructor(e,t,n){H(this,"rows",void 0),H(this,"columns",void 0),H(this,"pageSize",void 0),H(this,"_positions",void 0),this.columns=t,this.rows=e,this.pageSize=n,this._positions=new Set;for(let n=0;n<e;n+=1)for(let e=0;e<t;e+=1)this._positions.add(kr(e,n))}get(e){let[t,n]=e;const i=kr(t<0?this.columns+t:t,n<0?this.rows+n:n);if(this._positions.has(i))return i}}const Gs=new Set(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft","PageUp","PageDown","End","Home"]);const Js={ArrowUp:function(e){let[t,n]=e;return[t,Math.max(0,n-1)]},ArrowRight:function(e){let[t,n]=e;return[t+1,n]},ArrowDown:function(e){let[t,n]=e;return[t,n+1]},ArrowLeft:function(e){let[t,n]=e;return[Math.max(0,t-1),n]},PageUp:(e,t)=>function(e,t){let[n,i]=e;return[n,Math.max(0,i-t)]}(e,t.pageSize),PageDown:(e,t)=>function(e,t,n){let[i,r]=e;return[i,Math.min(n-1,r+t)]}(e,t.pageSize,t.rows),End:(e,t,n)=>{let{ctrlKey:i}=n;return i?[-1,-1]:function(e){let[t,n]=e;return[-1,n]}(e)},Home:(e,t,n)=>{let{ctrlKey:i}=n;return i?[0,0]:function(e){let[t,n]=e;return[0,n]}(e)}};class Xs{dispatch(e,t){return"Focus"===e.type?this._handleFocusEvent(e.reactEvent):"Mouse"===e.type?this._handleMouseEvent(e.reactEvent):this._handleKeyboardEvent(e.reactEvent,t)}_handleKeyboardEvent(e,t){if(n=e.code,!Gs.has(n))return;var n;if(!Object.hasOwn(Js,e.code))throw new Error("Keyboard nav: can't find handler for ".concat(e.code," key"));e.preventDefault();const i=Pr(this._getTargetPosition(e));return t.get(Js[e.code](i,t,e))}_handleMouseEvent(e){return this._getTargetPosition(e)}_handleFocusEvent(e){return this._getTargetPosition(e)}_getTargetPosition(e){var t;const n=null===(t=e.currentTarget.dataset)||void 0===t?void 0:t.position;if(void 0===n)throw new Error("Keyboard navigation: target position is missing");return n}}const Zs=Object.freeze({reset:{value:"reset.value",filters:"reset.filters"},set:{value:"set.value"}});let Ys=()=>({emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(let t=0,i=this.events[e]||[],r=i.length;t<r;t++)i[t](...n)},events:{},on(e,t){var n;return((n=this.events)[e]||(n[e]=[])).push(t),()=>{var n;this.events[e]=null===(n=this.events[e])||void 0===n?void 0:n.filter((e=>t!==e))}}});const $s="com.mendix.widgets.web.plugin.externalEvents";class Qs{constructor(){H(this,"channels",void 0),H(this,"id",Math.random().toString().slice(2)),this.channels=new Map}disposeChannel(e){const t=this.channels.get(e);return t&&(t.events={}),this.channels.delete(e)}getChannel(e){let t=this.channels.get(e);return t||(t=Ys(),this.channels.set(e,t),t)}emit(e,t){for(var n,i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];null===(n=this.channels.get(e))||void 0===n||n.emit(t,...r)}subscribe(e,t,n){return this.getChannel(e).on(t,n),()=>this.unsubscribe(e,t,n)}unsubscribe(e,t,n){const i=this.channels.get(e);if(!i)return;const r=i.events[t];r&&(i.events[t]=r.filter((e=>e!==n)));0===Object.values(i.events).flat().reduce(((e,t)=>t?e+1:e),0)&&this.disposeChannel(e)}}function ea(){var e,t;return null!==(t=(e=window)[$s])&&void 0!==t?t:e[$s]=function(){if(Object.prototype.hasOwnProperty.call(window,$s))throw new Error("Widget plugin external events: plugin already initialized!");return new Qs}()}const ta=function(){return ea().emit(...arguments)};function na(e){var i,r,o;i=e.inputChannel,r=e.event,o=t((function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.onEvent(ta,n)})).current,n((()=>{if(void 0!==i)return ea().subscribe(i,r,o)}),[i,r])}class ia{constructor(){var e,t,n;this.exporting=!1,this.lengthComputable=!1,this.loaded=0,this.total=0,this.onloadstart=e=>{this.exporting=!0,this.lengthComputable=e.lengthComputable,this.total=e.total,this.loaded=0},this.onprogress=e=>{this.loaded=e.loaded},this.onloadend=()=>{this.exporting=!1,this.lengthComputable=!1,this.loaded=0,this.total=0},pe(e=this)?Un(e,e,t,n):ir((function(){var i=ji(e,n)[He];if(!e[ci]){var r=Object.getPrototypeOf(e),o=new Set([].concat(Ce(e),Ce(r)));o.delete("constructor"),o.delete(He),_e(r,ci,o)}e[ci].forEach((function(e){return i.make_(e,!t||!(e in t)||t[e])}))}))}}class ra{constructor(e){this.rules=[],this.rules=e,ui(this,{rules:Nt.struct,toggleSort:kn})}getDirection(e){const t=this.rules.findIndex((t=>t[0]===e));if(-1===t)return;const[,n]=this.rules.at(t);return[n,t+1]}toggleSort(e){const[[t,n]=[]]=this.rules;this.rules=t&&t===e?"asc"!==n?[]:[[e,"desc"]]:[[e,"asc"]]}}class oa{constructor(e){var t;this.alignment=e.alignment,this.sortable=e.sortable,this.resizable=e.resizable,this.draggable=e.draggable,this.hidable="no"!==e.hidable,this.initiallyHidden="hidden"===e.hidable,this.wrapText=e.wrapText,this.showContentAs=e.showContentAs,this.weight=null!==(t=e.size)&&void 0!==t?t:1,this.width=e.width,this.minWidth=e.minWidth,this.minWidthLimit=e.minWidthLimit,this.allowEventPropagation=e.allowEventPropagation}get columnWidth(){switch(this.width){case"autoFit":{const e="manual"===this.minWidth?"".concat(this.minWidthLimit,"px"):"minContent"===this.minWidth?"min-content":"auto";return"minmax(".concat(e,", auto)")}case"manual":return"".concat(this.weight,"fr");default:return"1fr"}}}class sa{constructor(e,t,n){this.size=void 0,this.headerElementRef=null,this._visible=void 0,this._header=void 0,this._columnClass=void 0,this._tooltip=void 0,this._attribute=void 0,this._dynamicText=void 0,this._content=void 0,this.parentStore=n,this.baseInfo=new oa(t),this.columnIndex=e,this.isHidden=this.baseInfo.initiallyHidden,this.orderWeight=10*e,ui(this,{_visible:Nt.ref,_header:Nt.ref,_columnClass:Nt.ref,_tooltip:Nt.ref,_attribute:Nt.ref,_dynamicText:Nt.ref,_content:Nt.ref,isHidden:Nt,size:Nt,orderWeight:Nt,updateProps:kn,toggleHidden:kn,setSize:kn,applySettings:kn,canSort:Mt,header:Mt,loaded:Mt,settings:Mt.struct}),this.updateProps(t)}updateProps(e){this._visible=e.visible,this._header=e.header,this._columnClass=e.columnClass,this._tooltip=e.tooltip,this._attribute=e.attribute,this._content=e.content,this._dynamicText=e.dynamicText}get alignment(){return this.baseInfo.alignment}get initiallyHidden(){return this.baseInfo.initiallyHidden}get wrapText(){return this.baseInfo.wrapText}get canDrag(){return this.baseInfo.draggable}get canHide(){return this.baseInfo.hidable}toggleHidden(){this.isHidden=!this.isHidden}get canResize(){return this.baseInfo.resizable&&!this.parentStore.isLastVisible(this)}setSize(e){this.size=e}get canSort(){var e;return this.baseInfo.sortable&&!!(null===(e=this._attribute)||void 0===e?void 0:e.sortable)}get sortDir(){var e;return null===(e=this.parentStore.sorting.getDirection(this.columnId))||void 0===e?void 0:e[0]}get sortWeight(){var e;return null===(e=this.parentStore.sorting.getDirection(this.columnId))||void 0===e?void 0:e[1]}toggleSort(){this.parentStore.sorting.toggleSort(this.columnId)}get columnId(){return this.columnIndex.toString()}get header(){var e,t;return null!==(t=null===(e=this._header)||void 0===e?void 0:e.value)&&void 0!==t?t:""}get isAvailable(){var e;return!this._visible||null!==(e=this._visible.value)&&void 0!==e&&e}get loaded(){return!this._visible||("loading"!==this._visible.status||void 0!==this._visible.value)}get attrId(){var e;return null===(e=this._attribute)||void 0===e?void 0:e.id}setHeaderElementRef(e){this.headerElementRef=e}takeSizeSnapshot(){var e;const t=null===(e=this.headerElementRef)||void 0===e?void 0:e.clientWidth;this.frozenSize=this.size,t&&this.setSize(t)}renderCellContent(e){var t,n,i,r,o,s,a;switch(this.baseInfo.showContentAs){case"attribute":case"dynamicText":return u("span",{className:"td-text",title:null===(n=null===(t=this._tooltip)||void 0===t?void 0:t.get(e))||void 0===n?void 0:n.value},"attribute"===this.baseInfo.showContentAs?null===(r=null===(i=this._attribute)||void 0===i?void 0:i.get(e))||void 0===r?void 0:r.displayValue:null===(s=null===(o=this._dynamicText)||void 0===o?void 0:o.get(e))||void 0===s?void 0:s.value);case"customContent":return u(ua,{allowEventPropagation:this.baseInfo.allowEventPropagation},null===(a=this._content)||void 0===a?void 0:a.get(e));default:throw new Error("Unknown content type: ".concat(this.baseInfo.showContentAs))}}columnClass(e){var t;return null===(t=this._columnClass)||void 0===t?void 0:t.get(e).value}getCssWidth(){return this.size?this.parentStore.isLastVisible(this)?"minmax(min-content, auto)":"".concat(this.size,"px"):this.baseInfo.columnWidth}get settings(){return{columnId:this.columnId,size:this.parentStore.isResizing?this.frozenSize:this.size,hidden:this.isHidden,orderWeight:this.orderWeight,sortDir:this.sortDir,sortWeight:this.sortWeight}}applySettings(e){this.size=e.size,this.canHide&&(this.isHidden=e.hidden),this.orderWeight=10*e.orderWeight}}const aa=e=>{e.stopPropagation()},la=e=>{"Tab"!==e.code&&e.stopPropagation()};function ua(e){let{children:t,allowEventPropagation:n}=e;return u("div",{className:"td-custom-content",...n?{}:{onClick:aa,onKeyUp:aa,onKeyDown:la}},t)}const ca=(e,t)=>Object.hasOwn(e,t);function da(e){return ca(e,"arg1")&&ca(e,"arg2")}function ha(e){return"function"===e.type&&"and"===e.name}function fa(e){return"function"===e.type&&"or"===e.name}function va(e){return da(e)&&"literal"===e.arg2.type&&"="===e.name&&"undefined"===e.arg2.valueType}function ga(e){return da(e)&&"literal"===e.arg2.type&&"!="===e.name&&"undefined"===e.arg2.valueType}function pa(e){return _(b(e),b(e))}function ma(e){const[t,n]=[(i=e).flatMap(((e,t)=>void 0===e?[]:[t])),i.filter((e=>void 0!==e))];var i;const r=[e.length,t],o=pa((s=r,JSON.stringify(s)));var s;const a=pa("_");return m(o,a,...n)}function _a(e){if(!ha(e))return[];const[t]=e.args,n=function(e){return"="===e.name&&"literal"===e.arg1.type&&"literal"===e.arg2.type&&/string/i.test(e.arg1.valueType)&&/string/i.test(e.arg2.valueType)&&e.arg1.value===e.arg2.value}(t)?function(e){let t,n;try{[t,n]=JSON.parse(e)}catch{return}if("number"==typeof t&&Array.isArray(n)&&n.every((e=>"number"==typeof e)))return[t,n]}(t.arg1.value):void 0;if(!n)return[];const[i,r]=n,o=Array(i).fill(void 0);return e.args.slice(2).forEach(((e,t)=>{o[r[t]]=e})),o}function ba(e,t,n){return fa(e)?ba(e.args[0],t,n):ha(e)?ya(e,t,n):wa(e,t,n)}function ya(e,t,n){const[i,r]=e.args,[o,s]=[Sa(i,n),Sa(r,n)];return o&&s?[t("between"),o,s]:null}function wa(e,t,n){const i=Sa(e,n);return null===i?null:va(e)?[t("empty"),i]:ga(e)?[t("notEmpty"),i]:[t(e.name),i]}function Sa(e,t){return da(e)?"literal"!==e.arg2.type?null:t(e.arg2):null}function xa(e,t){const n=(e,i)=>{if("or"===i.name)return i.args.reduce(n,e);if("="===i.name||"contains"===i.name){const n=Sa(i,t);null!=n&&e.push(n)}return e};return[e].reduce(n,[])}function Ca(e){return[e].flatMap((e=>"or"===e.name?e.args.flatMap(Ca):"="===e.name||"contains"===e.name?[e]:[]))}class Oa{constructor(e,t){H(this,"_value",void 0),H(this,"isValid",!0),H(this,"_formatter",void 0),H(this,"_lastSetTextValue",""),this._formatter=e,this._value=t,ui(this,{_value:Nt,value:Mt,isValid:Nt,_lastSetTextValue:Nt,displayValue:Mt,_formatter:Nt.ref})}updateProps(e){this._formatter=e}set value(e){this._value=e,this._lastSetTextValue="",this.isValid=!0}get value(){return this._value}get displayValue(){var e,t;return this.isValid?(null===(e=this._formatter)||void 0===e?void 0:e.format(this.value))||(null===(t=this.value)||void 0===t?void 0:t.toString())||"":this._lastSetTextValue}set displayValue(e){var t;this._lastSetTextValue=e;const n=null===(t=this._formatter)||void 0===t?void 0:t.parse(this._lastSetTextValue);this.isValid=n.valid,n.valid&&!this.equals(this._value,n.value)&&(this._value=n.value)}equals(e,t){throw new Error("equals not implemented")}}class Aa extends Oa{constructor(){super(...arguments),H(this,"type","number")}equals(e,t){return Object.is(e,t)||!!(e&&t&&e.eq(t))}}class Ea extends Oa{constructor(){super(...arguments),H(this,"type","date")}equals(e,t){return Object.is(e,t)||!(!e||!t||+e!=+t)}}class Ia extends Oa{constructor(){super(...arguments),H(this,"type","string")}equals(e,t){return e===t}}class Ta{constructor(e,t,n,i){H(this,"_attributes",[]),H(this,"filterFunction",void 0),H(this,"arg1",void 0),H(this,"arg2",void 0),H(this,"isInitialized",!1),H(this,"defaultState",void 0),H(this,"UNSAFE_setDefaults",(e=>{this.defaultState=e,!1===this.isInitialized&&(this.setState(e),this.isInitialized=!0)})),H(this,"reset",(()=>{this.setState(this.defaultState)})),H(this,"clear",(()=>{this.setState([this.filterFunction])})),H(this,"setFilterFn",(e=>{this.filterFunction=e})),this._attributes=i,this.defaultState=[n],this.filterFunction=n,this.arg1=e,this.arg2=t,ui(this,{_attributes:Nt.ref,filterFunction:Nt,condition:Mt,setState:kn,UNSAFE_setDefaults:kn,setFilterFn:kn})}setState(e){[this.filterFunction,this.arg1.value,this.arg2.value]=e}get condition(){const e=this._attributes.map((e=>function(e,t,n,i){if(!e||!e.filterable||"empty"!==i&&"notEmpty"!==i&&!t||"between"===i&&(!t||!n))return;if("between"===i)return m(w(S(e.id),b(t)),x(S(e.id),b(n)));return{contains:C,startsWith:O,endsWith:A,greater:w,greaterEqual:E,equal:_,notEqual:I,smaller:x,smallerEqual:T,empty:_,notEmpty:I}[i](S(e.id),b("empty"===i||"notEmpty"===i?void 0:t))}(e,this.arg1.value,this.arg2.value,this.filterFunction))).filter((e=>void 0!==e));return(null==e?void 0:e.length)>1?y(...e):null==e?void 0:e[0]}unpackJsonData(e){if(Array.isArray(e)&&3===e.length)return e}}class Na extends Ta{constructor(e,t){const{formatter:n}=e[0];super(new Ea(n),new Ea(n),"equal",e),H(this,"storeType","input"),H(this,"type","date"),H(this,"rangeMarkerTag","__RANGE_MARKER__"),H(this,"computedState",void 0),H(this,"mapFn",(e=>{switch(e){case"day:=":default:return"equal";case"day:!=":return"notEqual";case"day:<":return"smaller";case"day:<=":return"smallerEqual";case"day:>":return"greater";case"day:>=":return"greaterEqual"}})),ui(this,{updateProps:kn,computedState:Nt.shallow,fromViewState:kn,fromJSON:kn}),t&&this.fromViewState(t),this.computedState=[this.filterFunction,this.arg1.value,this.arg2.value],this.setupComputeValues()}get condition(){const e=this._attributes.flatMap((e=>this.getCondition(e,...this.computedState)));switch(e.length){case 0:return;case 1:return e[0];default:return y(...e)}}setup(){const e=[];return e.push(this.setupComputeValues()),()=>e.forEach((e=>e()))}updateProps(e){if(!Ue.shallow(this._attributes,e)){var t;this._attributes=e;const n=null===(t=e.at(0))||void 0===t?void 0:t.formatter;this.arg1.updateProps(n),this.arg2.updateProps(n)}}setupComputeValues(){return Ln((()=>[this.filterFunction,this.arg1.value,this.arg2.value]),(e=>{const[t,n,i]=e;"between"===t&&n instanceof Date&&void 0===i||(this.computedState=e)}),{equals:Ue.shallow})}isRange(e){const[t,n]=Array.isArray(e)?e:[];return t instanceof Date&&n instanceof Date}getCondition(e,t,n,i){if(!e.filterable)return[];if("between"===t){const t=[n,i];return this.isRange(t)?this.getRangeCondition(e,t):[]}return this.getAttrCondition(e,t,n)}getAttrCondition(e,t,n){const[i,r]=[S(e.id),b(n)];if("empty"===t)return[_(i,b(void 0))];if("notEmpty"===t)return[I(i,b(void 0))];if(void 0===n)return[];switch(t){case"greater":return[R(i,r)];case"greaterEqual":return[M(i,r)];case"equal":return[D(i,r)];case"notEqual":return[P(i,r)];case"smaller":return[k(i,r)];case"smallerEqual":return[N(i,r)];default:return[]}}getRangeCondition(e,t){let[n,i]=t;[n,i]=[Ma(n),Pa(Ma(i))];const r=S(e.id);return[m(M(r,b(n)),k(r,b(i)),this.getRangeCondMarker())]}rangeExpToState(e){const t=ya(e,(()=>"between"),(e=>"DateTime"===e.valueType?e.value:void 0));if(null===t)return null;const[n,i,r]=t;return[n,i,r?Da(r):void 0]}getRangeCondMarker(){return _(b(this.rangeMarkerTag),b(this.rangeMarkerTag))}isRangeMarker(e){return!!e&&("function"===e.type&&"="===e.name&&"literal"===e.arg1.type&&"literal"===e.arg2.type&&e.arg1.value===this.rangeMarkerTag&&e.arg2.value===this.rangeMarkerTag)}toJSON(){return[this.filterFunction,this.arg1.value?this.arg1.value.toJSON():null,this.arg2.value?this.arg2.value.toJSON():null]}fromJSON(e){const t=this.unpackJsonData(e);if(!t)return;const[n,i,r]=t;this.filterFunction=n,this.arg1.value=ka(i),this.arg2.value=ka(r),this.isInitialized=!0}fromViewState(e){const t=e=>"DateTime"===e.valueType?e.value:void 0,n=(e=>(fa(e)&&(e=e.args[0]),va(e)?["empty",void 0,void 0]:ga(e)?["notEmpty",void 0,void 0]:ha(e)&&this.isRangeMarker(e.args.at(2))?this.rangeExpToState(e):wa(e,this.mapFn,t)))(e);n&&(this.setState(n),this.isInitialized=!0)}}function ka(e){if(null===e)return;const t=new Date(e);return"Invalid Date"===t.toString()?void 0:t}function Pa(e){return(e=new Date(e.getTime())).setUTCHours(24),e}function Da(e){return(e=new Date(e.getTime())).setUTCHours(-24),e}function Ma(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0))}function Ra(e){switch(e){case"=":default:return"equal";case"!=":return"notEqual";case">":return"greater";case">=":return"greaterEqual";case"<":return"smaller";case"<=":return"smallerEqual";case"between":case"empty":case"notEmpty":return e}}class Va extends Ta{constructor(e,t){let{formatter:n}=e[0];n=function(e){var t;if(!1===(null===(t=e.parse("none"))||void 0===t?void 0:t.valid))return e;return{format:e=>e?e.toString():e,parse:e=>{try{return{valid:!0,value:new z(e)}}catch{return""===e?{valid:!0,value:void 0}:{valid:!1}}}}}(n),super(new Aa(n),new Aa(n),"equal",e),H(this,"storeType","input"),H(this,"type","number"),ui(this,{updateProps:kn,fromJSON:kn,fromViewState:kn}),t&&this.fromViewState(t)}updateProps(e){Ue.shallow(this._attributes,e)||(this._attributes=e)}toJSON(){return[this.filterFunction,this.arg1.value?this.arg1.value.toJSON():null,this.arg2.value?this.arg2.value.toJSON():null]}fromJSON(e){const t=this.unpackJsonData(e);if(!t)return;const[n,i,r]=t;this.filterFunction=n;try{this.arg1.value=new z(null!=i?i:"")}catch{this.arg1.value=void 0}try{this.arg2.value=new z(null!=r?r:"")}catch{this.arg2.value=void 0}this.isInitialized=!0}fromViewState(e){const t=ba(e,(e=>Ra(e)),(e=>"Numeric"===e.valueType?e.value:void 0));t&&(this.setState(t),this.isInitialized=!0)}}class La{constructor(e,t){H(this,"storeType","optionlist"),H(this,"type","select"),H(this,"isLoading",!1),H(this,"hasMore",!1),H(this,"hasSearch",!1),H(this,"defaultValue",void 0),H(this,"isInitialized",!1),H(this,"_selected",new Set),H(this,"_attributes",[]),H(this,"_customOptions",[]),H(this,"UNSAFE_setDefaults",(e=>{var t;null!==(t=this.defaultValue)&&void 0!==t||(this.defaultValue=e),!1===this.isInitialized&&void 0!==this.defaultValue&&(this.replace(this.defaultValue),this.isInitialized=!0)})),H(this,"reset",(()=>{this.replace(void 0!==this.defaultValue?this.defaultValue:[])})),H(this,"clear",(()=>{this.replace([])})),this._attributes=e,ui(this,{_attributes:Nt.ref,_selected:Nt,_customOptions:Nt.ref,options:Mt,universe:Mt,replace:kn,toggle:kn,updateProps:kn,fromJSON:kn,fromViewState:kn,setCustomOptions:kn}),t&&this.fromViewState(t)}get options(){if(this._customOptions.length>0)return this._customOptions.map((e=>({...e,selected:this._selected.has(e.value)})));const e=this._attributes.flatMap((e=>{var t;return Array.from(null!==(t=e.universe)&&void 0!==t?t:[],(t=>{const n="".concat(t);return{caption:e.formatter.format(t),value:n,selected:this._selected.has(n)}}))}));return e}get universe(){return new Set(this._attributes.flatMap((e=>{var t;return Array.from(null!==(t=e.universe)&&void 0!==t?t:[],(e=>"".concat(e)))})))}get condition(){const e=this._attributes.flatMap((e=>{const t=function(e,t){if(!e||!e.filterable||0===t.size)return;const{id:n,type:i}=e,r=S(n),o=[...t].filter((t=>{var n;return null===(n=e.universe)||void 0===n?void 0:n.includes(ja(e.type,t))})).map((e=>_(r,b(ja(i,e)))));if(o.length>1)return y(...o);const[s]=o;return s}(e,this._selected);return t?[t]:[]}));return e.length>1?y(...e):e[0]}updateProps(e){Ue.shallow(this._attributes,e)||(this._attributes=e)}replace(e){const t=new Set(e);Ue.structural(this._selected,t)||(this._selected=t)}toggle(e){!1===this._selected.delete(e)&&this._selected.add(e)}checkAttrs(){return this._attributes.every((e=>/Enum|Boolean/.test(e.type)))?null:new TypeError("StaticSelectFilterStore: invalid attribute found. Check widget configuration.")}isValidValue(e){return this.universe.has(e)}loadMore(){console.warn("StaticSelectFilterStore: calling loadMore has no effect.")}setSearch(){console.warn("StaticSelectFilterStore: calling setSearch has no effect.")}toJSON(){return[...this._selected]}fromJSON(e){Array.isArray(e)&&e.every((e=>"string"==typeof e))&&this.replace(e),this.isInitialized=!0}fromViewState(e){const t=xa(e,(e=>"string"===e.valueType?e.value:"boolean"===e.valueType?e.value?"true":"false":void 0));t.length>0&&(this.replace(t),this.isInitialized=!0)}setCustomOptions(e){this._customOptions=e}}function ja(e,t){return"Boolean"===e?"true"!==t&&"false"!==t?t:"true"===t:t}class za extends Ta{constructor(e,t){const{formatter:n}=e[0];super(new Ia(n),new Ia(n),"equal",e),H(this,"storeType","input"),H(this,"type","string"),ui(this,{updateProps:kn,fromJSON:kn,fromViewState:kn}),t&&this.fromViewState(t)}updateProps(e){var t;Ue.shallow(this._attributes,e)||(this._attributes=e);const n=null===(t=e.at(0))||void 0===t?void 0:t.formatter;this.arg1.updateProps(n),this.arg2.updateProps(n)}toJSON(){var e,t;return[this.filterFunction,null!==(e=this.arg1.value)&&void 0!==e?e:null,null!==(t=this.arg2.value)&&void 0!==t?t:null]}fromJSON(e){const t=this.unpackJsonData(e);if(!t)return;const[n,i,r]=t;this.filterFunction=n,this.arg1.value=i||void 0,this.arg2.value=r||void 0,this.isInitialized=!0}fromViewState(e){const t=ba(e,(e=>"contains"===e?"contains":"starts-with"===e?"startsWith":"ends-with"===e?"endsWith":Ra(e)),(e=>"string"===e.valueType?e.value:void 0));t&&(this.setState(t),this.isInitialized=!0)}}const Ha=new Set(["empty","notEmpty","equal","notEqual","greater","greaterEqual","smaller","smallerEqual","between","contains","startsWith","endsWith"]);class Fa{constructor(e,t){var n;H(this,"_selectedDraft",new Set),H(this,"disposers",[]),H(this,"storeType","optionlist"),H(this,"type","refselect"),H(this,"defaultValue",void 0),H(this,"isInitialized",!1),H(this,"lazyMode",void 0),H(this,"_ref",void 0),H(this,"_refOptions",void 0),H(this,"_caption",void 0),H(this,"_searchAttrId",void 0),H(this,"_initCond",void 0),H(this,"_initCondArray",void 0),H(this,"UNSAFE_setDefaults",(e=>{console.warn("RefFilterStore: calling UNSAFE_setDefaults has no effect.")})),H(this,"reset",(()=>{this.replace([])})),H(this,"clear",(()=>{this.reset()})),this._ref=e.ref,this._refOptions=e.refOptions,this._caption=e.caption,this._searchAttrId=e.searchAttrId,this._initCondArray=t?Ca(t):[],this.lazyMode=null===(n=e.fetchOptionsLazy)||void 0===n||n,this.lazyMode&&this._refOptions.setLimit(0),ui(this,{_ref:Nt.ref,_refOptions:Nt.ref,_caption:Nt.ref,_selectedDraft:Nt,selected:Mt,options:Mt,hasMore:Mt,isLoading:Mt,allIds:Mt.struct,replace:kn,toggle:kn,updateProps:kn,fromJSON:kn}),t&&this.fromViewState(t)}get hasSearch(){return void 0!==this._searchAttrId}get hasMore(){var e;return null!==(e=this._refOptions.hasMoreItems)&&void 0!==e&&e}get isLoading(){return"loading"===this._refOptions.status}get options(){var e;return(null!==(e=this._refOptions.items)&&void 0!==e?e:[]).map((e=>({caption:"".concat(this._caption.get(e).value),value:"".concat(e.id),selected:this.selected.has(e.id)})))}get condition(){if(this.selected.size<1)return;const e=[...this.selected].flatMap((e=>{var t;const n=(null!==(t=this._refOptions.items)&&void 0!==t?t:[]).find((t=>t.id===e));if(n&&"Reference"===this._ref.type)return[Ka(this._ref,n)];if(n&&"ReferenceSet"===this._ref.type)return[Ba(this._ref,[n])];const i=this._initCondArray.find((t=>"literal"===t.arg2.type&&("Reference"===t.arg2.valueType?t.arg2.value===e:"ReferenceSet"===t.arg2.valueType&&t.arg2.value.at(0)===e)));return i?[i]:[]}));return e.length>1?y(...e):e[0]}get selected(){let e=this._selectedDraft;return this.allIds.size>0&&(e=new Set([...e].filter((e=>this.allIds.has(e))))),e}get selectedCount(){return this.selected.size}get allIds(){var e,t;const n=null===(e=this._refOptions.hasMoreItems)||void 0===e||e,i="loading"===this._refOptions.status;if(n||i)return new Set;const r=null!==(t=this._refOptions.items)&&void 0!==t?t:[];return new Set(r.map((e=>e.id)))}setup(){return()=>{this.disposers.forEach((e=>e())),this.disposers.length=0}}updateProps(e){this._ref=e.ref,this._refOptions=e.refOptions,this._caption=e.caption}replace(e){this._selectedDraft=new Set(e)}toggle(e){!1===this._selectedDraft.delete(e)&&this._selectedDraft.add(e)}isValidValue(e){return"string"==typeof e}loadMore(){this._refOptions.setLimit(this._refOptions.limit+30)}setSearch(e){if(!this._searchAttrId)return;const t="string"==typeof e&&""!==e?C(S(this._searchAttrId),b(e)):void 0;this._refOptions.setFilter(t)}toJSON(){return[...this.selected]}fromJSON(e){null!==e&&(function(e){if(Array.isArray(e)){const[t]=e;return Ha.has(t)}return!1}(e)||this.replace(e))}setCustomOptions(e){}fromViewState(e){const t=xa(e,(e=>{switch(e.valueType){case"Reference":return e.value;case"ReferenceSet":return e.value.at(0);default:return}}));t.length>0&&(this.replace(t),this.isInitialized=!0)}}function Ka(e,t){return _(V(e.id),b(t))}function Ba(e,t){const n=t.length?b(t.slice()):L();return C(V(e.id),n)}function Ua(e){if(null==e)throw new Error(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Did not expect an argument to be undefined");return e}const{Provider:Wa}=fs();class qa{constructor(e,t,n){this._filterStore=null,this._widget=e.filter,this._filterStore=this.createFilterStore(e,n),this._context=this.createContext(this._filterStore,t),ui(this,{_updateStore:kn,condition2:Mt,updateProps:kn})}updateProps(e){this._widget=e.filter,this._updateStore(e)}_updateStore(e){const t=this._filterStore;null!==t&&("refselect"===t.type?t.updateProps(this.toRefselectProps(e)):Ga(e.attribute)&&t.updateProps([e.attribute]))}toRefselectProps(e){return{ref:Ua(e.filterAssociation,Ja("filterAssociation")),refOptions:Ua(e.filterAssociationOptions,Ja("filterAssociationOptions")),caption:Ua(e.filterAssociationOptionLabel,Ja("filterAssociationOptionLabel")),fetchOptionsLazy:e.fetchOptionsLazy}}createFilterStore(e,t){return e.filterAssociation?new Fa(this.toRefselectProps(e),t):Ga(e.attribute)?function(e,t,n){switch(e){case"DateTime":return new Na(t,n);case"AutoNumber":case"Decimal":case"Integer":case"Long":return new Va(t,n);case"String":case"HashString":return new za(t,n);case"Boolean":case"Enum":return new La(t,n);default:return console.error("attrgroupFilterStore: not supported type "+e,t),null}}(e.attribute.type,[e.attribute],t):null}createContext(e,t){return{version:2,parentChannelName:t.filtersChannelName,provider:us({type:"direct",store:e})}}renderFilterWidgets(){return u(Wa,{value:this._context},this._widget)}get condition2(){return this._filterStore?this._filterStore.condition:void 0}get settings(){var e;return null===(e=this._filterStore)||void 0===e?void 0:e.toJSON()}set settings(e){var t,n;void 0===e?null===(t=this._filterStore)||void 0===t||t.reset():null===(n=this._filterStore)||void 0===n||n.fromJSON(e)}}const Ga=e=>!(!e||!1!==e.isList),Ja=e=>"Can't map ColumnsType to AssociationProperties: ".concat(e," is undefined");class Xa{constructor(e,t,n){var i,r;this._allColumnsById=new Map,this.isResizing=!1,this._allColumns=[],this.columnFilters=[],e.columns.forEach(((e,i)=>{var r;const o=null!==(r=null==n?void 0:n.at(i))&&void 0!==r?r:null,s=new sa(i,e,this);this._allColumnsById.set(s.columnId,s),this._allColumns[i]=s,this.columnFilters[i]=new qa(e,t,o)})),this.sorting=new ra((i=e.datasource.sortOrder,r=this._allColumns,i&&i.length?i.map((e=>{var t;const[n,i]=e,o=null===(t=r.find((e=>e.attrId===n)))||void 0===t?void 0:t.columnId;if(o)return[o,i]})).filter((e=>!!e)):[])),ui(this,{_allColumns:Nt,isResizing:Nt,loaded:Mt,_allColumnsOrdered:Mt,availableColumns:Mt,visibleColumns:Mt,conditions:Mt.struct,columnSettings:Mt.struct,filterSettings:Mt({keepAlive:!0}),updateProps:kn,setIsResizing:kn,swapColumns:kn,setColumnSettings:kn})}updateProps(e){e.columns.forEach(((e,t)=>{this._allColumns[t].updateProps(e),this.columnFilters[t].updateProps(e)})),this.visibleColumns.length<1&&this._allColumns.forEach((e=>{e.isHidden=!1}))}swapColumns(e,t){let[n,i]=t;const r=this._allColumnsById.get(e),o=this._allColumnsById.get(n);r.orderWeight=o.orderWeight+("after"===i?1:-1),this._allColumnsOrdered.forEach(((e,t)=>{e.orderWeight=10*t}))}setIsResizing(e){this.isResizing=e,this.isResizing&&this._allColumns.forEach((e=>e.takeSizeSnapshot()))}get loaded(){return this._allColumns.every((e=>e.loaded))}get _allColumnsOrdered(){return[...this._allColumns].sort(((e,t)=>e.orderWeight-t.orderWeight))}get availableColumns(){return[...this._allColumnsOrdered].filter((e=>e.isAvailable))}get visibleColumns(){return[...this.availableColumns].filter((e=>!e.isHidden))}get conditions(){return this.columnFilters.map(((e,t)=>this._allColumns[t].isHidden?void 0:e.condition2))}get sortInstructions(){return function(e,t){if(e.length)return e.map((e=>{var n;const[i,r]=e,o=null===(n=t.find((e=>e.columnId===i)))||void 0===n?void 0:n.attrId;if(o)return[o,r]})).filter((e=>!!e))}(this.sorting.rules,this._allColumns)}get columnSettings(){return this._allColumns.map((e=>e.settings))}get filterSettings(){return this.columnFilters.reduce(((e,t,n)=>(t.settings&&e.set(this._allColumns[n].columnId,t.settings),e)),new Map)}setColumnSettings(e){e.forEach((e=>{const t=this._allColumnsById.get(e.columnId);t?t.applySettings(e):console.warn("Error while restoring personalization config. Column '".concat(e.columnId,"' is not found."))})),this.sorting.rules=e.filter((e=>e.sortDir&&void 0!==e.sortWeight)).sort(((e,t)=>e.sortWeight-t.sortWeight)).map((e=>[e.columnId,e.sortDir]))}setColumnFilterSettings(e){var t,n;for(const[i,r]of e){const e=null!==(n=null===(t=this._allColumnsById.get(i))||void 0===t?void 0:t.columnIndex)&&void 0!==n?n:NaN,o=this.columnFilters.at(e);o&&(o.settings=r)}}isLastVisible(e){return this.visibleColumns.at(-1)===e}}class Za{constructor(e){this._storageAttr=e.configurationAttribute,ui(this,{_storageAttr:Nt.ref,_value:Mt,settings:Mt.struct,updateProps:kn})}updateProps(e){this._storageAttr=e.configurationAttribute}get _value(){if(this._storageAttr&&"available"===this._storageAttr.status)return this._storageAttr.value}get settings(){if(this._value)return JSON.parse(this._value)}updateSettings(e){if(e=""===e||null===e?void 0:e,this._storageAttr&&!this._storageAttr.readOnly){const t=JSON.stringify(e);this._storageAttr.value!==t&&this._storageAttr.setValue(t)}}}class Ya{constructor(e){this.key=e}get settings(){const e=localStorage.getItem(this.key);return e?JSON.parse(e):void 0}updateSettings(e){const t=JSON.stringify(e);localStorage.getItem(this.key)!==t&&localStorage.setItem(this.key,t)}}class $a{constructor(e,t,n){var i,r;this.columnsStore=t,this.headerFilters=n,this.schemaVersion=2,this.disposers=[],this.gridName=e.name,this.gridColumnsHash=(i=this.columnsStore._allColumns,r=this.gridName,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2166136261;const n=e.length;for(let i=0;i<n;i++)t^=e.charCodeAt(i),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}(JSON.stringify({name:r,columns:i.map((e=>({columnId:e.columnId,canSort:e.canSort,canHide:e.canHide,canResize:e.canResize,canDrag:e.canDrag})))})).toString()),ui(this,{settings:Mt,applySettings:kn}),"localStorage"===e.configurationStorageType?this.storage=new Ya("".concat(this.gridName,"_").concat(this.gridColumnsHash)):this.storage=new Za(e),this.disposers.push(this.setupReadReaction()),this.disposers.push(this.setupWriteReaction())}dispose(){this.disposers.forEach((e=>e()))}updateProps(e){var t,n;null===(n=(t=this.storage).updateProps)||void 0===n||n.call(t,e)}setupReadReaction(){return Ln((()=>{const e=this.storage.settings,t=this.readSettings(this.gridName,this.gridColumnsHash,e);return t.hasError?(t.error instanceof Qa&&(console.warn(this.gridName,t.error),console.warn(this.gridName,"Erase settings to prevent errors."),this.storage.updateSettings(void 0)),null):t.value}),(e=>{null!=e&&this.applySettings(e)}),{fireImmediately:!0,equals:Ue.structural})}setupWriteReaction(){return Ln((()=>this.settings),(e=>{this.storage.updateSettings(e)}),{delay:250,equals:Ue.structural})}applySettings(e){this.columnsStore.setColumnSettings(function(e){return e.columns.map((t=>{var n;const i=e.sortOrder.findIndex((e=>e[0]===t.columnId));return{columnId:t.columnId,size:t.size,hidden:t.hidden,orderWeight:e.columnOrder.indexOf(t.columnId),sortWeight:-1!==i?i+1:void 0,sortDir:-1!==i?null===(n=e.sortOrder[i])||void 0===n?void 0:n[1]:void 0}}))}(e)),this.columnsStore.setColumnFilterSettings(e.columnFilters)}readSettings(e,t,n){return null==n?ls(new el):this.isSettingsObject(n)?n.name!==e||n.settingsHash!==t?ls(new Error("Widget configuration for (".concat(e,")[hash:").concat(t,"]")+" doesn't match provided settings (".concat(n.name,")[hash:").concat(n.settingsHash,"].")+" Restoring those settings might result in errors.")):us(n):ls(new Qa)}isSettingsObject(e){return"object"==typeof e&&null!==e&&"name"in e&&"settingsHash"in e&&"schemaVersion"in e&&e.schemaVersion===this.schemaVersion}get settings(){return function(e,t,n,i,r){const o=n.filter((e=>e.sortDir&&void 0!==e.sortWeight)).sort(((e,t)=>e.sortWeight-t.sortWeight)).map((e=>[e.columnId,e.sortDir])),s=[...n].sort(((e,t)=>e.orderWeight-t.orderWeight)).map((e=>e.columnId));return{name:e,schemaVersion:2,settingsHash:t,columns:n.map((e=>({columnId:e.columnId,size:e.size,hidden:e.hidden,filterSettings:void 0}))),columnFilters:Array.from(i),groupFilters:Array.from(r),sortOrder:o,columnOrder:s}}(this.gridName,this.gridColumnsHash,this.columnsStore.columnSettings,this.columnsStore.filterSettings,this.headerFilters.settings)}}class Qa extends Error{constructor(){super("Invalid settings object"),this.name="InvalidSettingsError"}}class el extends Error{constructor(){super("Settings is undefined"),this.name="UndefinedSettingsError"}}class tl{constructor(e,t){H(this,"type","legacy"),H(this,"_attrs",void 0),H(this,"dispose",void 0),H(this,"filterMap",void 0),H(this,"filterList",void 0),H(this,"get",(e=>this.filterMap[e])),this._attrs=e;const n=this.filterMap=function(e,t){const[n=null,i=null,r=null,o=null]=null!=t?t:[],[s,a,l,u]=nl(e);return{[ds.STRING]:s.length>0?new za(s,n):null,[ds.NUMBER]:a.length>0?new Va(a,i):null,[ds.DATE]:l.length>0?new Na(l,r):null,[ds.ENUMERATION]:u.length>0?new La(u,o):null}}(e,t);this.filterList=[n[ds.STRING],n[ds.NUMBER],n[ds.DATE],n[ds.ENUMERATION]],ui(this,{_attrs:Nt.ref,conditions:Mt,settings:Mt,updateProps:kn})}get conditions(){return this.filterList.map((e=>e?e.condition:void 0))}get settings(){return new Map}set settings(e){}updateProps(e){this._attrs=e}updateFilters(e){const[t,n,i,r]=nl(e),[o,s,a,l]=this.filterList;null==o||o.updateProps(t),null==s||s.updateProps(n),null==a||a.updateProps(i),null==l||l.updateProps(r)}setup(){const e=[];return this.filterList.forEach((t=>{t&&"setup"in t&&e.push(t.setup())})),e.push(Ln((()=>this._attrs),(e=>this.updateFilters(e)),{equals:Ue.shallow})),this.dispose=()=>e.forEach((e=>e()))}}function nl(e){return[e.filter(ol),e.filter(rl),e.filter(il),e.filter((e=>"Boolean"===e.type||function(e){return"Enum"===e.type}(e)))]}function il(e){return"DateTime"===e.type}function rl(e){return"Long"===e.type||"Decimal"===e.type||"Integer"===e.type||"AutoNumber"===e.type}function ol(e){return"HashString"===e.type||"String"===e.type}class sl{constructor(e,t,n){var i;H(this,"provider",void 0),H(this,"context",void 0),this.provider=this.createProvider(e,n),this.context={version:2,parentChannelName:null!==(i=t.filtersChannelName)&&void 0!==i?i:"",provider:this.provider},ui(this,{conditions:Mt,settings:Mt})}get conditions(){return this.provider.hasError?[]:this.provider.value.conditions}get settings(){return this.provider.hasError?new Map:this.provider.value.settings}set settings(e){this.provider.hasError||(this.provider.value.settings=e)}createProvider(e,t){return us(new tl(e.filterList.map((e=>e.filter)),t))}setup(){if(!this.provider.hasError)return this.provider.value.setup()}updateProps(){}}class al{constructor(e){this.setInitParams(e),this.staticInfo={name:e.name,filtersChannelName:"datagrid/".concat($())};const[t,n]=this.getDsViewState(e);this.columnsStore=new Xa(e,this.staticInfo,t),this.headerFiltersStore=new sl(e,this.staticInfo,n),this.settingsStore=new $a(e,this.columnsStore,this.headerFiltersStore),this.progressStore=new ia}get isLoaded(){return this.columnsStore.loaded}get conditions(){const e=this.columnsStore.conditions,t=this.headerFiltersStore.conditions;return m(ma(e),ma(t))}get sortInstructions(){return this.columnsStore.sortInstructions}setup(){return this.headerFiltersStore.setup()}dispose(){this.settingsStore.dispose()}setInitParams(e){"buttons"===e.pagination&&e.datasource.requestTotalCount(!0),e.datasource.setLimit(e.pageSize)}getDsViewState(e){let{datasource:t}=e;if(!t.filter)return[[],[]];if(!ha(t.filter))return[[],[]];if(2!==t.filter.args.length)return[[],[]];const[n,i]=t.filter.args;return[_a(n),_a(i)]}updateProps(e){this.progressStore.exporting||(this.columnsStore.updateProps(e),this.settingsStore.updateProps(e))}}class ll{constructor(e){this._status="idle",this.offset=0,this.loaded=0,this.limit=100,this.totalCount=void 0,this.shouldSendHeaders=!1,this.send=()=>(this.emitLoadStart(),this._status="awaiting",this.offset=0,this.datasource.setLimit(this.limit),this.datasource.setOffset(this.offset),this.datasource.reload(),new Promise((e=>this.on("loadend",(()=>e()))))),this.abort=()=>{this._status="aborted",this.emitAbort(),this.emitLoadEnd(),this.dispose()},this.onsourcechange=e=>{const t=e.offset===this.offset&&e.limit===this.limit&&"available"===e.status;"awaiting"===this._status&&t&&(this.datasource=e,this.shouldSendHeaders&&(this.sendHeaders(),this.shouldSendHeaders=!1),this.read())},this.onpropertieschange=e=>{"reading"===this._status&&(this.columns=e,this.read())};const{ds:t,columns:n,withHeaders:i=!1,limit:r=0}=e;this.limit=Math.max(r,this.limit),this.emitter=Ys(),this.datasource=t,this.totalCount=t.totalCount,this.columns=n,this.shouldSendHeaders=i}get status(){return this._status}on(e,t){return this.emitter.on(e,t)}emitLoadStart(){this.emitter.emit("loadstart",this.createProgressEvent("loadstart"))}emitHeaders(e){this.emitter.emit("headers",e)}emitData(e){this.emitter.emit("data",e)}emitProgress(){this.emitter.emit("progress",this.createProgressEvent("progress"))}emitAbort(){this.emitter.emit("abort",this.createProgressEvent("abort"))}emitEnd(){this.emitter.emit("end",this.createProgressEvent("end"))}emitLoadEnd(){this.emitter.emit("loadend",this.createProgressEvent("loadend"))}createProgressEvent(e){return new ProgressEvent(e,{lengthComputable:"number"==typeof this.totalCount,loaded:this.loaded,total:this.totalCount})}sendHeaders(){const e=this.columns.map((e=>{var t,n,i,r,o;return{name:e.header&&(o=e.header,o&&"available"===o.status&&o.value)&&null!==(n=null===(t=e.header.value)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",type:null!==(r=null===(i=e.attribute)||void 0===i?void 0:i.type.toString())&&void 0!==r?r:""}}));this.emitHeaders(e)}read(){this._status="reading";const{items:e=[]}=this.datasource,t=e.every((e=>this.columns.every((t=>{var n,i;let r;return r="attribute"===t.showContentAs?null===(n=t.attribute)||void 0===n?void 0:n.get(e).status:"dynamicText"===t.showContentAs?null===(i=t.dynamicText)||void 0===i?void 0:i.get(e).status:t.exportValue?t.exportValue.get(e).status:"available","loading"!==r}))));if(!t)return;const n=(i=e,r=this.columns,i.map(function(e){return t=>e.map((e=>ul[e.showContentAs](t,e)))}(r)));var i,r;this.sendChunk(n),this.datasource.hasMoreItems?this.fetchNext():this.end()}sendChunk(e){this._status="sending",this.loaded+=e.length,this.emitData(e),this.emitProgress()}fetchNext(){this._status="awaiting",this.offset+=this.limit,this.datasource.setOffset(this.offset)}end(){this._status="end",this.emitEnd(),this.emitLoadEnd(),this.dispose()}dispose(){this.emitter.events={}}}const ul={attribute(e,t){if(void 0===t.attribute)return"";const n=t.attribute.get(e);return"available"!==n.status?"":"boolean"==typeof n.value?n.value:n.value instanceof j?n.value.toNumber():n.displayValue},dynamicText(e,t){if(void 0===t.dynamicText)return"";const n=t.dynamicText.get(e);switch(n.status){case"available":return n.value;case"unavailable":return"n/a";default:return""}},customContent(e,t){var n,i;return null!==(i=null===(n=t.exportValue)||void 0===n?void 0:n.get(e).value)&&void 0!==i?i:""}};class cl{constructor(e){this.datasource=null,this.columns=[],this.properties=[],this.locked=!1,this.oncolumnschange=e=>{!1===this.locked&&(this.columns=e)},this.onsourcechange=e=>{this.datasource=e},this.onpropertieschange=e=>{this.properties=e},this.abort=()=>this.emitter.emit("abort"),this.progressStore=e,this.emitter=Ys(),this.emitter.on("columnschange",this.oncolumnschange),this.emitter.on("propertieschange",this.onpropertieschange),this.emitter.on("sourcechange",this.onsourcechange)}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.emitter.emit(e,...n)}connectProgress(e){e.on("loadstart",this.progressStore.onloadstart),e.on("progress",this.progressStore.onprogress);const t=this.emitter.on("exportend",(()=>{this.progressStore.onloadend(),t()}))}async exportData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===this.datasource)return void console.error("Export controller: datasource is missing.");0!==this.properties.length&&0!==this.columns.length||console.error("Export controller: no columns to export.");const n=this.createFilter(this.columns.slice()),i={offset:this.datasource.offset,limit:this.datasource.limit};this.locked=!0;let r=new ll({ds:this.datasource,columns:n(this.properties),...t});this.connectProgress(r);const o=[this.emitter.on("sourcechange",r.onsourcechange),this.emitter.on("propertieschange",(e=>null==r?void 0:r.onpropertieschange(n(e)))),this.emitter.on("abort",r.abort)];e(r),await r.send(),o.forEach((e=>e())),r=null,this.datasource.setLimit(i.limit),this.datasource.setOffset(i.offset),this.datasource.reload();const s=this.emitter.on("sourcechange",(e=>{e.limit===i.limit&&e.offset===i.offset&&(this.emitter.emit("exportend"),this.locked=!1,s())}))}createFilter(e){const t=e=>"customContent"!==e.showContentAs||void 0!==e.exportValue;return n=>e.map((e=>n[e])).filter(t)}}const dl="com.mendix.widgets.web.datagrid.export";function hl(){var e;return null!==(e=window[dl])&&void 0!==e?e:window[dl]=new Map}function fl(e,t,i){const[o]=s((()=>function(e,t){return{key:e,controller:new cl(t)}}(e.name,i))),a=r((()=>null==o?void 0:o.controller.abort()),[o]);return n((()=>(function(e){hl().set(e.key,e.controller)}(o),()=>{null==o||o.controller.abort(),function(e){if(!e)return;const t=hl();t.get(e.key)===e.controller&&t.delete(e.key)}(o)})),[o]),n((()=>{null==o||o.controller.emit("sourcechange",e.datasource)}),[e.datasource,o]),n((()=>{null==o||o.controller.emit("propertieschange",e.columns)}),[e.columns,o]),n((()=>{null==o||o.controller.emit("columnschange",t.visibleColumns.map((e=>e.columnIndex)))}),[t.visibleColumns,o]),[i,a]}const vl=wr((e=>{var i,a,l,c,d,h,f;const v="virtualScrolling"===e.pagination||"loadMore"===e.pagination,g=v?e.datasource.limit/e.pageSize:e.datasource.offset/e.pageSize,{columnsStore:p,rootStore:m}=e,_=null!==(i=e.datasource.items)&&void 0!==i?i:[],[b,y]=fl(e,e.columnsStore,e.progressStore),{isRefreshing:w}=function(e){let{datasource:t,refreshInterval:i}=e;const[r,o]=s(!1);return n((()=>{let e;return i>0&&(e=setTimeout((()=>{t.reload(),o(!0)}),1e3*i)),()=>{e&&clearTimeout(e)}}),[t,i]),n((()=>{"available"===t.status&&o(!1)}),[t]),{isRefreshing:r}}({datasource:e.datasource,refreshInterval:e.refreshInterval}),S=r((t=>{const n=t(g);v?e.datasource.setLimit(n*e.pageSize):e.datasource.setOffset(n*e.pageSize)}),[e.datasource,e.pageSize,v,g]),x=W(e.itemSelection,e.datasource,e.onSelectionChange),C=function(e,t){return o((()=>{var n;return new ws(e.itemSelection,t,e.itemSelectionMethod,e.showSelectAllToggle,null!==(n=e.pageSize)&&void 0!==n?n:5,e.itemSelectionMode)}),[t])}(e,x),O=function(e){const t=o((()=>new Ss(e.onClickTrigger,e.onClick)),[]);return n((()=>{t.update(e.onClick)})),t}({onClickTrigger:e.onClickTrigger,onClick:e.onClick});var A,E;A=e.rootStore.staticInfo.name,E=e.rootStore.staticInfo.filtersChannelName,na(t({inputChannel:A,event:Zs.reset.filters,onEvent:(e,t)=>{e(E,Zs.reset.value,...t)}}).current);const I=C.showCheckboxColumn?p.visibleColumns.length+1:p.visibleColumns.length,T=function(e){let{rows:n,columns:i,pageSize:r}=e;const s=t(null);return o((()=>{const e=new qs(n,i,r);return null===s.current?s.current=new Ws(new Xs,e):s.current.updateGridLayout(e),s.current}),[n,i,r])}({rows:_.length,columns:I,pageSize:e.pageSize}),N=function(e,t,n){return o((()=>new Fs((n=>({item:n,pageSize:e.pageSize,selectionType:e.selectionType,selectionMethod:e.selectionMethod,selectionMode:e.selectionMode,clickTrigger:t.clickTrigger})),e.onSelect,e.onSelectAll,e.onSelectAdjacent,t.onExecuteAction,n.dispatch)),[e,t,n])}(C,O,T),k=function(e,t){return o((()=>new Us((t=>({item:t,pageSize:e.pageSize,selectionType:e.selectionType,selectionMethod:e.selectionMethod,selectionMode:e.selectionMode})),e.onSelect,e.onSelectAll,e.onSelectAdjacent,t.dispatch)),[e,t])}(C,T),P=o((()=>!b.exporting&&(!w&&(!!e.datasource.hasMoreItems&&"loading"===e.datasource.status))),[b,w,e.datasource.status,e.datasource.hasMoreItems]);return u(ss,{className:e.class,CellComponent:Rr,columnsDraggable:e.columnsDraggable,columnsFilterable:e.columnsFilterable,columnsHidable:e.columnsHidable,columnsResizable:e.columnsResizable,columnsSortable:e.columnsSortable,data:_,emptyPlaceholderRenderer:r((t=>"custom"===e.showEmptyPlaceholder?t(e.emptyPlaceholder):u("div",null)),[e.emptyPlaceholder,e.showEmptyPlaceholder]),filterRenderer:r(((e,t)=>e(p.columnFilters[t].renderFilterWidgets())),[p.columnFilters]),headerTitle:null===(a=e.filterSectionTitle)||void 0===a?void 0:a.value,headerContent:e.filtersPlaceholder&&u(bs,{selectionHelper:x,filtersStore:m.headerFiltersStore},e.filtersPlaceholder),hasMoreItems:null!==(l=e.datasource.hasMoreItems)&&void 0!==l&&l,headerWrapperRenderer:r(((e,t)=>t),[]),id:o((()=>"DataGrid".concat($())),[]),numberOfItems:e.datasource.totalCount,onExportCancel:y,page:g,pageSize:e.pageSize,paginationType:e.pagination,loadMoreButtonCaption:null===(c=e.loadMoreButtonCaption)||void 0===c?void 0:c.value,paging:ys({pagination:e.pagination,showPagingButtons:e.showPagingButtons,totalCount:e.datasource.totalCount,limit:e.datasource.limit}),pagingPosition:e.pagingPosition,showPagingButtons:e.showPagingButtons,rowClass:r((t=>{var n,i,r;return null!==(r=null===(i=null===(n=e.rowClass)||void 0===n?void 0:n.get(t))||void 0===i?void 0:i.value)&&void 0!==r?r:""}),[e.rowClass]),gridInteractive:!(!e.itemSelection&&!e.onClick),setPage:S,styles:e.style,selectionStatus:"Multi"===(null==x?void 0:x.type)?x.selectionStatus:"unknown",exporting:b.exporting,processedRows:b.loaded,exportDialogLabel:null===(d=e.exportDialogLabel)||void 0===d?void 0:d.value,cancelExportLabel:null===(h=e.cancelExportLabel)||void 0===h?void 0:h.value,selectRowLabel:null===(f=e.selectRowLabel)||void 0===f?void 0:f.value,visibleColumns:p.visibleColumns,availableColumns:p.availableColumns,setIsResizing:e=>p.setIsResizing(e),columnsSwap:(e,t)=>{let[n,i]=t;return p.swapColumns(e,[n,i])},selectActionHelper:C,cellEventsController:N,checkboxEventsController:k,focusController:T,isLoading:P,loadingType:e.loadingType,columnsLoading:!p.loaded})})),gl=wr((e=>e.rootStore.isLoaded?u(vl,{...e}):null));function pl(e){const i=function(e){const[i]=s((()=>new al(e)));n((()=>{const e=i.setup();return()=>{i.dispose(),null==e||e()}}),[i]),n((()=>{i.updateProps(e)}));const r=t(e.datasource);return r.current=e.datasource,n((()=>{const e=[];return e.push(Mn((()=>{r.current.setSortOrder(i.sortInstructions)}))),e.push(Mn((()=>{r.current.setFilter(i.conditions)}))),()=>{e.forEach((e=>e()))}}),[i]),i}(e);return u(gl,{...e,rootStore:i,columnsStore:i.columnsStore,progressStore:i.progressStore})}export{pl as default};
